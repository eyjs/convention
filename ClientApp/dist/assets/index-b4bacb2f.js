import{d as e,r as t,c as l,u as a,o as s,a as n,b as o,t as r,e as i,F as d,f as u,g as c,h as v,i as m,n as p,w as g,j as h,v as x,k as b,l as y,m as f,p as w,q as k,s as C,x as M,y as j,z as $,A as I,B as S,C as T,D as V,E as D,G as _,T as N,H as A,I as B}from"./vendor-511f4b82.js";import{a as z}from"./utils-8e1cd5bd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const P={}.VITE_API_URL||"https://localhost:5001/api",U=z.create({baseURL:P,headers:{"Content-Type":"application/json"}});U.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),U.interceptors.response.use(e=>e,async e=>{var t;const l=e.config;if(401===(null==(t=e.response)?void 0:t.status)&&!l._retry){l._retry=!0;try{const e=localStorage.getItem("refreshToken");if(e){const t=await z.post(`${P}/auth/refresh`,{refreshToken:e}),{accessToken:a,refreshToken:s}=t.data;return localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",s),l.headers.Authorization=`Bearer ${a}`,U(l)}}catch(a){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"}}return Promise.reject(e)});const O=e=>U.post("/auth/login",e),H=e=>U.post("/auth/guest-login",e),F=()=>U.post("/auth/logout"),L=()=>U.get("/conventions"),q=e=>U.get(`/conventions/${e}`),Y=e("auth",()=>{const e=t(null),a=t(null),s=t(null),n=t([]),o=t(!1),r=t(null),i=l(()=>!!a.value),d=l(()=>{var t;return"Admin"===(null==(t=e.value)?void 0:t.role)});async function u(){try{await F()}catch(t){console.error("Logout error:",t)}finally{a.value=null,s.value=null,e.value=null,n.value=[],localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}}return{user:e,accessToken:a,refreshToken:s,conventions:n,loading:o,error:r,isAuthenticated:i,isAdmin:d,initAuth:function(){const t=localStorage.getItem("accessToken"),l=localStorage.getItem("refreshToken"),n=localStorage.getItem("user");if(t&&n&&"undefined"!==n&&"null"!==n)try{a.value=t,s.value=l,e.value=JSON.parse(n)}catch(o){console.error("Failed to parse user from localStorage",o),u()}},register:async function(e){return{success:!1}},login:async function(t,l){var i,d;o.value=!0,r.value=null;try{const o=await O({loginId:t,password:l}),{accessToken:r,refreshToken:i,user:d,conventions:u}=o.data;return a.value=r,s.value=i,e.value=d,n.value=u||[],localStorage.setItem("accessToken",r),localStorage.setItem("refreshToken",i),localStorage.setItem("user",JSON.stringify(d)),{success:!0}}catch(u){return r.value=(null==(d=null==(i=u.response)?void 0:i.data)?void 0:d.message)||"로그인에 실패했습니다.",{success:!1,error:r.value}}finally{o.value=!1}},guestLogin:async function(t,l,s){var i,d;o.value=!0,r.value=null;try{const o=await H({conventionId:t,name:l,phone:s}),{accessToken:r,guest:i,convention:d}=o.data;a.value=r;const u={id:i.id,name:i.name,phone:i.phone,role:"Guest",guestId:i.id};return e.value=u,n.value=[d],localStorage.setItem("accessToken",r),localStorage.setItem("user",JSON.stringify(u)),{success:!0}}catch(u){return r.value=(null==(d=null==(i=u.response)?void 0:i.data)?void 0:d.message)||"로그인에 실패했습니다.",{success:!1,error:r.value}}finally{o.value=!1}},logout:u,fetchCurrentUser:async function(){},joinConvention:async function(e){return{success:!1}},leaveConvention:async function(e){return{success:!1}}}}),K={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},E={class:"relative h-48 bg-gradient-to-br from-primary-600 to-primary-800 overflow-hidden"},R={class:"relative h-full flex flex-col justify-center px-6 text-white"},W={class:"text-2xl font-bold mb-2"},G={class:"flex items-center space-x-2 text-sm text-white/90"},J={class:"flex items-center space-x-2 text-sm text-white/90 mt-1"},Q={class:"mt-4 inline-flex items-center px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-full text-sm font-bold"},Z={class:"px-4 py-6 space-y-6 -mt-8"},X={class:"bg-white rounded-2xl shadow-lg p-5"},ee={class:"grid grid-cols-4 gap-4"},te=["onClick"],le={class:"w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center shadow-md"},ae={class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se=["d"],ne={class:"text-xs font-medium text-gray-700 text-center leading-tight"},oe={key:0,class:"bg-white rounded-2xl shadow-lg p-5"},re={class:"flex items-center justify-between mb-4"},ie={class:"space-y-3"},de={class:"flex-1 min-w-0"},ue={class:"flex items-center space-x-2 mb-1"},ce={class:"px-2 py-0.5 bg-primary-600 text-white text-xs font-bold rounded"},ve={class:"text-xs text-gray-500"},me={class:"font-semibold text-gray-900 text-sm"},pe={key:1,class:"bg-white rounded-2xl shadow-lg p-5"},ge={class:"flex items-center justify-between mb-4"},he={class:"space-y-2"},xe=["onClick"],be={class:"flex items-start space-x-2"},ye={class:"flex-1 min-w-0"},fe={class:"font-medium text-gray-900 text-sm truncate"},we={class:"text-xs text-gray-500 mt-1"},ke={class:"grid grid-cols-3 gap-3"},Ce={class:"bg-white rounded-xl shadow-md p-4 text-center"},Me={class:"text-2xl font-bold text-gray-900"},je={class:"bg-white rounded-xl shadow-md p-4 text-center"},$e={class:"text-2xl font-bold text-gray-900"},Ie={class:"bg-white rounded-xl shadow-md p-4 text-center"},Se={class:"text-2xl font-bold text-gray-900"},Te={__name:"ConventionHome",setup(e){const v=a(),m=Y(),p=async()=>{confirm("로그아웃하시겠습니까?")&&(await m.logout(),v.push("/login"))},g=t({title:"iFA STAR TOUR @ ROMA",startDate:"2025-03-12",endDate:"2025-03-05",location:"Roma, Italy"}),h=t([{id:1,label:"나의일정",route:"/my-schedule",iconPath:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:2,label:"장소정보",route:"/location",iconPath:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"},{id:3,label:"맛집",route:"/tastespot",iconPath:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:4,label:"사진첩",route:"/event-place",iconPath:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}]),x=t([{id:1,time:"09:00",title:"STAFF 선발대 미팅",location:"인천공항"},{id:2,time:"14:00",title:"로마 도착",location:"로마공항"}]),b=t([{id:1,title:"일정 변경 안내",date:"2025-05-10"},{id:2,title:"호텔 체크인 정보",date:"2025-05-09"}]),y=t({total:156,confirmed:142,pending:14}),f=l(()=>{const e=new Date,t=new Date(g.value.startDate),l=Math.ceil((t-e)/864e5);return l>0?l:0});function w(e){v.push(e)}return(e,t)=>(s(),n("div",K,[o("div",E,[t[6]||(t[6]=o("div",{class:"absolute inset-0 opacity-10"},[o("div",{class:"absolute top-0 left-0 w-64 h-64 bg-white rounded-full -translate-x-32 -translate-y-32"}),o("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full translate-x-48 translate-y-48"})],-1)),o("div",{class:"absolute top-4 right-4 z-10"},[o("button",{onClick:p,class:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 rounded-full text-white text-sm font-medium transition-all"},[...t[2]||(t[2]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"로그아웃",-1)])])]),o("div",R,[o("h1",W,r(g.value.title),1),o("div",G,[t[3]||(t[3]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),o("span",null,r(g.value.startDate)+" ~ "+r(g.value.endDate),1)]),o("div",J,[t[4]||(t[4]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),o("span",null,r(g.value.location),1)]),o("div",Q,[t[5]||(t[5]=o("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i(" D-"+r(f.value),1)])])]),o("div",Z,[o("div",X,[t[7]||(t[7]=o("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"빠른 메뉴",-1)),o("div",ee,[(s(!0),n(d,null,u(h.value,e=>(s(),n("button",{key:e.id,onClick:t=>w(e.route),class:"flex flex-col items-center justify-center space-y-2 p-3 rounded-xl hover:bg-gray-50 active:scale-95 transition-all"},[o("div",le,[(s(),n("svg",ae,[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:e.iconPath},null,8,se)]))]),o("span",ne,r(e.label),1)],8,te))),128))])]),x.value.length>0?(s(),n("div",oe,[o("div",re,[t[9]||(t[9]=o("h2",{class:"text-lg font-bold text-gray-900"},"오늘의 일정",-1)),o("button",{onClick:t[0]||(t[0]=e=>w("/my-schedule")),class:"text-sm text-primary-600 font-medium flex items-center"},[...t[8]||(t[8]=[i(" 전체보기 ",-1),o("svg",{class:"w-4 h-4 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),o("div",ie,[(s(!0),n(d,null,u(x.value,e=>(s(),n("div",{key:e.id,class:"flex items-start space-x-3 p-3 bg-gray-50 rounded-xl"},[t[10]||(t[10]=o("div",{class:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0"},[o("svg",{class:"w-6 h-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",de,[o("div",ue,[o("span",ce,r(e.time),1),o("span",ve,r(e.location),1)]),o("h3",me,r(e.title),1)])]))),128))])])):c("",!0),b.value.length>0?(s(),n("div",pe,[o("div",ge,[t[12]||(t[12]=o("h2",{class:"text-lg font-bold text-gray-900"},"공지사항",-1)),o("button",{onClick:t[1]||(t[1]=e=>w("/board")),class:"text-sm text-primary-600 font-medium flex items-center"},[...t[11]||(t[11]=[i(" 더보기 ",-1),o("svg",{class:"w-4 h-4 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),o("div",he,[(s(!0),n(d,null,u(b.value,e=>(s(),n("button",{key:e.id,onClick:t=>function(e){v.push(`/board/${e.id}`)}(e),class:"w-full text-left p-3 hover:bg-gray-50 rounded-xl transition-all"},[o("div",be,[t[13]||(t[13]=o("span",{class:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-bold rounded flex-shrink-0 mt-0.5"},"공지",-1)),o("div",ye,[o("h3",fe,r(e.title),1),o("p",we,r(e.date),1)])])],8,xe))),128))])])):c("",!0),o("div",ke,[o("div",Ce,[t[14]||(t[14]=o("div",{class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-2"},[o("svg",{class:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),o("div",Me,r(y.value.total),1),t[15]||(t[15]=o("div",{class:"text-xs text-gray-600 mt-1"},"전체 참가자",-1))]),o("div",je,[t[16]||(t[16]=o("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2"},[o("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",$e,r(y.value.confirmed),1),t[17]||(t[17]=o("div",{class:"text-xs text-gray-600 mt-1"},"참석 확정",-1))]),o("div",Ie,[t[18]||(t[18]=o("div",{class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2"},[o("svg",{class:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",Se,r(y.value.pending),1),t[19]||(t[19]=o("div",{class:"text-xs text-gray-600 mt-1"},"대기중",-1))])])])]))}},Ve={class:"min-h-screen bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center p-4"},De={class:"relative w-full max-w-md"},_e={class:"bg-white rounded-2xl shadow-2xl p-8"},Ne={class:"flex space-x-2 mb-6 bg-gray-100 p-1 rounded-xl"},Ae={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"},Be={class:"text-sm text-red-600"},ze=["disabled"],Pe={class:"flex justify-center gap-4 text-sm"},Ue=["disabled"],Oe={__name:"LoginView",setup(e){const l=a(),d=Y(),u=t("login"),w=t(""),k=t({loginId:"",password:""}),C=t({loginId:"",password:"",passwordConfirm:"",name:"",email:"",phone:""});async function M(){w.value="";const e=await d.login(k.value.loginId,k.value.password);e.success?l.push("/"):w.value=e.error}async function j(){if(w.value="",C.value.password!==C.value.passwordConfirm)return void(w.value="비밀번호가 일치하지 않습니다.");const{passwordConfirm:e,...t}=C.value,l=await d.register(t);l.success?(alert("회원가입이 완료되었습니다. 로그인해주세요."),u.value="login",C.value={loginId:"",password:"",passwordConfirm:"",name:"",email:"",phone:""}):w.value=l.error}return(e,t)=>{const l=v("router-link");return s(),n("div",Ve,[t[22]||(t[22]=o("div",{class:"absolute inset-0 opacity-10"},[o("div",{class:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-48 -translate-y-48"}),o("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full translate-x-48 translate-y-48"})],-1)),o("div",De,[t[21]||(t[21]=m('<div class="text-center mb-8"><div class="w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-xl"><span class="text-3xl font-bold text-primary-600">iFA</span></div><h1 class="text-3xl font-bold text-white mb-2">Convention</h1><p class="text-white/80 text-sm">행사 관리 시스템</p></div>',1)),o("div",_e,[o("div",Ne,[o("button",{onClick:t[0]||(t[0]=e=>u.value="login"),class:p(["flex-1 py-2 px-4 rounded-lg font-medium transition-all","login"===u.value?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 로그인 ",2),o("button",{onClick:t[1]||(t[1]=e=>u.value="register"),class:p(["flex-1 py-2 px-4 rounded-lg font-medium transition-all","register"===u.value?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 회원가입 ",2)]),w.value?(s(),n("div",Ae,[o("p",Be,r(w.value),1)])):c("",!0),"login"===u.value?(s(),n("form",{key:1,onSubmit:g(M,["prevent"]),class:"space-y-4"},[o("div",null,[t[10]||(t[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"아이디",-1)),h(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>k.value.loginId=e),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"아이디를 입력하세요"},null,512),[[x,k.value.loginId]])]),o("div",null,[t[11]||(t[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호",-1)),h(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>k.value.password=e),type:"password",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"비밀번호를 입력하세요"},null,512),[[x,k.value.password]])]),o("button",{type:"submit",disabled:b(d).loading,class:"w-full py-3 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},r(b(d).loading?"로그인 중...":"로그인"),9,ze),o("div",Pe,[y(l,{to:"/find-id",class:"text-gray-600 hover:text-primary-600 transition-colors"},{default:f(()=>[...t[12]||(t[12]=[i(" 아이디 찾기 ",-1)])]),_:1}),t[14]||(t[14]=o("span",{class:"text-gray-300"},"|",-1)),y(l,{to:"/find-password",class:"text-gray-600 hover:text-primary-600 transition-colors"},{default:f(()=>[...t[13]||(t[13]=[i(" 비밀번호 찾기 ",-1)])]),_:1})])],32)):c("",!0),"register"===u.value?(s(),n("form",{key:2,onSubmit:g(j,["prevent"]),class:"space-y-4"},[o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"아이디 *",-1)),h(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>C.value.loginId=e),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"아이디"},null,512),[[x,C.value.loginId]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호 *",-1)),h(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>C.value.password=e),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"6자 이상"},null,512),[[x,C.value.password]])]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호 확인 *",-1)),h(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>C.value.passwordConfirm=e),type:"password",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"비밀번호 재입력"},null,512),[[x,C.value.passwordConfirm]])]),o("div",null,[t[18]||(t[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"이름 *",-1)),h(o("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>C.value.name=e),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"이름"},null,512),[[x,C.value.name]])]),o("div",null,[t[19]||(t[19]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"이메일",-1)),h(o("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>C.value.email=e),type:"email",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"example@email.com"},null,512),[[x,C.value.email]])]),o("div",null,[t[20]||(t[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"전화번호",-1)),h(o("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>C.value.phone=e),type:"tel",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"010-1234-5678"},null,512),[[x,C.value.phone]])]),o("button",{type:"submit",disabled:b(d).loading,class:"w-full py-3 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},r(b(d).loading?"처리 중...":"회원가입"),9,Ue)],32)):c("",!0)])])])}}},He={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"},Fe={class:"max-w-md w-full"},Le={class:"bg-white rounded-2xl shadow-xl p-8"},qe={key:0,class:"space-y-6"},Ye=["disabled"],Ke={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Ee={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Re={class:"flex items-start"},We={class:"ml-3 text-sm text-red-700"},Ge={key:1,class:"space-y-6"},Je={class:"bg-green-50 border border-green-200 rounded-lg p-6"},Qe={class:"bg-white rounded-lg p-4 mb-4"},Ze={class:"space-y-1 font-mono text-sm"},Xe={class:"text-center text-sm text-gray-600 mt-6"},et={__name:"SetupView",setup(e){const l=t(!1),a=t(!1),d=t(""),u=t({loginId:"",password:""}),p=async()=>{var e,t;l.value=!0,d.value="";try{const e=await z.post("/api/setup/create-admin");u.value={loginId:e.data.loginId,password:e.data.password},a.value=!0}catch(s){d.value=(null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||"계정 생성 중 오류가 발생했습니다."}finally{l.value=!1}};return(e,t)=>{const g=v("router-link");return s(),n("div",He,[o("div",Fe,[o("div",Le,[t[11]||(t[11]=m('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4"><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg></div><h1 class="text-3xl font-bold text-gray-900 mb-2">초기 설정</h1><p class="text-gray-600">관리자 계정을 생성합니다</p></div>',1)),a.value?(s(),n("div",Ge,[o("div",Je,[t[8]||(t[8]=m('<div class="flex items-center justify-center mb-4"><div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div></div><h3 class="text-center text-lg font-semibold text-green-900 mb-2">계정 생성 완료!</h3>',2)),o("div",Qe,[t[7]||(t[7]=o("p",{class:"text-sm text-gray-600 mb-2"},"로그인 정보:",-1)),o("div",Ze,[o("p",null,[t[3]||(t[3]=o("span",{class:"text-gray-500"},"아이디:",-1)),t[4]||(t[4]=i()),o("strong",null,r(u.value.loginId),1)]),o("p",null,[t[5]||(t[5]=o("span",{class:"text-gray-500"},"비밀번호:",-1)),t[6]||(t[6]=i()),o("strong",null,r(u.value.password),1)])])]),t[9]||(t[9]=o("p",{class:"text-xs text-center text-gray-600"},"이 정보를 안전한 곳에 보관하세요",-1))]),y(g,{to:"/login",class:"block w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 text-center"},{default:f(()=>[...t[10]||(t[10]=[i(" 로그인 페이지로 이동 ",-1)])]),_:1})])):(s(),n("div",qe,[t[2]||(t[2]=m('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div class="ml-3"><h3 class="text-sm font-medium text-blue-800">생성될 계정 정보</h3><div class="mt-2 text-sm text-blue-700"><p><strong>아이디:</strong> admin</p><p><strong>비밀번호:</strong> admin123</p></div></div></div></div>',1)),o("button",{onClick:p,disabled:l.value,class:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center"},[l.value?(s(),n("svg",Ke,[...t[0]||(t[0]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),i(" "+r(l.value?"생성 중...":"관리자 계정 생성"),1)],8,Ye),d.value?(s(),n("div",Ee,[o("div",Re,[t[1]||(t[1]=o("svg",{class:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),o("p",We,r(d.value),1)])])):c("",!0)]))]),o("p",Xe,[t[13]||(t[13]=i(" 이미 계정이 있으신가요? ",-1)),y(g,{to:"/login",class:"text-indigo-600 hover:text-indigo-700 font-medium"},{default:f(()=>[...t[12]||(t[12]=[i("로그인",-1)])]),_:1})])])])}}},tt={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},lt={class:"sticky top-0 bg-white border-b px-6 py-4"},at={class:"flex justify-between items-center"},st={class:"text-xl font-bold"},nt={class:"grid grid-cols-2 gap-4"},ot={class:"grid grid-cols-2 gap-4"},rt={class:"flex items-center space-x-4"},it={class:"flex justify-end space-x-3 pt-4 border-t"},dt=["disabled"],ut={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},ct={__name:"ConventionFormModal",props:{convention:Object},emits:["close","save"],setup(e,{emit:l}){const a=e,d=l,u=t(!1),v=t({title:"",conventionType:"DOMESTIC",startDate:"",endDate:"",brandColor:"#6366f1",renderType:"STANDARD",themePreset:"default"});w(()=>a.convention,e=>{e&&(v.value={title:e.title,conventionType:e.conventionType,startDate:e.startDate?e.startDate.split("T")[0]:"",endDate:e.endDate?e.endDate.split("T")[0]:"",brandColor:e.brandColor||"#6366f1",renderType:e.renderType||"STANDARD",themePreset:e.themePreset||"default"})},{immediate:!0});const m=async()=>{u.value=!0;try{await d("save",v.value)}finally{u.value=!1}};return(t,l)=>(s(),n("div",{class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:l[9]||(l[9]=g(e=>t.$emit("close"),["self"]))},[o("div",tt,[o("div",lt,[o("div",at,[o("h2",st,r(e.convention?"행사 수정":"새 행사 만들기"),1),o("button",{onClick:l[0]||(l[0]=e=>t.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},[...l[10]||(l[10]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),o("form",{onSubmit:g(m,["prevent"]),class:"p-6 space-y-6"},[o("div",null,[l[11]||(l[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 행사명 "),o("span",{class:"text-red-500"},"*")],-1)),h(o("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>v.value.title=e),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"예: iFA STAR TOUR @ ROMA"},null,512),[[x,v.value.title]])]),o("div",null,[l[14]||(l[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 행사 유형 "),o("span",{class:"text-red-500"},"*")],-1)),o("div",nt,[o("label",{class:p(["relative flex items-center p-4 border-2 rounded-lg cursor-pointer hover:border-primary-500 transition-colors",{"border-primary-500 bg-primary-50":"DOMESTIC"===v.value.conventionType}])},[h(o("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>v.value.conventionType=e),type:"radio",value:"DOMESTIC",class:"sr-only"},null,512),[[k,v.value.conventionType]]),l[12]||(l[12]=o("div",{class:"flex-1"},[o("div",{class:"font-medium"},"국내 행사"),o("div",{class:"text-sm text-gray-500"},"국내에서 진행되는 행사")],-1))],2),o("label",{class:p(["relative flex items-center p-4 border-2 rounded-lg cursor-pointer hover:border-primary-500 transition-colors",{"border-primary-500 bg-primary-50":"OVERSEAS"===v.value.conventionType}])},[h(o("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>v.value.conventionType=e),type:"radio",value:"OVERSEAS",class:"sr-only"},null,512),[[k,v.value.conventionType]]),l[13]||(l[13]=o("div",{class:"flex-1"},[o("div",{class:"font-medium"},"해외 행사"),o("div",{class:"text-sm text-gray-500"},"해외에서 진행되는 행사")],-1))],2)])]),o("div",ot,[o("div",null,[l[15]||(l[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 시작일 "),o("span",{class:"text-red-500"},"*")],-1)),h(o("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>v.value.startDate=e),type:"date",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[x,v.value.startDate]])]),o("div",null,[l[16]||(l[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 종료일 "),o("span",{class:"text-red-500"},"*")],-1)),h(o("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>v.value.endDate=e),type:"date",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[x,v.value.endDate]])])]),o("div",null,[l[17]||(l[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 브랜드 컬러 ",-1)),o("div",rt,[h(o("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>v.value.brandColor=e),type:"color",class:"w-16 h-10 rounded cursor-pointer"},null,512),[[x,v.value.brandColor]]),h(o("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>v.value.brandColor=e),type:"text",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"#6366f1"},null,512),[[x,v.value.brandColor]])]),l[18]||(l[18]=o("p",{class:"text-sm text-gray-500 mt-1"},"행사의 메인 컬러를 설정합니다",-1))]),o("div",it,[o("button",{type:"button",onClick:l[8]||(l[8]=e=>t.$emit("close")),class:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," 취소 "),o("button",{type:"submit",disabled:u.value,class:"px-4 py-2 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center space-x-2"},[u.value?(s(),n("svg",ut,[...l[19]||(l[19]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),o("span",null,r(u.value?"저장 중...":e.convention?"수정":"생성"),1)],8,dt)])],32)])]))}},vt={class:"min-h-screen bg-gray-50"},mt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pt={class:"flex justify-between items-center mb-6"},gt={class:"text-sm text-gray-600"},ht={key:0,class:"text-center py-12"},xt={key:1,class:"text-center py-12 bg-white rounded-lg border-2 border-dashed"},bt={key:2,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},yt=["onClick"],ft={class:"absolute top-3 right-3 flex space-x-2"},wt={key:0,class:"px-2 py-1 bg-gray-800/50 text-white text-xs rounded-full backdrop-blur-sm"},kt={key:1,class:"px-2 py-1 bg-green-500/80 text-white text-xs rounded-full backdrop-blur-sm"},Ct={class:"absolute bottom-4 left-4 right-4"},Mt={class:"text-white font-bold text-lg truncate"},jt={class:"text-white/90 text-sm mt-1"},$t={class:"p-4"},It={class:"space-y-2 text-sm"},St={class:"flex items-center text-gray-600"},Tt={class:"flex items-center text-gray-600"},Vt={class:"flex items-center text-gray-600"},Dt={class:"mt-4 pt-4 border-t flex space-x-2"},_t=["onClick"],Nt=["onClick"],At=["onClick"],Bt={__name:"ConventionListView",setup(e){const l=a(),v=Y(),m=t([]),h=t(!1),x=t(!1),b=t(null),y=async()=>{confirm("로그아웃하시겠습니까?")&&(await v.logout(),l.push("/login"))},f=async()=>{h.value=!0;try{const e=await z.get("/api/conventions");m.value=e.data}catch(e){console.error("Failed to load conventions:",e),alert("행사 목록을 불러오는데 실패했습니다.")}finally{h.value=!1}},w=()=>{x.value=!1,b.value=null},k=async e=>{try{b.value?(await z.put(`/api/conventions/${b.value.id}`,e),alert("행사가 수정되었습니다.")):(await z.post("/api/conventions",e),alert("행사가 생성되었습니다.")),w(),f()}catch(t){console.error("Failed to save convention:",t),alert("저장에 실패했습니다.")}},$=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})},I=(e,t)=>{const l=parseInt(e.replace("#",""),16);return"#"+(Math.max(0,Math.min(255,(l>>16)+t))<<16|Math.max(0,Math.min(255,(l>>8&255)+t))<<8|Math.max(0,Math.min(255,(255&l)+t))).toString(16).padStart(6,"0")};return C(()=>{f()}),(e,t)=>(s(),n("div",vt,[o("header",{class:"bg-white shadow-sm sticky top-0 z-40"},[o("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[o("div",{class:"flex justify-between items-center h-16"},[t[2]||(t[2]=o("h1",{class:"text-2xl font-bold text-gray-900"},"행사 관리",-1)),o("div",{class:"flex items-center space-x-4"},[o("button",{onClick:y,class:"flex items-center space-x-2 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},[...t[1]||(t[1]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"로그아웃",-1)])])])])])]),o("div",mt,[o("div",pt,[o("div",null,[o("p",gt,"전체 "+r(m.value.length)+"개 행사",1)]),o("button",{onClick:t[0]||(t[0]=e=>x.value=!0),class:"flex items-center space-x-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors shadow-sm"},[...t[3]||(t[3]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),o("span",null,"새 행사 만들기",-1)])])]),h.value?(s(),n("div",ht,[...t[4]||(t[4]=[o("div",{class:"inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"},null,-1),o("p",{class:"text-gray-600 mt-4"},"로딩 중...",-1)])])):0===m.value.length?(s(),n("div",xt,[...t[5]||(t[5]=[o("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),o("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"행사가 없습니다",-1),o("p",{class:"mt-2 text-gray-600"},"첫 번째 행사를 만들어보세요",-1)])])):(s(),n("div",bt,[(s(!0),n(d,null,u(m.value,e=>(s(),n("div",{key:e.id,class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden cursor-pointer",onClick:t=>{return a=e.id,void l.push(`/admin/conventions/${a}`);var a}},[o("div",{class:"h-32 relative",style:j({background:`linear-gradient(135deg, ${e.brandColor||"#6366f1"} 0%, ${I(e.brandColor||"#6366f1",-20)} 100%)`})},[o("div",ft,["Y"===e.completeYn?(s(),n("span",wt," 종료 ")):(s(),n("span",kt," 진행중 "))]),o("div",Ct,[o("h3",Mt,r(e.title),1),o("p",jt,r("OVERSEAS"===e.conventionType?"해외":"국내")+" 행사",1)])],4),o("div",$t,[o("div",It,[o("div",St,[t[6]||(t[6]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),i(" "+r($(e.startDate))+" ~ "+r($(e.endDate)),1)]),o("div",Tt,[t[7]||(t[7]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),i(" 참석자 "+r(e.guestCount)+"명 ",1)]),o("div",Vt,[t[8]||(t[8]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),i(" 일정 "+r(e.scheduleCount)+"개 ",1)])]),o("div",Dt,[o("button",{onClick:g(t=>(e=>{b.value=e})(e),["stop"]),class:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," 수정 ",8,_t),o("button",{onClick:g(t=>(async e=>{try{await z.post(`/api/conventions/${e.id}/complete`),f()}catch(t){console.error("Failed to toggle complete:",t),alert("상태 변경에 실패했습니다.")}})(e),["stop"]),class:p(["flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors","Y"===e.completeYn?"text-green-700 bg-green-100 hover:bg-green-200":"text-gray-700 bg-gray-100 hover:bg-gray-200"])},r("Y"===e.completeYn?"재개":"종료"),11,Nt),o("button",{onClick:g(t=>(async e=>{if(confirm(`"${e.title}" 행사를 삭제하시겠습니까?`))try{await z.delete(`/api/conventions/${e.id}`),alert("행사가 삭제되었습니다."),f()}catch(t){console.error("Failed to delete convention:",t),alert("행사 삭제에 실패했습니다.")}})(e),["stop"]),class:"px-3 py-2 text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-lg transition-colors"}," 삭제 ",8,At)])])],8,yt))),128))]))]),x.value||b.value?(s(),M(ct,{key:0,convention:b.value,onClose:w,onSave:k},null,8,["convention"])):c("",!0)]))}},zt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8"},Pt={class:"bg-white rounded-lg shadow p-6"},Ut={class:"flex items-center justify-between"},Ot={class:"text-2xl font-bold mt-1"},Ht={class:"bg-white rounded-lg shadow p-6"},Ft={class:"flex items-center justify-between"},Lt={class:"text-2xl font-bold mt-1"},qt={class:"bg-white rounded-lg shadow p-6"},Yt={class:"flex items-center justify-between"},Kt={class:"text-2xl font-bold mt-1"},Et={key:0,class:"mb-8"},Rt={class:"bg-white rounded-lg shadow"},Wt={class:"p-4 sm:p-6 border-b flex justify-between items-center"},Gt={class:"p-4 sm:p-6"},Jt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Qt={class:"flex justify-between items-start mb-3"},Zt={class:"font-semibold text-gray-900"},Xt={class:"text-xs bg-gray-100 px-2 py-1 rounded"},el={class:"space-y-2"},tl={class:"text-sm text-gray-700 truncate"},ll={class:"text-sm font-semibold text-primary-600"},al=["onClick"],sl={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},nl={class:"bg-white rounded-lg shadow"},ol={class:"p-4 sm:p-6"},rl={key:0,class:"text-center text-gray-500 py-8"},il={key:1,class:"space-y-3"},dl=["onClick"],ul={class:"flex-1 min-w-0"},cl={class:"font-medium truncate"},vl={class:"text-sm text-gray-500 truncate"},ml={class:"bg-white rounded-lg shadow"},pl={class:"p-4 sm:p-6"},gl={key:0,class:"text-center text-gray-500 py-8"},hl={key:1,class:"space-y-3"},xl={class:"flex-1 min-w-0"},bl={class:"font-medium truncate"},yl={class:"text-sm text-gray-500"},fl={class:"text-sm font-medium text-primary-600"},wl={__name:"DashboardOverview",props:{conventionId:{type:Number,required:!0}},emits:["show-guest"],setup(e){const a=e,i=t({totalGuests:0,totalSchedules:0,scheduleAssignments:0}),v=t([]),m=t([]),p=t([]),g=t(!1),h=t([]),x=l(()=>g.value?p.value:p.value.slice(0,6));return C(()=>{(async()=>{try{const e=await U.get(`/admin/conventions/${a.conventionId}/stats`);i.value={totalGuests:e.data.totalGuests,totalSchedules:e.data.totalSchedules,scheduleAssignments:e.data.scheduleAssignments},v.value=e.data.recentGuests,m.value=e.data.scheduleStats,p.value=e.data.attributeStats||[],h.value=new Array(p.value.length).fill(!1)}catch(e){console.error("Failed to load stats:",e)}})()}),(e,t)=>(s(),n("div",null,[o("div",zt,[o("div",Pt,[o("div",Ut,[o("div",null,[t[1]||(t[1]=o("p",{class:"text-sm text-gray-600"},"총 참석자",-1)),o("p",Ot,r(i.value.totalGuests),1)]),t[2]||(t[2]=o("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),o("div",Ht,[o("div",Ft,[o("div",null,[t[3]||(t[3]=o("p",{class:"text-sm text-gray-600"},"총 일정 코스",-1)),o("p",Lt,r(i.value.totalSchedules),1)]),t[4]||(t[4]=o("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))])]),o("div",qt,[o("div",Yt,[o("div",null,[t[5]||(t[5]=o("p",{class:"text-sm text-gray-600"},"일정 배정",-1)),o("p",Kt,r(i.value.scheduleAssignments),1)]),t[6]||(t[6]=o("div",{class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})])],-1))])])]),p.value.length>0?(s(),n("div",Et,[o("div",Rt,[o("div",Wt,[t[7]||(t[7]=o("h3",{class:"text-lg font-semibold"},"속성별 통계",-1)),o("button",{onClick:t[0]||(t[0]=e=>g.value=!g.value),class:"text-sm text-primary-600 hover:text-primary-700"},r(g.value?"접기":"전체 보기"),1)]),o("div",Gt,[o("div",Jt,[(s(!0),n(d,null,u(x.value,(e,t)=>(s(),n("div",{key:e.attributeKey,class:"border rounded-lg p-4 hover:shadow-md transition-shadow"},[o("div",Qt,[o("h4",Zt,r(e.attributeKey),1),o("span",Xt,r(e.totalCount)+"명",1)]),o("div",el,[(s(!0),n(d,null,u(e.values.slice(0,h.value[t]?void 0:3),e=>(s(),n("div",{key:e.value,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[o("span",tl,r(e.value),1),o("span",ll,r(e.count)+"명",1)]))),128)),e.values.length>3?(s(),n("button",{key:0,onClick:e=>(e=>{h.value[e]=!h.value[e]})(t),class:"text-xs text-primary-600 hover:text-primary-700 mt-2 w-full text-left"},r(h.value[t]?"줄이기":`+${e.values.length-3}개 더보기`),9,al)):c("",!0)])]))),128))])])])])):c("",!0),o("div",sl,[o("div",nl,[t[9]||(t[9]=o("div",{class:"p-4 sm:p-6 border-b"},[o("h3",{class:"text-lg font-semibold"},"최근 등록된 참석자")],-1)),o("div",ol,[0===v.value.length?(s(),n("div",rl," 등록된 참석자가 없습니다 ")):(s(),n("div",il,[(s(!0),n(d,null,u(v.value,l=>(s(),n("div",{key:l.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:t=>e.$emit("show-guest",l.id)},[o("div",ul,[o("p",cl,r(l.guestName),1),o("p",vl,r(l.corpPart||"부서 미지정"),1)]),t[8]||(t[8]=o("span",{class:"text-xs text-gray-400 ml-2"},"방금",-1))],8,dl))),128))]))])]),o("div",ml,[t[10]||(t[10]=o("div",{class:"p-4 sm:p-6 border-b"},[o("h3",{class:"text-lg font-semibold"},"일정 코스별 현황")],-1)),o("div",pl,[0===m.value.length?(s(),n("div",gl," 등록된 일정이 없습니다 ")):(s(),n("div",hl,[(s(!0),n(d,null,u(m.value,e=>(s(),n("div",{key:e.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[o("div",xl,[o("p",bl,r(e.courseName),1),o("p",yl,r(e.itemCount)+"개 항목",1)]),o("span",fl,r(e.guestCount)+"명",1)]))),128))]))])])])]))}},kl={class:"flex justify-between items-center mb-6"},Cl={class:"flex items-center gap-4"},Ml={key:0,class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},jl={class:"flex gap-2"},$l={key:0,class:"text-center py-8"},Il={key:1,class:"text-center py-8 bg-white rounded-lg shadow"},Sl={key:2,class:"bg-white rounded-lg shadow overflow-hidden"},Tl={class:"overflow-x-auto"},Vl={class:"min-w-full divide-y divide-gray-200"},Dl={class:"bg-gray-50"},_l={class:"px-6 py-3 text-left"},Nl=["checked"],Al={class:"bg-white divide-y divide-gray-200"},Bl=["value"],zl=["onClick"],Pl={class:"font-medium text-gray-900"},Ul={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ol={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Hl={class:"px-6 py-4 whitespace-nowrap text-sm"},Fl={key:0,class:"text-gray-400"},Ll={key:1,class:"flex flex-wrap gap-1"},ql={class:"px-6 py-4 whitespace-nowrap text-sm"},Yl={key:0,class:"text-gray-400"},Kl={key:1,class:"text-gray-600"},El=["onClick"],Rl=["onClick"],Wl={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Gl={class:"p-6"},Jl={class:"text-xl font-semibold mb-4"},Ql={class:"space-y-4"},Zl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Xl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ea={class:"space-y-3"},ta={class:"block text-sm font-medium text-gray-700"},la=["onUpdate:modelValue"],aa=["value"],sa=["onUpdate:modelValue","placeholder"],na={class:"pt-3 border-t"},oa=["onUpdate:modelValue"],ra=["onUpdate:modelValue"],ia=["onClick"],da={key:0,class:"text-sm text-gray-500 p-3 bg-gray-50 rounded"},ua={key:1},ca={class:"flex justify-between items-center mb-2"},va={class:"text-sm text-gray-600"},ma={class:"space-y-2 max-h-60 overflow-y-auto border rounded p-2"},pa=["value"],ga={class:"flex-1"},ha={class:"font-medium"},xa={key:0,class:"text-xs text-gray-500"},ba={class:"text-xs text-gray-400 mt-1"},ya={class:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto"},fa={class:"p-6"},wa={class:"flex justify-between items-start mb-6"},ka={class:"text-2xl font-bold"},Ca={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Ma={class:"space-y-2 text-sm"},ja={class:"inline ml-2"},$a={class:"inline ml-2"},Ia={class:"inline ml-2"},Sa={class:"inline ml-2"},Ta={key:0},Va={class:"space-y-2 text-sm"},Da={class:"text-gray-500 inline"},_a={class:"inline ml-2 font-medium"},Na={key:0},Aa={class:"space-y-4"},Ba={class:"bg-gray-50 px-4 py-3 border-b"},za={class:"font-semibold"},Pa={key:0,class:"text-sm text-gray-600"},Ua={class:"p-4"},Oa={class:"space-y-3"},Ha={class:"flex-shrink-0 w-24 text-sm"},Fa={class:"font-medium"},La={class:"text-gray-600"},qa={class:"flex-1"},Ya={class:"font-medium"},Ka={key:0,class:"text-sm text-gray-500"},Ea={key:1,class:"text-sm text-gray-600 mt-1 whitespace-pre-wrap"},Ra={key:1,class:"text-center text-gray-500 py-8 border rounded-lg"},Wa={class:"bg-white rounded-lg w-full max-w-lg"},Ga={class:"p-6"},Ja={class:"mb-4"},Qa={class:"space-y-2 max-h-96 overflow-y-auto"},Za=["onClick"],Xa={class:"flex justify-between items-start"},es={class:"font-medium"},ts={class:"text-sm text-gray-500"},ls={key:0,class:"flex flex-wrap gap-1 mt-2"},as={key:1,class:"text-xs text-gray-400 mt-1"},ss={key:0,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"},ns={class:"flex justify-end mt-6"},os={class:"bg-white rounded-lg w-full max-w-2xl"},rs={class:"p-6"},is={class:"mb-4 p-4 bg-blue-50 rounded-lg"},ds={class:"text-sm font-medium text-blue-900"},us={class:"flex flex-wrap gap-2 mt-2"},cs={key:0,class:"px-2 py-1 bg-white text-sm rounded"},vs={class:"mb-4"},ms={class:"space-y-2 max-h-96 overflow-y-auto border rounded-lg p-3"},ps=["value"],gs={class:"flex-1"},hs={class:"font-medium"},xs={key:0,class:"text-sm text-gray-600"},bs={class:"text-xs text-gray-500 mt-1"},ys={class:"mb-4"},fs={class:"flex items-center gap-2"},ws={class:"flex justify-end space-x-3"},ks=["disabled"],Cs={__name:"GuestManagement",props:{conventionId:{type:Number,required:!0}},setup(e){const a=e,v=t([]),m=t([]),p=t([]),b=t(!1),y=t(!1),f=t(!1),w=t(!1),k=t(null),M=t(null),j=t(!0),S=t(""),T=t([]),V=t([]),D=t(!1),_=t({guestName:"",telephone:"",corpPart:"",residentNumber:"",affiliation:"",password:"",scheduleTemplateIds:[],templateAttributes:{},customAttributes:[]}),N=l(()=>S.value?v.value.filter(e=>e.guestName.toLowerCase().includes(S.value.toLowerCase())):v.value),A=async()=>{var e;j.value=!0;try{const e=await U.get(`/admin/conventions/${a.conventionId}/guests`);console.log("✅ Guests loaded:",e.data),v.value=e.data}catch(t){console.error("❌ Failed to load guests:",t),console.error("Error details:",null==(e=t.response)?void 0:e.data)}finally{j.value=!1}},B=async()=>{try{const e=await U.get(`/admin/conventions/${a.conventionId}/schedule-templates`);console.log("✅ Templates loaded:",e.data),m.value=e.data}catch(e){console.error("❌ Failed to load templates:",e)}},z=e=>{if(!e)return[];try{return JSON.parse(e)}catch{return[]}},P=()=>{b.value=!1,k.value=null,_.value={guestName:"",telephone:"",corpPart:"",residentNumber:"",affiliation:"",password:"",scheduleTemplateIds:[],templateAttributes:{},customAttributes:[]}},O=async()=>{var e,t;try{const e={};Object.entries(_.value.templateAttributes).forEach(([t,l])=>{l&&(e[t]=l)}),_.value.customAttributes.forEach(t=>{t.key&&t.value&&(e[t.key]=t.value)});const t={guestName:_.value.guestName,telephone:_.value.telephone,corpPart:_.value.corpPart,residentNumber:_.value.residentNumber,affiliation:_.value.affiliation,password:_.value.password,attributes:Object.keys(e).length>0?e:null};let l;if(k.value)await U.put(`/admin/guests/${k.value.id}`,t),l=k.value.id;else{l=(await U.post(`/admin/conventions/${a.conventionId}/guests`,t)).data.id}await U.post(`/admin/guests/${l}/schedules`,{scheduleTemplateIds:_.value.scheduleTemplateIds}),await A(),P()}catch(l){console.error("Failed to save guest:",l),alert("저장 실패: "+((null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.message)||l.message))}},H=()=>{y.value=!1,M.value=null},F=e=>{e.target.checked?T.value=v.value.map(e=>e.id):T.value=[]},L=()=>{w.value=!1,V.value=[],D.value=!1},q=async()=>{var e,t;if(0===V.value.length)return void alert("배정할 일정을 선택해주세요.");const l=D.value?`${T.value.length}명의 기존 일정을 모두 삭제하고 새 일정을 배정하시겠습니까?`:`${T.value.length}명에게 일정을 추가로 배정하시겠습니까?`;if(confirm(l))try{j.value=!0;let e=0,t=0;for(const l of T.value)try{if(D.value)await U.post(`/admin/guests/${l}/schedules`,{scheduleTemplateIds:V.value});else{const e=v.value.find(e=>e.id===l),t=(null==e?void 0:e.scheduleTemplates.map(e=>e.scheduleTemplateId))||[],a=[...new Set([...t,...V.value])];await U.post(`/admin/guests/${l}/schedules`,{scheduleTemplateIds:a})}e++}catch(a){console.error(`Failed to assign schedules to guest ${l}:`,a),t++}await A(),await B(),L(),T.value=[],alert(`완료! 성공: ${e}명, 실패: ${t}명`)}catch(a){console.error("Bulk assign failed:",a),alert("일괄 배정 실패: "+((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||a.message))}finally{j.value=!1}},Y=e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}`};return C(()=>{A(),B(),(async()=>{try{const e=await U.get(`/attributetemplate/conventions/${a.conventionId}`);p.value=e.data}catch(e){console.error("Failed to load attribute templates:",e)}})()}),(e,t)=>{var l,a,C,B,K,E,R;return s(),n("div",null,[o("div",kl,[o("div",Cl,[t[20]||(t[20]=o("h2",{class:"text-xl font-semibold"},"참석자 관리",-1)),T.value.length>0?(s(),n("span",Ml,r(T.value.length)+"명 선택됨 ",1)):c("",!0)]),o("div",jl,[T.value.length>0?(s(),n("button",{key:0,onClick:t[0]||(t[0]=e=>w.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2"},[...t[21]||(t[21]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),i(" 일정 일괄 배정 ",-1)])])):c("",!0),o("button",{onClick:t[1]||(t[1]=e=>b.value=!0),class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," + 참석자 추가 ")])]),j.value?(s(),n("div",$l,"로딩 중...")):0===v.value.length?(s(),n("div",Il,[t[22]||(t[22]=o("p",{class:"text-gray-500"},"등록된 참석자가 없습니다",-1)),o("button",{onClick:t[2]||(t[2]=e=>b.value=!0),class:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 첫 참석자 추가하기 ")])):(s(),n("div",Sl,[o("div",Tl,[o("table",Vl,[o("thead",Dl,[o("tr",null,[o("th",_l,[o("input",{type:"checkbox",onChange:F,checked:T.value.length===v.value.length&&v.value.length>0,class:"rounded"},null,40,Nl)]),t[23]||(t[23]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"이름",-1)),t[24]||(t[24]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"전화번호",-1)),t[25]||(t[25]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"부서",-1)),t[26]||(t[26]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"일정",-1)),t[27]||(t[27]=o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"속성",-1)),t[28]||(t[28]=o("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"작업",-1))])]),o("tbody",Al,[(s(!0),n(d,null,u(v.value,e=>(s(),n("tr",{key:e.id,class:"hover:bg-gray-50"},[o("td",{class:"px-6 py-4 whitespace-nowrap",onClick:t[4]||(t[4]=g(()=>{},["stop"]))},[h(o("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[3]||(t[3]=e=>T.value=e),class:"rounded"},null,8,Bl),[[$,T.value]])]),o("td",{class:"px-6 py-4 whitespace-nowrap cursor-pointer",onClick:t=>(async e=>{try{const t=await U.get(`/admin/guests/${e}/detail`);console.log("✅ Guest detail loaded:",t.data),M.value=t.data,y.value=!0}catch(t){console.error("❌ Failed to load guest detail:",t)}})(e.id)},[o("div",Pl,r(e.guestName),1)],8,zl),o("td",Ul,r(e.telephone),1),o("td",Ol,r(e.corpPart||"-"),1),o("td",Hl,[0===e.scheduleTemplates.length?(s(),n("span",Fl,"미배정")):(s(),n("div",Ll,[(s(!0),n(d,null,u(e.scheduleTemplates,e=>(s(),n("span",{key:e.scheduleTemplateId,class:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs"},r(e.courseName),1))),128))]))]),o("td",ql,[0===e.attributes.length?(s(),n("span",Yl,"-")):(s(),n("span",Kl,r(e.attributes.length)+"개",1))]),o("td",{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:t[5]||(t[5]=g(()=>{},["stop"]))},[o("button",{onClick:t=>(e=>{k.value=e;const t={},l=[],a=p.value.map(e=>e.attributeKey);e.attributes.forEach(e=>{a.includes(e.attributeKey)?t[e.attributeKey]=e.attributeValue:l.push({key:e.attributeKey,value:e.attributeValue})}),_.value={guestName:e.guestName,telephone:e.telephone,corpPart:e.corpPart||"",residentNumber:e.residentNumber||"",affiliation:e.affiliation||"",password:"",scheduleTemplateIds:e.scheduleTemplates.map(e=>e.scheduleTemplateId),templateAttributes:t,customAttributes:l}})(e),class:"text-primary-600 hover:text-primary-900 mr-3"},"수정",8,El),o("button",{onClick:t=>(async e=>{if(confirm("참석자를 삭제하시겠습니까?"))try{await U.delete(`/admin/guests/${e}`),await A()}catch(t){console.error("Failed to delete guest:",t),alert("삭제 실패")}})(e.id),class:"text-red-600 hover:text-red-900"},"삭제",8,Rl)])]))),128))])])])])),b.value||k.value?(s(),n("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(P,["self"])},[o("div",Wl,[o("div",Gl,[o("h2",Jl,r(k.value?"참석자 수정":"참석자 추가"),1),o("div",Ql,[o("div",Zl,[o("div",null,[t[29]||(t[29]=o("label",{class:"block text-sm font-medium mb-1"},"이름 *",-1)),h(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>_.value.guestName=e),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,_.value.guestName]])]),o("div",null,[t[30]||(t[30]=o("label",{class:"block text-sm font-medium mb-1"},"전화번호 *",-1)),h(o("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>_.value.telephone=e),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,_.value.telephone]])])]),o("div",Xl,[o("div",null,[t[31]||(t[31]=o("label",{class:"block text-sm font-medium mb-1"},"부서",-1)),h(o("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>_.value.corpPart=e),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,_.value.corpPart]])]),o("div",null,[t[32]||(t[32]=o("label",{class:"block text-sm font-medium mb-1"},"주민등록번호",-1)),h(o("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>_.value.residentNumber=e),type:"text",placeholder:"000000-0000000",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,_.value.residentNumber]])])]),o("div",null,[t[33]||(t[33]=o("label",{class:"block text-sm font-medium mb-1"},"소속",-1)),h(o("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>_.value.affiliation=e),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,_.value.affiliation]])]),o("div",null,[t[34]||(t[34]=o("label",{class:"block text-sm font-medium mb-1"},"초기 비밀번호 (선택)",-1)),h(o("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>_.value.password=e),type:"password",placeholder:"미입력 시 주민등록번호 앞 6자리 자동 설정",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,_.value.password]]),t[35]||(t[35]=o("p",{class:"text-xs text-gray-500 mt-1"},' * 주민등록번호가 없거나 비밀번호를 지정하지 않으면 기본 비밀번호 "123456"이 설정됩니다. ',-1))]),o("div",null,[t[38]||(t[38]=o("label",{class:"block text-sm font-medium mb-2"},"속성 정보",-1)),o("div",ea,[(s(!0),n(d,null,u(p.value,e=>(s(),n("div",{key:e.id,class:"space-y-2"},[o("label",ta,r(e.attributeKey),1),e.attributeValues?h((s(),n("select",{key:0,"onUpdate:modelValue":t=>_.value.templateAttributes[e.attributeKey]=t,class:"w-full px-3 py-2 border rounded-lg"},[t[36]||(t[36]=o("option",{value:""},"선택하세요",-1)),(s(!0),n(d,null,u(z(e.attributeValues),e=>(s(),n("option",{key:e,value:e},r(e),9,aa))),128))],8,la)),[[I,_.value.templateAttributes[e.attributeKey]]]):h((s(),n("input",{key:1,"onUpdate:modelValue":t=>_.value.templateAttributes[e.attributeKey]=t,type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:`${e.attributeKey} 입력`},null,8,sa)),[[x,_.value.templateAttributes[e.attributeKey]]])]))),128)),o("div",na,[t[37]||(t[37]=o("p",{class:"text-sm text-gray-600 mb-2"},"추가 속성 (수기 입력)",-1)),(s(!0),n(d,null,u(_.value.customAttributes,(e,t)=>(s(),n("div",{key:t,class:"flex flex-col sm:flex-row gap-2 mb-2"},[h(o("input",{"onUpdate:modelValue":t=>e.key=t,placeholder:"키 (예: 호차)",class:"flex-1 px-3 py-2 border rounded-lg"},null,8,oa),[[x,e.key]]),h(o("input",{"onUpdate:modelValue":t=>e.value=t,placeholder:"값",class:"flex-1 px-3 py-2 border rounded-lg"},null,8,ra),[[x,e.value]]),o("button",{onClick:e=>_.value.customAttributes.splice(t,1),class:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg whitespace-nowrap"},"삭제",8,ia)]))),128)),o("button",{onClick:t[12]||(t[12]=e=>_.value.customAttributes.push({key:"",value:""})),class:"w-full py-2 border-2 border-dashed rounded-lg text-sm text-gray-600 hover:bg-gray-50"}," + 속성 추가 ")])])]),o("div",null,[t[40]||(t[40]=o("label",{class:"block text-sm font-medium mb-2"},"일정 배정",-1)),0===m.value.length?(s(),n("div",da," 일정 템플릿이 없습니다. 먼저 일정 관리에서 템플릿을 생성하세요. ")):(s(),n("div",ua,[o("div",ca,[o("span",va,"선택: "+r(_.value.scheduleTemplateIds.length)+"개",1),o("button",{onClick:t[13]||(t[13]=e=>f.value=!0),class:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1"},[...t[39]||(t[39]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),i(" 다른 참석자 일정 복사 ",-1)])])]),o("div",ma,[(s(!0),n(d,null,u(m.value,e=>{var l;return s(),n("label",{key:e.id,class:"flex items-start gap-2 p-2 border rounded hover:bg-gray-50 cursor-pointer"},[h(o("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[14]||(t[14]=e=>_.value.scheduleTemplateIds=e),class:"rounded mt-1"},null,8,pa),[[$,_.value.scheduleTemplateIds]]),o("div",ga,[o("div",ha,r(e.courseName),1),e.description?(s(),n("div",xa,r(e.description),1)):c("",!0),o("div",ba,"일정 "+r((null==(l=e.scheduleItems)?void 0:l.length)||0)+"개",1)])])}),128))])]))])]),o("div",{class:"flex justify-end space-x-3 mt-6"},[o("button",{onClick:P,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"},"취소"),o("button",{onClick:O,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"},"저장")])])])])):c("",!0),y.value?(s(),n("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(H,["self"])},[o("div",ya,[o("div",fa,[o("div",wa,[o("h2",ka,r(null==(l=M.value)?void 0:l.guestName),1),o("button",{onClick:H,class:"text-gray-500 hover:text-gray-700"},[...t[41]||(t[41]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o("div",Ca,[o("div",null,[t[50]||(t[50]=o("h3",{class:"font-semibold mb-3"},"기본 정보",-1)),o("dl",Ma,[o("div",null,[t[42]||(t[42]=o("dt",{class:"text-gray-500 inline"},"전화번호:",-1)),t[43]||(t[43]=i()),o("dd",ja,r(null==(a=M.value)?void 0:a.telephone),1)]),o("div",null,[t[44]||(t[44]=o("dt",{class:"text-gray-500 inline"},"부서:",-1)),t[45]||(t[45]=i()),o("dd",$a,r((null==(C=M.value)?void 0:C.corpPart)||"-"),1)]),o("div",null,[t[46]||(t[46]=o("dt",{class:"text-gray-500 inline"},"주민번호:",-1)),t[47]||(t[47]=i()),o("dd",Ia,r((null==(B=M.value)?void 0:B.residentNumber)||"-"),1)]),o("div",null,[t[48]||(t[48]=o("dt",{class:"text-gray-500 inline"},"소속:",-1)),t[49]||(t[49]=i()),o("dd",Sa,r((null==(K=M.value)?void 0:K.affiliation)||"-"),1)])])]),(null==(E=M.value)?void 0:E.attributes)&&Object.keys(M.value.attributes).length>0?(s(),n("div",Ta,[t[51]||(t[51]=o("h3",{class:"font-semibold mb-3"},"속성 정보",-1)),o("dl",Va,[(s(!0),n(d,null,u(M.value.attributes,(e,t)=>(s(),n("div",{key:t},[o("dt",Da,r(t)+":",1),o("dd",_a,r(e),1)]))),128))])])):c("",!0)]),(null==(R=M.value)?void 0:R.schedules)&&M.value.schedules.length>0?(s(),n("div",Na,[t[52]||(t[52]=o("h3",{class:"font-semibold mb-3"},"배정된 일정",-1)),o("div",Aa,[(s(!0),n(d,null,u(M.value.schedules,e=>(s(),n("div",{key:e.scheduleTemplateId,class:"border rounded-lg overflow-hidden"},[o("div",Ba,[o("h4",za,r(e.courseName),1),e.description?(s(),n("p",Pa,r(e.description),1)):c("",!0)]),o("div",Ua,[o("div",Oa,[(s(!0),n(d,null,u(e.items,e=>(s(),n("div",{key:e.id,class:"flex gap-3 p-3 bg-gray-50 rounded-lg"},[o("div",Ha,[o("div",Fa,r(Y(e.scheduleDate)),1),o("div",La,r(e.startTime),1)]),o("div",qa,[o("p",Ya,r(e.title),1),e.location?(s(),n("p",Ka,"📍 "+r(e.location),1)):c("",!0),e.content?(s(),n("p",Ea,r(e.content),1)):c("",!0)])]))),128))])])]))),128))])])):(s(),n("div",Ra," 배정된 일정이 없습니다 "))])])])):c("",!0),f.value?(s(),n("div",{key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[17]||(t[17]=g(()=>{f.value=!1,S.value=""},["self"]))},[o("div",Wa,[o("div",Ga,[t[53]||(t[53]=o("h2",{class:"text-xl font-semibold mb-4"},"다른 참석자 일정 복사",-1)),o("div",Ja,[h(o("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>S.value=e),type:"text",placeholder:"참석자 이름 검색...",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,S.value]])]),o("div",Qa,[(s(!0),n(d,null,u(N.value,e=>(s(),n("div",{key:e.id,class:"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:t=>(e=>{0!==e.scheduleTemplates.length?(_.value.scheduleTemplateIds=e.scheduleTemplates.map(e=>e.scheduleTemplateId),f.value=!1,S.value="",alert(`${e.guestName}님의 일정 ${e.scheduleTemplates.length}개를 복사했습니다.`)):alert("이 참석자는 배정된 일정이 없습니다.")})(e)},[o("div",Xa,[o("div",null,[o("p",es,r(e.guestName),1),o("p",ts,r(e.telephone),1),e.scheduleTemplates.length>0?(s(),n("div",ls,[(s(!0),n(d,null,u(e.scheduleTemplates,e=>(s(),n("span",{key:e.scheduleTemplateId,class:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs"},r(e.courseName),1))),128))])):(s(),n("p",as,"배정된 일정 없음"))]),e.scheduleTemplates.length>0?(s(),n("button",ss," 복사 ")):c("",!0)])],8,Za))),128))]),o("div",ns,[o("button",{onClick:t[16]||(t[16]=e=>{f.value=!1,S.value=""}),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 ")])])])])):c("",!0),w.value?(s(),n("div",{key:6,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(L,["self"])},[o("div",os,[o("div",rs,[t[56]||(t[56]=o("h2",{class:"text-xl font-semibold mb-4"},"일정 일괄 배정",-1)),o("div",is,[o("p",ds,"선택된 참석자: "+r(T.value.length)+"명",1),o("div",us,[(s(!0),n(d,null,u(T.value.slice(0,5),e=>{var t;return s(),n("span",{key:e,class:"px-2 py-1 bg-white text-sm rounded"},r(null==(t=v.value.find(t=>t.id===e))?void 0:t.guestName),1)}),128)),T.value.length>5?(s(),n("span",cs," +"+r(T.value.length-5)+"명 ",1)):c("",!0)])]),o("div",vs,[t[54]||(t[54]=o("label",{class:"block text-sm font-medium mb-2"},"배정할 일정 선택",-1)),o("div",ms,[(s(!0),n(d,null,u(m.value,e=>{var l;return s(),n("label",{key:e.id,class:"flex items-start gap-2 p-3 border rounded hover:bg-gray-50 cursor-pointer"},[h(o("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[18]||(t[18]=e=>V.value=e),class:"rounded mt-1"},null,8,ps),[[$,V.value]]),o("div",gs,[o("div",hs,r(e.courseName),1),e.description?(s(),n("div",xs,r(e.description),1)):c("",!0),o("div",bs," 일정 "+r((null==(l=e.scheduleItems)?void 0:l.length)||0)+"개 • 참석자 "+r(e.guestCount||0)+"명 ",1)])])}),128))])]),o("div",ys,[o("label",fs,[h(o("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=e=>D.value=e),class:"rounded"},null,512),[[$,D.value]]),t[55]||(t[55]=o("span",{class:"text-sm text-gray-700"},"기존 일정을 대체 (체크 시 기존 일정 삭제 후 새 일정 배정)",-1))])]),o("div",ws,[o("button",{onClick:L,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:q,disabled:0===V.value.length,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed"},r(T.value.length)+"명에게 일정 배정 ",9,ks)])])])])):c("",!0)])}}},Ms={class:"flex justify-between items-center mb-6"},js={class:"space-y-4"},$s={class:"p-4 sm:p-6 border-b bg-gray-50 flex items-center justify-between"},Is={class:"flex-1"},Ss={class:"font-semibold text-lg"},Ts={class:"text-sm text-gray-600"},Vs={class:"text-xs text-gray-500 mt-1"},Ds={class:"flex gap-2"},_s=["onClick"],Ns=["onClick"],As=["onClick"],Bs={class:"p-4 sm:p-6"},zs={class:"space-y-3"},Ps={class:"flex-shrink-0 w-28 text-sm"},Us={class:"font-medium text-gray-600"},Os={class:"text-primary-600 font-semibold mt-0.5"},Hs={class:"flex-1 min-w-0"},Fs={class:"font-medium text-gray-900"},Ls={key:0,class:"text-sm text-gray-500 mt-1"},qs={key:1,class:"text-sm text-gray-600 mt-1 whitespace-pre-wrap"},Ys={class:"flex gap-1"},Ks=["onClick"],Es=["onClick"],Rs={class:"flex gap-2"},Ws=["onClick"],Gs=["onClick"],Js={key:0,class:"text-center py-12 text-gray-500 bg-white rounded-lg shadow"},Qs={class:"bg-white rounded-lg w-full max-w-md"},Zs={class:"p-6"},Xs={class:"text-xl font-semibold mb-4"},en={class:"space-y-4"},tn={class:"bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto"},ln={class:"p-6"},an={class:"text-xl font-semibold mb-4"},sn={class:"space-y-4"},nn={class:"grid grid-cols-2 gap-3"},on={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},rn={class:"p-6"},dn={class:"flex justify-between items-center mb-4"},un={class:"text-xl font-semibold"},cn={key:0,class:"text-center py-8 text-gray-500"},vn={key:1,class:"space-y-2"},mn={class:"flex justify-between items-start"},pn={class:"font-medium"},gn={class:"text-sm text-gray-600"},hn={key:0,class:"text-sm text-gray-500"},xn=["onClick"],bn={class:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto"},yn={class:"p-6"},fn={class:"flex justify-between items-center mb-4"},wn={class:"text-xl font-semibold"},kn={class:"space-y-4"},Cn={class:"p-4 bg-gray-50 border-b"},Mn={class:"flex justify-between items-center"},jn={class:"font-semibold"},$n={class:"text-sm text-gray-600"},In={class:"text-xs text-gray-500 mt-1"},Sn=["onClick"],Tn={class:"p-4"},Vn={class:"space-y-2"},Dn={class:"flex-shrink-0"},_n=["value"],Nn={class:"flex-shrink-0 w-24 text-sm"},An={class:"font-medium text-gray-600"},Bn={class:"text-primary-600"},zn={class:"flex-1"},Pn={class:"font-medium"},Un={key:0,class:"text-sm text-gray-500"},On={key:0,class:"sticky bottom-0 mt-4 p-4 bg-white border-t"},Hn={class:"flex justify-between items-center"},Fn={class:"text-sm font-medium"},Ln={class:"flex gap-2"},qn={__name:"ScheduleManagement",props:{conventionId:{type:Number,required:!0}},setup(e){const l=e,a=t([]),v=t(!1),m=t(!1),p=t(!1),b=t(!1),y=t(null),f=t(null),w=t(null),k=t(null),M=t(null),j=t([]),I=t([]),S=t([]),T=t({courseName:"",description:""}),V=t({scheduleDate:"",startTime:"",title:"",location:"",content:""}),D=e=>new Date(e).toLocaleDateString("ko-KR",{month:"numeric",day:"numeric"})+"일",_=async()=>{try{const e=await U.get(`/admin/conventions/${l.conventionId}/schedule-templates`);a.value=e.data,console.log("✅ Templates loaded:",e.data)}catch(e){console.error("❌ Failed to load templates:",e)}},N=()=>{v.value=!1,y.value=null,T.value={courseName:"",description:""}},A=async()=>{var e,t;try{if(!T.value.courseName.trim())return void alert("코스명을 입력해주세요.");y.value?await U.put(`/admin/schedule-templates/${y.value.id}`,T.value):await U.post(`/admin/conventions/${l.conventionId}/schedule-templates`,T.value),await _(),N()}catch(a){console.error("Failed to save template:",a),alert("템플릿 저장 실패: "+((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||a.message))}},B=()=>{m.value=!1,f.value=null,w.value=null},z=async()=>{var e,t;try{if(!V.value.scheduleDate||!V.value.startTime||!V.value.title)return void alert("날짜, 시간, 일정명은 필수입니다.");const e={...V.value,scheduleTemplateId:w.value.id};f.value?await U.put(`/admin/schedule-items/${f.value.id}`,e):await U.post("/admin/schedule-items",e),await _(),B()}catch(l){console.error("Failed to save schedule item:",l),alert("일정 항목 저장 실패: "+((null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.message)||l.message))}},P=async e=>{var t,l;k.value=e;try{const t=await U.get(`/admin/schedule-templates/${e.id}/guests`);j.value=t.data,p.value=!0}catch(a){console.error("Failed to load assigned guests:",a),alert("참석자 목록 로드 실패: "+((null==(l=null==(t=a.response)?void 0:t.data)?void 0:l.message)||a.message))}},O=()=>{p.value=!1,k.value=null,j.value=[]},H=()=>{b.value=!1,M.value=null,I.value=[],S.value=[]},F=async()=>{var e,t;if(0!==S.value.length)try{const e=[];I.value.forEach(t=>{t.scheduleItems.forEach(t=>{S.value.includes(t.id)&&e.push({scheduleDate:t.scheduleDate,startTime:t.startTime,title:t.title,location:t.location,content:t.content,scheduleTemplateId:M.value.id})})}),await U.post("/admin/schedule-items/bulk",{items:e}),await _(),H(),alert(`${e.length}개 일정 복사 완료`)}catch(l){console.error("Failed to copy items:",l),alert("일정 복사 실패: "+((null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.message)||l.message))}else alert("복사할 일정을 선택해주세요.")};return C(()=>{_()}),(e,t)=>{var l,C;return s(),n("div",null,[o("div",Ms,[t[10]||(t[10]=o("h2",{class:"text-xl font-semibold"},"일정 관리",-1)),o("button",{onClick:t[0]||(t[0]=e=>v.value=!0),class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," + 일정 코스 추가 ")]),o("div",js,[(s(!0),n(d,null,u(a.value,e=>{var l;return s(),n("div",{key:e.id,class:"bg-white rounded-lg shadow overflow-hidden"},[o("div",$s,[o("div",Is,[o("h3",Ss,r(e.courseName),1),o("p",Ts,r(e.description),1),o("p",Vs," 할당된 참석자: "+r(e.guestCount||0)+"명 | 일정 항목: "+r((null==(l=e.scheduleItems)?void 0:l.length)||0)+"개 ",1)]),o("div",Ds,[o("button",{onClick:t=>P(e),class:"px-3 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100"}," 참석자 보기 ",8,_s),o("button",{onClick:t=>(e=>{y.value=e,T.value={courseName:e.courseName,description:e.description}})(e),class:"px-3 py-1.5 text-sm bg-white border rounded hover:bg-gray-50"}," 수정 ",8,Ns),o("button",{onClick:t=>(async e=>{var t,l;if(confirm("템플릿을 삭제하면 모든 일정 항목도 함께 삭제됩니다. 계속하시겠습니까?"))try{await U.delete(`/admin/schedule-templates/${e}`),await _()}catch(a){console.error("Failed to delete template:",a),alert("템플릿 삭제 실패: "+((null==(l=null==(t=a.response)?void 0:t.data)?void 0:l.message)||a.message))}})(e.id),class:"px-3 py-1.5 text-sm bg-red-50 text-red-600 rounded hover:bg-red-100"}," 삭제 ",8,As)])]),o("div",Bs,[o("div",zs,[(s(!0),n(d,null,u(e.scheduleItems,l=>(s(),n("div",{key:l.id,class:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg"},[o("div",Ps,[o("div",Us,r(D(l.scheduleDate)),1),o("div",Os,r(l.startTime),1)]),o("div",Hs,[o("p",Fs,r(l.title),1),l.location?(s(),n("p",Ls,"📍 "+r(l.location),1)):c("",!0),l.content?(s(),n("p",qs,r(l.content),1)):c("",!0)]),o("div",Ys,[o("button",{onClick:t=>((e,t)=>{var l;w.value=e,f.value=t,V.value={scheduleDate:(null==(l=t.scheduleDate)?void 0:l.split("T")[0])||"",startTime:t.startTime,title:t.title,location:t.location||"",content:t.content||""},m.value=!0})(e,l),class:"p-1.5 hover:bg-gray-200 rounded",title:"수정"},[...t[11]||(t[11]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2-5a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Ks),o("button",{onClick:e=>(async e=>{var t,l;if(confirm("이 일정을 삭제하시겠습니까?"))try{await U.delete(`/admin/schedule-items/${e}`),await _()}catch(a){console.error("Failed to delete schedule item:",a),alert("일정 항목 삭제 실패: "+((null==(l=null==(t=a.response)?void 0:t.data)?void 0:l.message)||a.message))}})(l.id),class:"p-1.5 hover:bg-red-100 text-red-600 rounded",title:"삭제"},[...t[12]||(t[12]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Es)])]))),128)),o("div",Rs,[o("button",{onClick:t=>(e=>{w.value=e,f.value=null,V.value={scheduleDate:"",startTime:"",title:"",location:"",content:""},m.value=!0})(e),class:"flex-1 py-2 text-sm text-primary-600 border-2 border-dashed border-primary-300 rounded-lg hover:bg-primary-50"}," + 수기 등록 ",8,Ws),o("button",{onClick:t=>(e=>{M.value=e,I.value=a.value.filter(t=>t.id!==e.id),S.value=[],b.value=!0})(e),class:"flex-1 py-2 text-sm text-green-600 border-2 border-dashed border-green-300 rounded-lg hover:bg-green-50 flex items-center justify-center gap-1"},[...t[13]||(t[13]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),i(" 기존 일정 복사 ",-1)])],8,Gs)])])])])}),128)),0===a.value.length?(s(),n("div",Js," 등록된 일정 코스가 없습니다. 일정 코스를 추가해주세요. ")):c("",!0)]),v.value||y.value?(s(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(N,["self"])},[o("div",Qs,[o("div",Zs,[o("h2",Xs,r(y.value?"일정 코스 수정":"일정 코스 추가"),1),o("div",en,[o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium mb-1"},"코스명 *",-1)),h(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>T.value.courseName=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 11월 3일 A조"},null,512),[[x,T.value.courseName]])]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium mb-1"},"설명",-1)),h(o("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>T.value.description=e),class:"w-full px-3 py-2 border rounded-lg",rows:"2",placeholder:"이 일정 코스에 대한 설명"},null,512),[[x,T.value.description]])])]),o("div",{class:"flex justify-end space-x-3 mt-6"},[o("button",{onClick:N,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:A,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 저장 ")])])])])):c("",!0),m.value?(s(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(B,["self"])},[o("div",tn,[o("div",ln,[o("h2",an,r(f.value?"일정 수정":"일정 추가"),1),o("div",sn,[o("div",nn,[o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium mb-1"},"날짜 *",-1)),h(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>V.value.scheduleDate=e),type:"date",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,V.value.scheduleDate]])]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium mb-1"},"시작 시간 *",-1)),h(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>V.value.startTime=e),type:"time",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[x,V.value.startTime]])])]),o("div",null,[t[18]||(t[18]=o("label",{class:"block text-sm font-medium mb-1"},"일정명 *",-1)),h(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>V.value.title=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 객실에 집결"},null,512),[[x,V.value.title]])]),o("div",null,[t[19]||(t[19]=o("label",{class:"block text-sm font-medium mb-1"},"장소",-1)),h(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>V.value.location=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 호텔 로비"},null,512),[[x,V.value.location]])]),o("div",null,[t[20]||(t[20]=o("label",{class:"block text-sm font-medium mb-1"},"상세 내용",-1)),h(o("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>V.value.content=e),class:"w-full px-3 py-2 border rounded-lg",rows:"5",placeholder:"일정에 대한 상세 설명을 입력하세요"},null,512),[[x,V.value.content]])])]),o("div",{class:"flex justify-end space-x-3 mt-6"},[o("button",{onClick:B,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 저장 ")])])])])):c("",!0),p.value?(s(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(O,["self"])},[o("div",on,[o("div",rn,[o("div",dn,[o("h2",un,r(null==(l=k.value)?void 0:l.courseName)+" - 할당된 참석자 ",1),o("button",{onClick:O,class:"p-2 hover:bg-gray-100 rounded"},[...t[21]||(t[21]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),0===j.value.length?(s(),n("div",cn," 이 일정에 할당된 참석자가 없습니다. ")):(s(),n("div",vn,[(s(!0),n(d,null,u(j.value,e=>(s(),n("div",{key:e.id,class:"p-4 border rounded-lg hover:bg-gray-50"},[o("div",mn,[o("div",null,[o("p",pn,r(e.guestName),1),o("p",gn,r(e.telephone),1),e.corpPart?(s(),n("p",hn,r(e.corpPart),1)):c("",!0)]),o("button",{onClick:t=>(async e=>{var t,l;if(confirm("이 참석자를 일정에서 제거하시겠습니까?"))try{await U.delete(`/admin/guests/${e}/schedules/${k.value.id}`),await P(k.value),await _()}catch(a){console.error("Failed to remove guest from schedule:",a),alert("참석자 제거 실패: "+((null==(l=null==(t=a.response)?void 0:t.data)?void 0:l.message)||a.message))}})(e.id),class:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded"}," 제거 ",8,xn)])]))),128))]))])])])):c("",!0),b.value?(s(),n("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(H,["self"])},[o("div",bn,[o("div",yn,[o("div",fn,[o("h2",wn,r(null==(C=M.value)?void 0:C.courseName)+" - 기존 일정 복사 ",1),o("button",{onClick:H,class:"p-2 hover:bg-gray-100 rounded"},[...t[22]||(t[22]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t[23]||(t[23]=o("div",{class:"mb-4 p-4 bg-blue-50 rounded-lg"},[o("p",{class:"text-sm text-blue-900"},"다른 템플릿의 일정을 선택하면 현재 템플릿에 복사됩니다."),o("p",{class:"text-xs text-blue-700 mt-1"},"복사 후 개별적으로 수정할 수 있습니다.")],-1)),o("div",kn,[(s(!0),n(d,null,u(I.value,e=>(s(),n("div",{key:e.id,class:"border rounded-lg overflow-hidden"},[o("div",Cn,[o("div",Mn,[o("div",null,[o("h3",jn,r(e.courseName),1),o("p",$n,r(e.description),1),o("p",In,"일정 "+r(e.scheduleItems.length)+"개",1)]),o("button",{onClick:t=>(async e=>{var t,l;if(confirm(`${e.courseName}의 모든 일정(${e.scheduleItems.length}개)을 복사하시겠습니까?`))try{const t=e.scheduleItems.map(e=>({scheduleDate:e.scheduleDate,startTime:e.startTime,title:e.title,location:e.location,content:e.content,scheduleTemplateId:M.value.id}));await U.post("/admin/schedule-items/bulk",{items:t}),await _(),H(),alert("일정 복사 완료")}catch(a){console.error("Failed to copy items:",a),alert("일정 복사 실패: "+((null==(l=null==(t=a.response)?void 0:t.data)?void 0:l.message)||a.message))}})(e),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," 전체 복사 ",8,Sn)])]),o("div",Tn,[o("div",Vn,[(s(!0),n(d,null,u(e.scheduleItems,e=>(s(),n("div",{key:e.id,class:"flex items-start gap-3 p-3 bg-white border rounded-lg hover:bg-gray-50"},[o("div",Dn,[h(o("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[8]||(t[8]=e=>S.value=e),class:"rounded mt-1"},null,8,_n),[[$,S.value]])]),o("div",Nn,[o("div",An,r(D(e.scheduleDate)),1),o("div",Bn,r(e.startTime),1)]),o("div",zn,[o("p",Pn,r(e.title),1),e.location?(s(),n("p",Un,"📍 "+r(e.location),1)):c("",!0)])]))),128))])])]))),128))]),S.value.length>0?(s(),n("div",On,[o("div",Hn,[o("span",Fn,"선택: "+r(S.value.length)+"개 일정",1),o("div",Ln,[o("button",{onClick:t[9]||(t[9]=e=>S.value=[]),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 선택 취소 "),o("button",{onClick:F,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 선택한 일정 복사 ")])])])):c("",!0)])])])):c("",!0)])}}},Yn={class:"bg-white rounded-lg shadow p-6"},Kn={class:"mb-4"},En=["disabled"],Rn={key:0,class:"mt-4"},Wn={key:0,class:"mt-2 text-sm text-green-700 space-y-1"},Gn={key:1,class:"mt-2 text-sm text-red-700"},Jn={__name:"BulkUpload",props:{conventionId:{type:Number,required:!0}},setup(e){const l=e,a=t(null),i=t(!1),v=t(null),g=e=>{a.value=e.target.files[0],v.value=null},h=async()=>{var e,t;if(!a.value)return;i.value=!0,v.value=null;const s=new FormData;s.append("file",a.value);try{const e=await U.post(`/scheduleupload/conventions/${l.conventionId}/upload`,s,{headers:{"Content-Type":"multipart/form-data"}});v.value={success:!0,message:e.data.message,totalSchedules:e.data.totalSchedules,guestsCreated:e.data.guestsCreated,scheduleAssignments:e.data.scheduleAssignments,errors:e.data.errors}}catch(n){v.value={success:!1,message:"업로드 실패",errors:[(null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||n.message]}}finally{i.value=!1}};return(e,t)=>(s(),n("div",Yn,[t[1]||(t[1]=o("h2",{class:"text-xl font-semibold mb-4"},"엑셀 일괄 업로드",-1)),o("div",Kn,[t[0]||(t[0]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 엑셀 파일 선택 ",-1)),o("input",{type:"file",onChange:g,accept:".xlsx",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"},null,32)]),t[2]||(t[2]=m('<div class="mb-4 p-4 bg-blue-50 rounded-md"><h3 class="font-medium text-blue-900 mb-2">📋 엑셀 형식</h3><div class="text-sm text-blue-700 space-y-1"><p><strong>Sheet1:</strong> 참석자 정보 및 일정표</p><p class="ml-4">A열: 구분 (STAFF 등)</p><p class="ml-4">B열: 부서</p><p class="ml-4">C열: 성명</p><p class="ml-4">D열: HR ID</p><p class="ml-4">E열: 전화번호</p><p class="ml-4">F열~: 일정 헤더 (11/03(월) [1호차] 객실에 집결 ~ 07:30)</p><p class="ml-4 mt-1">데이터: &quot;O&quot; 표시 또는 추가 메모</p><p class="mt-2"><strong>Sheet2:</strong> 일정 상세 설명</p><p class="ml-4">A열: 일정명</p><p class="ml-4">B열: 상세 내용</p></div></div>',1)),o("button",{onClick:h,disabled:!a.value||i.value,class:"w-full px-6 py-3 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed mb-4"},r(i.value?"업로드 중...":"업로드"),9,En),v.value?(s(),n("div",Rn,[o("div",{class:p(["p-4 rounded-md",v.value.success?"bg-green-50":"bg-red-50"])},[o("p",{class:p(["font-medium",v.value.success?"text-green-800":"text-red-800"])},r(v.value.message),3),v.value.success?(s(),n("div",Wn,[o("p",null,"✓ 일정 템플릿: "+r(v.value.totalSchedules)+"개",1),o("p",null,"✓ 참석자 생성: "+r(v.value.guestsCreated)+"명",1),o("p",null,"✓ 일정 배정: "+r(v.value.scheduleAssignments)+"건",1)])):c("",!0),v.value.errors&&v.value.errors.length?(s(),n("ul",Gn,[(s(!0),n(d,null,u(v.value.errors,(e,t)=>(s(),n("li",{key:t},"• "+r(e),1))),128))])):c("",!0)],2)])):c("",!0),t[3]||(t[3]=o("div",{class:"mt-6 pt-6 border-t"},[o("h3",{class:"font-semibold mb-3"},"샘플 파일"),o("p",{class:"text-sm text-gray-600 mb-3"}," 샘플 엑셀 파일을 다운로드하여 형식을 확인하세요. "),o("a",{href:"/Sample/업로드_샘플.xlsx",download:"",class:"inline-block px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"}," 📥 샘플 다운로드 ")],-1))]))}},Qn={class:"flex justify-between items-center mb-6"},Zn={class:"bg-white rounded-lg shadow"},Xn={key:0,class:"text-center py-12 text-gray-500"},eo={key:1,class:"divide-y"},to={class:"flex-1"},lo={class:"font-semibold text-lg"},ao={key:0,class:"mt-2 flex flex-wrap gap-2"},so={key:1,class:"text-sm text-gray-500 mt-1"},no={class:"flex gap-2"},oo=["onClick"],ro=["onClick"],io={class:"bg-white rounded-lg w-full max-w-lg"},uo={class:"p-6"},co={class:"text-xl font-semibold mb-4"},vo={class:"space-y-4"},mo={__name:"AttributeTemplateManagement",props:{conventionId:{type:Number,required:!0}},setup(e){const l=e,a=t([]),i=t(!1),v=t(null),m=t({attributeKey:"",attributeValuesText:""}),p=e=>{if(!e)return[];try{return JSON.parse(e)}catch{return[]}},b=async()=>{try{const e=await U.get(`/attributetemplate/conventions/${l.conventionId}`);a.value=e.data}catch(e){console.error("Failed to load attribute templates:",e)}},y=()=>{i.value=!1,v.value=null,m.value={attributeKey:"",attributeValuesText:""}},f=async()=>{var e,t;try{if(!m.value.attributeKey.trim())return void alert("속성명을 입력해주세요.");let e=null;if(m.value.attributeValuesText.trim()){const t=m.value.attributeValuesText.split(",").map(e=>e.trim()).filter(e=>e);e=JSON.stringify(t)}const t={attributeKey:m.value.attributeKey.trim(),attributeValues:e,orderNum:a.value.length};v.value?await U.put(`/attributetemplate/${v.value.id}`,t):await U.post(`/attributetemplate/conventions/${l.conventionId}`,t),await b(),y()}catch(s){console.error("Failed to save template:",s),alert("저장 실패: "+((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||s.message))}};return C(()=>{b()}),(e,t)=>(s(),n("div",null,[o("div",Qn,[t[3]||(t[3]=o("h2",{class:"text-xl font-semibold"},"속성 템플릿 관리",-1)),o("button",{onClick:t[0]||(t[0]=e=>i.value=!0),class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," + 속성 템플릿 추가 ")]),o("div",Zn,[0===a.value.length?(s(),n("div",Xn," 등록된 속성 템플릿이 없습니다. ")):(s(),n("div",eo,[(s(!0),n(d,null,u(a.value,e=>(s(),n("div",{key:e.id,class:"p-4 hover:bg-gray-50 flex items-center justify-between"},[o("div",to,[o("h3",lo,r(e.attributeKey),1),e.attributeValues?(s(),n("div",ao,[(s(!0),n(d,null,u(p(e.attributeValues),(e,t)=>(s(),n("span",{key:t,class:"px-2 py-1 bg-gray-100 text-sm rounded"},r(e),1))),128))])):(s(),n("p",so,"선택 값 없음 (수기 입력)"))]),o("div",no,[o("button",{onClick:t=>(e=>{v.value=e,m.value={attributeKey:e.attributeKey,attributeValuesText:e.attributeValues?p(e.attributeValues).join(", "):""}})(e),class:"px-3 py-1.5 text-sm bg-white border rounded hover:bg-gray-50"}," 수정 ",8,oo),o("button",{onClick:t=>(async e=>{if(confirm("이 속성 템플릿을 삭제하시겠습니까?"))try{await U.delete(`/attributetemplate/${e}`),await b()}catch(t){console.error("Failed to delete template:",t),alert("삭제 실패")}})(e.id),class:"px-3 py-1.5 text-sm bg-red-50 text-red-600 rounded hover:bg-red-100"}," 삭제 ",8,ro)])]))),128))]))]),i.value||v.value?(s(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:g(y,["self"])},[o("div",io,[o("div",uo,[o("h2",co,r(v.value?"속성 템플릿 수정":"속성 템플릿 추가"),1),o("div",vo,[o("div",null,[t[4]||(t[4]=o("label",{class:"block text-sm font-medium mb-1"},"속성명 *",-1)),h(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.value.attributeKey=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 티셔츠 사이즈, 호차, 방 번호"},null,512),[[x,m.value.attributeKey]])]),o("div",null,[t[5]||(t[5]=o("label",{class:"block text-sm font-medium mb-2"},"선택 값 (쉼표로 구분)",-1)),h(o("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>m.value.attributeValuesText=e),class:"w-full px-3 py-2 border rounded-lg",rows:"4",placeholder:"예: 95, 100, 105, 110, 115\n비워두면 참석자 등록 시 수기 입력"},null,512),[[x,m.value.attributeValuesText]]),t[6]||(t[6]=o("p",{class:"text-xs text-gray-500 mt-1"}," 쉼표(,)로 구분하여 입력하세요. 빈 값으로 두면 참석자가 직접 입력합니다. ",-1))])]),o("div",{class:"flex justify-end space-x-3 mt-6"},[o("button",{onClick:y,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:f,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 저장 ")])])])])):c("",!0)]))}},po={class:"min-h-screen bg-gray-50"},go={class:"bg-white shadow-sm sticky top-0 z-40"},ho={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xo={class:"flex justify-between items-center h-16"},bo={class:"flex items-center gap-2"},yo={key:0,class:"ml-4 text-sm text-gray-500"},fo={class:"flex items-center space-x-4"},wo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ko={class:"mb-6 overflow-x-auto"},Co={class:"flex space-x-1 sm:space-x-4 border-b min-w-max"},Mo=["onClick"],jo={class:"hidden sm:inline"},$o={class:"sm:hidden"},Io={key:0},So={key:1},To={key:2},Vo={key:3},Do={key:4},_o={__name:"AdminDashboard",setup(e){const l=a(),i=S(),v=Y(),m=t(parseInt(i.params.id)),g=t(null),h=t("dashboard"),x=t(!1),f=e=>{h.value="guests"},w=async()=>{confirm("로그아웃하시겠습니까?")&&(await v.logout(),l.push("/login"))},k=[{id:"dashboard",name:"대시보드",shortName:"대시보드"},{id:"guests",name:"참석자 관리",shortName:"참석자"},{id:"schedules",name:"일정 관리",shortName:"일정"},{id:"attributes",name:"속성 템플릿",shortName:"속성"},{id:"upload",name:"엑셀 업로드",shortName:"업로드"}];return C(async()=>{try{const e=await z.get(`/api/conventions/${m.value}`);g.value=e.data}catch(e){console.error("Failed to load convention:",e),alert("행사 정보를 불러오는데 실패했습니다."),l.push("/admin")}}),(e,t)=>(s(),n("div",po,[o("header",go,[o("div",ho,[o("div",xo,[o("div",bo,[o("button",{onClick:t[0]||(t[0]=e=>b(l).push("/admin")),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"행사 목록으로"},[...t[2]||(t[2]=[o("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),t[3]||(t[3]=o("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"행사 관리",-1)),g.value?(s(),n("span",yo,r(g.value.title),1)):c("",!0)]),o("div",fo,[o("button",{onClick:w,class:"flex items-center space-x-2 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},[...t[4]||(t[4]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",{class:"hidden sm:inline"},"로그아웃",-1)])]),o("button",{onClick:t[1]||(t[1]=e=>x.value=!x.value),class:"sm:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100"},[...t[5]||(t[5]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])])])])]),o("div",wo,[o("div",ko,[o("nav",Co,[(s(),n(d,null,u(k,e=>o("button",{key:e.id,onClick:t=>h.value=e.id,class:p(["pb-3 px-3 sm:px-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors",h.value===e.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[o("span",jo,r(e.name),1),o("span",$o,r(e.shortName||e.name),1)],10,Mo)),64))])]),"dashboard"===h.value?(s(),n("div",Io,[y(wl,{"convention-id":m.value,onShowGuest:f},null,8,["convention-id"])])):c("",!0),"guests"===h.value?(s(),n("div",So,[y(Cs,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0),"schedules"===h.value?(s(),n("div",To,[y(qn,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0),"attributes"===h.value?(s(),n("div",Vo,[y(mo,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0),"upload"===h.value?(s(),n("div",Do,[y(Jn,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0)])]))}},No={class:"min-h-screen bg-gray-50"},Ao={__name:"MySchedule",setup:e=>(e,t)=>(s(),n("div",No,[...t[0]||(t[0]=[o("div",{class:"px-4 py-6"},[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"나의 일정"),o("p",{class:"text-gray-600"},"일정 페이지 구현 예정")],-1)])]))},Bo={class:"px-4 py-6"},zo={__name:"LocationInfo",setup:e=>(e,t)=>(s(),n("div",Bo,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"로마 정보",-1),o("p",{class:"text-gray-600"},"로마 여행 정보 페이지 (구현 예정)",-1)])]))},Po={class:"px-4 py-6"},Uo={__name:"Schedule",setup:e=>(e,t)=>(s(),n("div",Po,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"전체 일정",-1),o("p",{class:"text-gray-600"},"전체 일정 페이지 (구현 예정)",-1)])]))},Oo={class:"px-4 py-6"},Ho={__name:"Participants",setup:e=>(e,t)=>(s(),n("div",Oo,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"참가자",-1),o("p",{class:"text-gray-600"},"참가자 목록 페이지 (구현 예정)",-1)])]))},Fo={class:"px-4 py-6"},Lo={__name:"HotSpot",setup:e=>(e,t)=>(s(),n("div",Fo,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"핫스팟",-1),o("p",{class:"text-gray-600"},"추천 관광지 페이지 (구현 예정)",-1)])]))},qo={class:"px-4 py-6"},Yo={__name:"TasteSpot",setup:e=>(e,t)=>(s(),n("div",qo,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"맛스팟",-1),o("p",{class:"text-gray-600"},"추천 맛집 페이지 (구현 예정)",-1)])]))},Ko={class:"px-4 py-6"},Eo={__name:"GroupSchedule",setup:e=>(e,t)=>(s(),n("div",Ko,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"그룹 일정",-1),o("p",{class:"text-gray-600"},"그룹별 일정 페이지 (구현 예정)",-1)])]))},Ro={class:"px-4 py-6"},Wo={__name:"EventPlace",setup:e=>(e,t)=>(s(),n("div",Ro,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"사진첩",-1),o("p",{class:"text-gray-600"},"행사 사진 갤러리 페이지 (구현 예정)",-1)])]))},Go={class:"min-h-screen bg-gray-50"},Jo={__name:"Board",setup:e=>(e,t)=>(s(),n("div",Go,[...t[0]||(t[0]=[o("div",{class:"px-4 py-6"},[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"게시판"),o("p",{class:"text-gray-600"},"게시판 페이지 구현 예정")],-1)])]))},Qo={class:"min-h-screen bg-gray-50"},Zo={__name:"Chat",setup:e=>(e,t)=>(s(),n("div",Qo,[...t[0]||(t[0]=[o("div",{class:"px-4 py-6"},[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"채팅"),o("p",{class:"text-gray-600"},"채팅 페이지 구현 예정")],-1)])]))},Xo={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-8"},er={class:"max-w-md w-full"},tr={class:"bg-white rounded-2xl shadow-xl p-8"},lr={key:0},ar={class:"space-y-4"},sr=["disabled"],nr={key:1},or={class:"mb-6 p-4 bg-blue-50 rounded-lg"},rr={class:"text-sm text-blue-900"},ir={class:"space-y-4"},dr={class:"flex gap-3 mt-6"},ur=["disabled"],cr={key:2},vr={class:"p-4 bg-gray-50 rounded-lg mb-6"},mr={class:"text-lg font-bold text-gray-900 break-all"},pr={class:"text-xs text-gray-500 mt-2"},gr={class:"space-y-3"},hr={key:3,class:"mt-4 p-4 bg-red-50 rounded-lg"},xr={class:"text-sm text-red-800"},br={class:"mt-6 text-center space-y-2"},yr={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-8"},fr={class:"max-w-md w-full"},wr={class:"bg-white rounded-2xl shadow-xl p-8"},kr={key:0},Cr={class:"space-y-4"},Mr=["disabled"],jr={key:1},$r={class:"mb-6 p-4 bg-blue-50 rounded-lg"},Ir={class:"text-sm text-blue-900"},Sr={class:"space-y-4"},Tr={key:0,class:"mt-2 text-sm text-red-600"},Vr={class:"flex gap-3 mt-6"},Dr=["disabled"],_r={key:2},Nr={key:3,class:"mt-4 p-4 bg-red-50 rounded-lg"},Ar={class:"text-sm text-red-800"},Br={class:"mt-6 text-center space-y-2"},zr=[{path:"/setup",name:"Setup",component:et,meta:{title:"초기 설정",requiresAuth:!1}},{path:"/login",name:"Login",component:Oe,meta:{title:"로그인",requiresAuth:!1}},{path:"/find-id",name:"FindId",component:{__name:"FindId",setup(e){a();const l=t(1),d=t(!1),u=t(""),p=t(""),g=t(""),b=t({name:"",phoneNumber:"",code:""}),w=async()=>{var e,t;d.value=!0,u.value="";try{await U.post("/accountrecovery/find-id/send-code",{name:b.value.name,phoneNumber:b.value.phoneNumber}),l.value=2}catch(a){u.value=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"인증번호 발송에 실패했습니다."}finally{d.value=!1}},k=async()=>{var e,t;d.value=!0,u.value="";try{const e=await U.post("/accountrecovery/find-id/verify",{name:b.value.name,phoneNumber:b.value.phoneNumber,code:b.value.code});p.value=e.data.loginId,g.value=e.data.createdAt,l.value=3}catch(a){u.value=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"인증번호 확인에 실패했습니다."}finally{d.value=!1}};return(e,t)=>{const a=v("router-link");return s(),n("div",Xo,[o("div",er,[t[16]||(t[16]=o("div",{class:"text-center mb-8"},[o("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"아이디 찾기"),o("p",{class:"text-gray-600"},"가입 시 입력한 이름과 전화번호를 입력해주세요")],-1)),o("div",tr,[1===l.value?(s(),n("div",lr,[o("div",ar,[o("div",null,[t[6]||(t[6]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"이름",-1)),h(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.value.name=e),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"홍길동"},null,512),[[x,b.value.name]])]),o("div",null,[t[7]||(t[7]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"전화번호",-1)),h(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>b.value.phoneNumber=e),type:"tel",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"01012345678",maxlength:"11"},null,512),[[x,b.value.phoneNumber]])])]),o("button",{onClick:w,disabled:d.value||!b.value.name||!b.value.phoneNumber,class:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium transition-colors"},r(d.value?"전송 중...":"인증번호 발송"),9,sr)])):c("",!0),2===l.value?(s(),n("div",nr,[o("div",or,[o("p",rr,[o("strong",null,r(b.value.phoneNumber),1),t[8]||(t[8]=i("로 인증번호를 발송했습니다. ",-1))]),t[9]||(t[9]=o("p",{class:"text-xs text-blue-700 mt-1"},"5분 내에 입력해주세요.",-1))]),o("div",ir,[o("div",null,[t[10]||(t[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"인증번호",-1)),h(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>b.value.code=e),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest",placeholder:"000000",maxlength:"6"},null,512),[[x,b.value.code]])])]),o("div",dr,[o("button",{onClick:t[3]||(t[3]=e=>l.value=1),class:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors"}," 이전 "),o("button",{onClick:k,disabled:d.value||6!==b.value.code.length,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium transition-colors"},r(d.value?"확인 중...":"확인"),9,ur)])])):c("",!0),3===l.value?(s(),n("div",cr,[t[12]||(t[12]=m('<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl font-bold text-gray-900 mb-2">아이디를 찾았습니다</h3></div>',1)),o("div",vr,[t[11]||(t[11]=o("div",{class:"text-sm text-gray-600 mb-1"},"회원님의 아이디",-1)),o("div",mr,r(p.value),1),o("div",pr,"가입일: "+r((C=g.value,new Date(C).toLocaleDateString("ko-KR"))),1)]),o("div",gr,[o("button",{onClick:t[4]||(t[4]=t=>e.$router.push("/login")),class:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors"}," 로그인하기 "),o("button",{onClick:t[5]||(t[5]=t=>e.$router.push("/find-password")),class:"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors"}," 비밀번호 찾기 ")])])):c("",!0),u.value?(s(),n("div",hr,[o("p",xr,r(u.value),1)])):c("",!0)]),o("div",br,[y(a,{to:"/login",class:"text-sm text-gray-600 hover:text-gray-900"},{default:f(()=>[...t[13]||(t[13]=[i(" 로그인으로 돌아가기 ",-1)])]),_:1}),t[15]||(t[15]=o("span",{class:"text-gray-400 mx-2"},"|",-1)),y(a,{to:"/find-password",class:"text-sm text-gray-600 hover:text-gray-900"},{default:f(()=>[...t[14]||(t[14]=[i(" 비밀번호 찾기 ",-1)])]),_:1})])])]);var C}}},meta:{title:"아이디 찾기",requiresAuth:!1}},{path:"/find-password",name:"FindPassword",component:{__name:"FindPassword",setup(e){a();const l=t(1),d=t(!1),u=t(""),p=t({loginId:"",name:"",phoneNumber:"",code:"",newPassword:"",confirmPassword:""}),g=async()=>{var e,t;d.value=!0,u.value="";try{await U.post("/accountrecovery/reset-password/send-code",{loginId:p.value.loginId,name:p.value.name,phoneNumber:p.value.phoneNumber}),l.value=2}catch(a){u.value=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"인증번호 발송에 실패했습니다."}finally{d.value=!1}},b=async()=>{var e,t;if(p.value.newPassword.length<6)u.value="비밀번호는 최소 6자 이상이어야 합니다.";else if(p.value.newPassword===p.value.confirmPassword){d.value=!0,u.value="";try{await U.post("/accountrecovery/reset-password/verify",{loginId:p.value.loginId,name:p.value.name,phoneNumber:p.value.phoneNumber,code:p.value.code,newPassword:p.value.newPassword}),l.value=3}catch(a){u.value=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"비밀번호 재설정에 실패했습니다."}finally{d.value=!1}}else u.value="비밀번호가 일치하지 않습니다."};return(e,t)=>{const a=v("router-link");return s(),n("div",yr,[o("div",fr,[t[20]||(t[20]=o("div",{class:"text-center mb-8"},[o("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"비밀번호 찾기"),o("p",{class:"text-gray-600"},"아이디와 가입 정보를 입력해주세요")],-1)),o("div",wr,[1===l.value?(s(),n("div",kr,[o("div",Cr,[o("div",null,[t[8]||(t[8]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"아이디",-1)),h(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.value.loginId=e),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"아이디를 입력하세요"},null,512),[[x,p.value.loginId]])]),o("div",null,[t[9]||(t[9]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"이름",-1)),h(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>p.value.name=e),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"홍길동"},null,512),[[x,p.value.name]])]),o("div",null,[t[10]||(t[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"전화번호",-1)),h(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>p.value.phoneNumber=e),type:"tel",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"01012345678",maxlength:"11"},null,512),[[x,p.value.phoneNumber]])])]),o("button",{onClick:g,disabled:d.value||!p.value.loginId||!p.value.name||!p.value.phoneNumber,class:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium transition-colors"},r(d.value?"전송 중...":"인증번호 발송"),9,Mr)])):c("",!0),2===l.value?(s(),n("div",jr,[o("div",$r,[o("p",Ir,[o("strong",null,r(p.value.phoneNumber),1),t[11]||(t[11]=i("로 인증번호를 발송했습니다. ",-1))]),t[12]||(t[12]=o("p",{class:"text-xs text-blue-700 mt-1"},"5분 내에 입력해주세요.",-1))]),o("div",Sr,[o("div",null,[t[13]||(t[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"인증번호",-1)),h(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>p.value.code=e),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest",placeholder:"000000",maxlength:"6"},null,512),[[x,p.value.code]])]),o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"새 비밀번호",-1)),h(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>p.value.newPassword=e),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"최소 6자 이상"},null,512),[[x,p.value.newPassword]])]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"새 비밀번호 확인",-1)),h(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>p.value.confirmPassword=e),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"비밀번호 재입력"},null,512),[[x,p.value.confirmPassword]])])]),p.value.newPassword&&p.value.confirmPassword&&p.value.newPassword!==p.value.confirmPassword?(s(),n("div",Tr," 비밀번호가 일치하지 않습니다. ")):c("",!0),o("div",Vr,[o("button",{onClick:t[6]||(t[6]=e=>l.value=1),class:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors"}," 이전 "),o("button",{onClick:b,disabled:d.value||6!==p.value.code.length||!p.value.newPassword||p.value.newPassword!==p.value.confirmPassword,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium transition-colors"},r(d.value?"처리 중...":"비밀번호 재설정"),9,Dr)])])):c("",!0),3===l.value?(s(),n("div",_r,[t[16]||(t[16]=m('<div class="text-center mb-6"><div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h3 class="text-xl font-bold text-gray-900 mb-2">비밀번호가 재설정되었습니다</h3><p class="text-gray-600">새로운 비밀번호로 로그인해주세요.</p></div>',1)),o("button",{onClick:t[7]||(t[7]=t=>e.$router.push("/login")),class:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors"}," 로그인하기 ")])):c("",!0),u.value?(s(),n("div",Nr,[o("p",Ar,r(u.value),1)])):c("",!0)]),o("div",Br,[y(a,{to:"/login",class:"text-sm text-gray-600 hover:text-gray-900"},{default:f(()=>[...t[17]||(t[17]=[i(" 로그인으로 돌아가기 ",-1)])]),_:1}),t[19]||(t[19]=o("span",{class:"text-gray-400 mx-2"},"|",-1)),y(a,{to:"/find-id",class:"text-sm text-gray-600 hover:text-gray-900"},{default:f(()=>[...t[18]||(t[18]=[i(" 아이디 찾기 ",-1)])]),_:1})])])])}}},meta:{title:"비밀번호 찾기",requiresAuth:!1}},{path:"/",name:"Home",component:Te,meta:{title:"행사 홈",requiresAuth:!0}},{path:"/admin",name:"Admin",component:Bt,meta:{title:"행사 관리",requiresAuth:!1,requiresAdmin:!1}},{path:"/admin/conventions/:id",name:"AdminDashboard",component:_o,meta:{title:"행사 대시보드",requiresAuth:!1,requiresAdmin:!1}},{path:"/my-schedule",name:"MySchedule",component:Ao,meta:{title:"나의일정"}},{path:"/location",name:"LocationInfo",component:zo,meta:{title:"로마 정보"}},{path:"/schedule",name:"Schedule",component:Uo,meta:{title:"일정"}},{path:"/participants",name:"Participants",component:Ho,meta:{title:"주체국"}},{path:"/hotspot",name:"HotSpot",component:Lo,meta:{title:"핫스팟"}},{path:"/tastespot",name:"TasteSpot",component:Yo,meta:{title:"맛스팟"}},{path:"/group-schedule",name:"GroupSchedule",component:Eo,meta:{title:"합창국"}},{path:"/event-place",name:"EventPlace",component:Wo,meta:{title:"사진첩"}},{path:"/board",name:"Board",component:Jo,meta:{title:"게시판"}},{path:"/chat",name:"Chat",component:Zo,meta:{title:"채팅"}}],Pr=T({history:V(),routes:zr,scrollBehavior:(e,t,l)=>l||{top:0}});Pr.beforeEach((e,t,l)=>{document.title=e.meta.title||"iFA Convention";const a=Y(),s=!1!==e.meta.requiresAuth,n=e.meta.requiresAdmin||!1;s&&!a.isAuthenticated?l("/login"):n&&!a.isAdmin||"/login"===e.path&&a.isAuthenticated?l("/"):l()});const Ur={ask(e,t,l){const a={question:e,conventionId:t,role:null==l?void 0:l.role,guestId:null==l?void 0:l.guestId,memberId:null==l?void 0:l.memberId};return U.post("/conventionchat/ask",a)},askWithHistory(e,t,l,a){const s={question:e,history:t,conventionId:l,role:null==a?void 0:a.role,guestId:null==a?void 0:a.guestId,memberId:null==a?void 0:a.memberId};return U.post("/conventionchat/ask/with-history",s)},async getSuggestedQuestions(e,t){const l={role:null==t?void 0:t.role,guestId:null==t?void 0:t.guestId};return(await U.get(`/conventionchat/conventions/${e}/suggestions`,{params:l})).data}},Or=e("chat",()=>{const e=t([]),a=t(!1),s=t(null),n=t([]),o=t(!1),r=t(null),i=Y(),d=l(()=>e.value.length>0?e.value[e.value.length-1]:null);function u(){const e=i.user;return e?{role:e.role,guestId:e.guestId||e.id,memberId:e.memberId}:(console.warn("getUserContext: User is not logged in, context will be null."),null)}async function c(e){try{const t=u(),l=await Ur.getSuggestedQuestions(e,t);n.value=l}catch(t){console.error("Failed to load suggested questions:",t),n.value=["이번 행사는 언제 진행되나요?","참석자는 몇 명인가요?"]}}return{messages:e,loading:a,error:s,suggestedQuestions:n,isOpen:o,currentConventionId:r,lastMessage:d,sendMessage:async function(t){if(!t.trim())return;const l={id:Date.now(),role:"user",content:t,timestamp:(new Date).toISOString()};e.value.push(l),a.value=!0,s.value=null;try{const l=u(),a=(await Ur.ask(t,r.value,l)).data,s={id:Date.now()+1,role:"assistant",content:(null==a?void 0:a.answer)||"답변을 생성할 수 없습니다.",sources:(null==a?void 0:a.sources)||[],llmProvider:null==a?void 0:a.llmProvider,timestamp:(null==a?void 0:a.timestamp)||(new Date).toISOString()};e.value.push(s)}catch(n){console.error("Failed to send message:",n);const t={id:Date.now()+1,role:"assistant",content:"죄송합니다. 답변을 생성하는 중 문제가 발생했습니다.",isError:!0,timestamp:(new Date).toISOString()};e.value.push(t)}finally{a.value=!1}},sendMessageWithHistory:async function(t){if(!t.trim())return;const l={id:Date.now(),role:"user",content:t,timestamp:(new Date).toISOString()};e.value.push(l),a.value=!0,s.value=null;try{const l=10,a=e.value.slice(-l).map(e=>({role:e.role,content:e.content})),s=u(),n=(await Ur.askWithHistory(t,a,r.value,s)).data,o={id:Date.now()+1,role:"assistant",content:(null==n?void 0:n.answer)||"답변을 생성할 수 없습니다.",sources:(null==n?void 0:n.sources)||[],llmProvider:null==n?void 0:n.llmProvider,timestamp:(null==n?void 0:n.timestamp)||(new Date).toISOString()};e.value.push(o)}catch(n){console.error("Failed to send message with history:",n);const t={id:Date.now()+1,role:"assistant",content:"죄송합니다. 답변을 생성하는 중 문제가 발생했습니다.",isError:!0,timestamp:(new Date).toISOString()};e.value.push(t)}finally{a.value=!1}},loadSuggestedQuestions:c,toggleChat:function(){o.value=!o.value},openChat:function(){o.value=!0},closeChat:function(){o.value=!1},clearMessages:function(){e.value=[],s.value=null},setConventionContext:function(e){r.value=e,e&&c(e)},addWelcomeMessage:function(t=null){const l=t?`안녕하세요! "${t}" 행사에 대해 궁금하신 점을 물어보세요.`:"안녕하세요! 무엇을 도와드릴까요?",a={id:Date.now(),role:"assistant",content:l,timestamp:(new Date).toISOString(),isWelcome:!0};0===e.value.length&&e.value.push(a)}}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fr={exports:{}};const Lr=Hr(Fr.exports=function(){var e=1e3,t=6e4,l=36e5,a="millisecond",s="second",n="minute",o="hour",r="day",i="week",d="month",u="quarter",c="year",v="date",m="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],l=e%100;return"["+e+(t[(l-20)%10]||t[l]||t[0])+"]"}},x=function(e,t,l){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(l)+e},b={s:x,z:function(e){var t=-e.utcOffset(),l=Math.abs(t),a=Math.floor(l/60),s=l%60;return(t<=0?"+":"-")+x(a,2,"0")+":"+x(s,2,"0")},m:function e(t,l){if(t.date()<l.date())return-e(l,t);var a=12*(l.year()-t.year())+(l.month()-t.month()),s=t.clone().add(a,d),n=l-s<0,o=t.clone().add(a+(n?-1:1),d);return+(-(a+(l-s)/(n?s-o:o-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:c,w:i,d:r,D:v,h:o,m:n,s:s,ms:a,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",f={};f[y]=h;var w="$isDayjsObject",k=function(e){return e instanceof $||!(!e||!e[w])},C=function e(t,l,a){var s;if(!t)return y;if("string"==typeof t){var n=t.toLowerCase();f[n]&&(s=n),l&&(f[n]=l,s=n);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var r=t.name;f[r]=t,s=r}return!a&&s&&(y=s),s||!a&&y},M=function(e,t){if(k(e))return e.clone();var l="object"==typeof t?t:{};return l.date=e,l.args=arguments,new $(l)},j=b;j.l=C,j.i=k,j.w=function(e,t){return M(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var $=function(){function h(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var x=h.prototype;return x.parse=function(e){this.$d=function(e){var t=e.date,l=e.utc;if(null===t)return new Date(NaN);if(j.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(p);if(a){var s=a[2]-1||0,n=(a[7]||"0").substring(0,3);return l?new Date(Date.UTC(a[1],s,a[3]||1,a[4]||0,a[5]||0,a[6]||0,n)):new Date(a[1],s,a[3]||1,a[4]||0,a[5]||0,a[6]||0,n)}}return new Date(t)}(e),this.init()},x.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},x.$utils=function(){return j},x.isValid=function(){return!(this.$d.toString()===m)},x.isSame=function(e,t){var l=M(e);return this.startOf(t)<=l&&l<=this.endOf(t)},x.isAfter=function(e,t){return M(e)<this.startOf(t)},x.isBefore=function(e,t){return this.endOf(t)<M(e)},x.$g=function(e,t,l){return j.u(e)?this[t]:this.set(l,e)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(e,t){var l=this,a=!!j.u(t)||t,u=j.p(e),m=function(e,t){var s=j.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return a?s:s.endOf(r)},p=function(e,t){return j.w(l.toDate()[e].apply(l.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},g=this.$W,h=this.$M,x=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case c:return a?m(1,0):m(31,11);case d:return a?m(1,h):m(0,h+1);case i:var y=this.$locale().weekStart||0,f=(g<y?g+7:g)-y;return m(a?x-f:x+(6-f),h);case r:case v:return p(b+"Hours",0);case o:return p(b+"Minutes",1);case n:return p(b+"Seconds",2);case s:return p(b+"Milliseconds",3);default:return this.clone()}},x.endOf=function(e){return this.startOf(e,!1)},x.$set=function(e,t){var l,i=j.p(e),u="set"+(this.$u?"UTC":""),m=(l={},l[r]=u+"Date",l[v]=u+"Date",l[d]=u+"Month",l[c]=u+"FullYear",l[o]=u+"Hours",l[n]=u+"Minutes",l[s]=u+"Seconds",l[a]=u+"Milliseconds",l)[i],p=i===r?this.$D+(t-this.$W):t;if(i===d||i===c){var g=this.clone().set(v,1);g.$d[m](p),g.init(),this.$d=g.set(v,Math.min(this.$D,g.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},x.set=function(e,t){return this.clone().$set(e,t)},x.get=function(e){return this[j.p(e)]()},x.add=function(a,u){var v,m=this;a=Number(a);var p=j.p(u),g=function(e){var t=M(m);return j.w(t.date(t.date()+Math.round(e*a)),m)};if(p===d)return this.set(d,this.$M+a);if(p===c)return this.set(c,this.$y+a);if(p===r)return g(1);if(p===i)return g(7);var h=(v={},v[n]=t,v[o]=l,v[s]=e,v)[p]||1,x=this.$d.getTime()+a*h;return j.w(x,this)},x.subtract=function(e,t){return this.add(-1*e,t)},x.format=function(e){var t=this,l=this.$locale();if(!this.isValid())return l.invalidDate||m;var a=e||"YYYY-MM-DDTHH:mm:ssZ",s=j.z(this),n=this.$H,o=this.$m,r=this.$M,i=l.weekdays,d=l.months,u=l.meridiem,c=function(e,l,s,n){return e&&(e[l]||e(t,a))||s[l].slice(0,n)},v=function(e){return j.s(n%12||12,e,"0")},p=u||function(e,t,l){var a=e<12?"AM":"PM";return l?a.toLowerCase():a};return a.replace(g,function(e,a){return a||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return j.s(t.$y,4,"0");case"M":return r+1;case"MM":return j.s(r+1,2,"0");case"MMM":return c(l.monthsShort,r,d,3);case"MMMM":return c(d,r);case"D":return t.$D;case"DD":return j.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return c(l.weekdaysMin,t.$W,i,2);case"ddd":return c(l.weekdaysShort,t.$W,i,3);case"dddd":return i[t.$W];case"H":return String(n);case"HH":return j.s(n,2,"0");case"h":return v(1);case"hh":return v(2);case"a":return p(n,o,!0);case"A":return p(n,o,!1);case"m":return String(o);case"mm":return j.s(o,2,"0");case"s":return String(t.$s);case"ss":return j.s(t.$s,2,"0");case"SSS":return j.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(a,v,m){var p,g=this,h=j.p(v),x=M(a),b=(x.utcOffset()-this.utcOffset())*t,y=this-x,f=function(){return j.m(g,x)};switch(h){case c:p=f()/12;break;case d:p=f();break;case u:p=f()/3;break;case i:p=(y-b)/6048e5;break;case r:p=(y-b)/864e5;break;case o:p=y/l;break;case n:p=y/t;break;case s:p=y/e;break;default:p=y}return m?p:j.a(p)},x.daysInMonth=function(){return this.endOf(d).$D},x.$locale=function(){return f[this.$L]},x.locale=function(e,t){if(!e)return this.$L;var l=this.clone(),a=C(e,t,!0);return a&&(l.$L=a),l},x.clone=function(){return j.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},h}(),I=$.prototype;return M.prototype=I,[["$ms",a],["$s",s],["$m",n],["$H",o],["$W",r],["$M",d],["$y",c],["$D",v]].forEach(function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),M.extend=function(e,t){return e.$i||(e(t,$,M),e.$i=!0),M},M.locale=C,M.isDayjs=k,M.unix=function(e){return M(1e3*e)},M.en=f[y],M.Ls=f,M.p={},M}()),qr=e("convention",()=>{const e=t([]),a=t(null),s=t([]),n=t([]),o=t([]),r=t([]),i=t(!1),d=t(null),u=t(Lr().format("YYYY-MM-DD")),c=t("나의일정"),v=l(()=>a.value),m=l(()=>s.value.length?s.value.filter(e=>Lr(e.scheduleDate).format("YYYY-MM-DD")===u.value).sort((e,t)=>{const l=e.startTime||"00:00:00",a=t.startTime||"00:00:00";return l.localeCompare(a)}):[]),p=l(()=>{if(!s.value.length)return[];return[...new Set(s.value.map(e=>Lr(e.scheduleDate).format("YYYY-MM-DD")))].sort().map(e=>({date:e,label:Lr(e).format("M/D"),dayName:Lr(e).format("(ddd)"),isToday:Lr(e).isSame(Lr(),"day")}))});async function g(e){var t,l;i.value=!0,d.value=null;try{const n=await q(e);a.value=null==(t=n.data)?void 0:t.convention,s.value=(null==(l=n.data)?void 0:l.schedules)||[];const o=p.value;o.length>0&&(u.value=o[0].date)}catch(n){d.value="컨벤션 상세 정보를 불러오는데 실패했습니다.",console.error("Failed to fetch convention details:",n)}finally{i.value=!1}}return{conventions:e,currentConvention:a,schedules:s,notices:n,tourInfo:o,photos:r,loading:i,error:d,selectedDate:u,activeTab:c,getCurrentConvention:v,getSchedulesByDate:m,getAvailableDates:p,fetchConventions:async function(){var t;i.value=!0,d.value=null;try{const l=await L();e.value=(null==(t=l.data)?void 0:t.conventions)||[],e.value.length>0&&await g(e.value[0].id)}catch(l){d.value="컨벤션 데이터를 불러오는데 실패했습니다.",console.error("Failed to fetch conventions:",l)}finally{i.value=!1}},setCurrentConvention:g,fetchNotices:async function(e){var t;i.value=!0;try{const l=await q(e);n.value=(null==(t=l.data)?void 0:t.notices)||[]}catch(l){console.error("Failed to fetch notices:",l),n.value=[]}finally{i.value=!1}},fetchTourInfo:async function(e){var t;i.value=!0;try{const l=await q(e);o.value=(null==(t=l.data)?void 0:t.tours)||[]}catch(l){console.error("Failed to fetch tour info:",l),o.value=[]}finally{i.value=!1}},fetchPhotos:async function(e){var t;i.value=!0;try{const l=await q(e);r.value=(null==(t=l.data)?void 0:t.photos)||[]}catch(l){console.error("Failed to fetch photos:",l),r.value=[]}finally{i.value=!1}},setSelectedDate:function(e){u.value=e},setActiveTab:function(e){c.value=e}}}),Yr=(e,t)=>{const l=e.__vccOpts||e;for(const[a,s]of t)l[a]=s;return l},Kr={key:0,class:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-sm"},Er={key:1,class:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-sm"},Rr={class:"flex-1 max-w-3xl"},Wr={class:"prose prose-sm max-w-none"},Gr={class:"whitespace-pre-wrap break-words leading-7"},Jr={key:0,class:"mt-3 pt-3 border-t border-gray-200 flex items-center text-xs text-gray-500"},Qr={key:1,class:"mt-3 pt-3 border-t border-gray-200"},Zr={key:0,class:"mt-2.5 space-y-2"},Xr={class:"flex items-center justify-between mb-1.5"},ei={class:"text-xs font-medium text-gray-700"},ti={class:"text-xs text-gray-500"},li={class:"text-xs text-gray-600 leading-relaxed"},ai=Yr({__name:"ChatMessage",props:{message:{type:Object,required:!0}},setup(e){const l=e,a=t(!1);function v(e){if(!e)return"";const t=Lr(e),l=Lr();return t.isSame(l,"day")?t.format("A h:mm"):t.isSame(l.subtract(1,"day"),"day")?`어제 ${t.format("A h:mm")}`:t.format("M월 D일 A h:mm")}function m(){navigator.clipboard.writeText(l.message.content)}return(t,l)=>(s(),n("div",{class:p(["flex items-start space-x-3 group","user"===e.message.role?"flex-row-reverse space-x-reverse":"flex-row"])},["assistant"===e.message.role?(s(),n("div",Kr,[...l[1]||(l[1]=[o("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])])):(s(),n("div",Er,[...l[2]||(l[2]=[o("svg",{class:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)])])),o("div",Rr,[o("div",{class:p(["rounded-2xl px-5 py-3.5","user"===e.message.role?"bg-gray-100 text-gray-900":e.message.isError?"bg-red-50 text-red-700 border border-red-200":"bg-white text-gray-900"])},[o("div",Wr,[o("div",Gr,r(e.message.content),1)]),"assistant"===e.message.role&&e.message.llmProvider&&!e.message.isError?(s(),n("div",Jr,[l[3]||(l[3]=o("svg",{class:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),i(" "+r(e.message.llmProvider),1)])):c("",!0),e.message.sources&&e.message.sources.length>0?(s(),n("div",Qr,[o("button",{onClick:l[0]||(l[0]=e=>a.value=!a.value),class:"flex items-center text-xs font-medium text-gray-600 hover:text-gray-900 transition-colors"},[l[5]||(l[5]=o("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),i(" 출처 "+r(e.message.sources.length)+"개 ",1),(s(),n("svg",{class:p(["w-3.5 h-3.5 ml-1 transition-transform",a.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[4]||(l[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),a.value?(s(),n("div",Zr,[(s(!0),n(d,null,u(e.message.sources,(e,t)=>(s(),n("div",{key:t,class:"p-3 bg-gray-50 rounded-xl border border-gray-200"},[o("div",Xr,[o("span",ei,r(e.conventionTitle||"행사 정보"),1),o("span",ti,r(Math.round(100*e.similarity))+"% ",1)]),o("div",li,r(e.content),1)]))),128))])):c("",!0)])):c("",!0)],2),o("div",{class:p(["mt-1.5 px-1 text-xs text-gray-400 flex items-center space-x-3","user"===e.message.role?"justify-end":"justify-start"])},[o("span",null,r(v(e.message.timestamp)),1),"assistant"===e.message.role?(s(),n("button",{key:0,class:"opacity-0 group-hover:opacity-100 transition-opacity hover:text-gray-600",title:"복사",onClick:m},[...l[6]||(l[6]=[o("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])):c("",!0)],2)])],2))}},[["__scopeId","data-v-c2a870bc"]]),si={class:"border-t border-gray-200 bg-white px-6 py-4"},ni={class:"flex items-end space-x-3 max-w-4xl mx-auto"},oi={class:"flex-1 relative"},ri=["disabled","placeholder"],ii=["disabled"],di={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ui={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},ci=Yr({__name:"ChatInput",props:{loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"메시지를 입력하세요..."},maxLength:{type:Number,default:2e3}},emits:["send"],setup(e,{expose:a,emit:r}){const i=e,d=r,u=t(""),c=t(null),v=l(()=>u.value.trim().length>0&&!i.loading&&!i.disabled&&u.value.length<=i.maxLength);function m(){if(!v.value)return;const e=u.value.trim();e&&(d("send",e),u.value="",D(()=>{var e;b(),null==(e=c.value)||e.focus()}))}function g(e){e.shiftKey||(e.preventDefault(),m())}function b(){const e=c.value;if(!e)return;e.style.height="auto";const t=Math.min(e.scrollHeight,200);e.style.height=`${t}px`}return w(()=>i.loading,e=>{e||D(()=>{var e;null==(e=c.value)||e.focus()})}),a({focus:function(){var e;null==(e=c.value)||e.focus()},clear:function(){u.value="",b()}}),(t,l)=>(s(),n("div",si,[o("div",ni,[o("div",oi,[h(o("textarea",{ref_key:"inputRef",ref:c,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),onKeydown:_(g,["enter"]),onInput:b,disabled:e.disabled,placeholder:e.placeholder,rows:"1",class:"w-full resize-none rounded-3xl border border-gray-300 px-6 py-4 text-base focus:outline-none focus:border-gray-400 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors shadow-sm",style:{"max-height":"200px","min-height":"52px"}},null,40,ri),[[x,u.value]])]),o("button",{onClick:m,disabled:!v.value,class:p(["flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center transition-all",v.value?"bg-black text-white hover:bg-gray-800 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"])},[e.loading?(s(),n("svg",ui,[...l[2]||(l[2]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),n("svg",di,[...l[1]||(l[1]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"},null,-1)])]))],10,ii)])]))}},[["__scopeId","data-v-ddeb17d8"]]),vi={key:0,class:"px-6 py-6 bg-white border-b border-gray-200"},mi={class:"max-w-3xl mx-auto space-y-3"},pi=["onClick"],gi={class:"flex items-center justify-between"},hi={class:"text-sm text-gray-700 flex-1"},xi={__name:"SuggestedQuestions",props:{questions:{type:Array,default:()=>[]},maxVisible:{type:Number,default:4}},emits:["select"],setup(e,{emit:a}){const i=e,v=a,m=t(!1),p=l(()=>m.value||i.questions.length<=i.maxVisible?i.questions:i.questions.slice(0,i.maxVisible));return(t,l)=>e.questions.length>0?(s(),n("div",vi,[o("div",mi,[(s(!0),n(d,null,u(p.value,(e,t)=>(s(),n("button",{key:t,onClick:t=>function(e){v("select",e)}(e),class:"w-full text-left px-5 py-3.5 bg-white rounded-2xl border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all group"},[o("div",gi,[o("span",hi,r(e),1),l[1]||(l[1]=o("svg",{class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 flex-shrink-0 ml-3 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,pi))),128))]),e.questions.length>e.maxVisible&&!m.value?(s(),n("button",{key:0,onClick:l[0]||(l[0]=e=>m.value=!0),class:"w-full mt-3 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors"}," 더 보기 ("+r(e.questions.length-e.maxVisible)+"개) ",1)):c("",!0)])):c("",!0)}},bi={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},yi={class:"relative w-full max-w-3xl h-[90vh] bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in"},fi={class:"flex-shrink-0 bg-white border-b border-gray-200 px-6 py-4"},wi={class:"flex items-center justify-between"},ki={class:"flex items-center space-x-3"},Ci={class:"text-xs text-gray-500"},Mi={key:0,class:"space-y-6"},ji={key:1,class:"h-full flex flex-col items-center justify-center text-center"},$i={key:2,class:"flex items-start space-x-3 mb-6"},Ii=Yr({__name:"ChatWindow",setup(e){const a=Or(),i=qr(),v=t(null),p=t(null),g=l(()=>a.messages.length<=1&&a.suggestedQuestions.length>0),h=l(()=>{const e=i.currentConvention;return e?`${e.title}에 대해 질문하세요...`:"메시지를 입력하세요..."});async function x(e){var t;const l=null==(t=i.currentConvention)?void 0:t.id;a.messages.length>1?await a.sendMessageWithHistory(e):l?await a.sendMessageAboutConvention(l,e):await a.sendMessage(e),$()}async function f(e){await x(e)}function k(){var e;if(confirm("대화 내용을 모두 삭제하시겠습니까?")){a.clearMessages();const t=null==(e=i.currentConvention)?void 0:e.title;a.addWelcomeMessage(t)}}function j(){a.closeChat()}function $(){D(()=>{const e=v.value;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})}return C(()=>{var e,t;const l=null==(e=i.currentConvention)?void 0:e.id;if(l){a.setConventionContext(l),a.loadSuggestedQuestions(l);const e=null==(t=i.currentConvention)?void 0:t.title;a.addWelcomeMessage(e)}}),w(()=>a.messages.length,()=>{$()}),w(()=>{var e;return null==(e=i.currentConvention)?void 0:e.id},e=>{e&&(a.setConventionContext(e),a.loadSuggestedQuestions(e))}),(e,t)=>{var l;return b(a).isOpen?(s(),n("div",bi,[o("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:j}),o("div",yi,[o("div",fi,[o("div",wi,[o("div",ki,[t[1]||(t[1]=o("div",{class:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-sm"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])],-1)),o("div",null,[t[0]||(t[0]=o("h2",{class:"text-lg font-semibold text-gray-900"},"ChatGPT",-1)),o("p",Ci,r((null==(l=b(i).currentConvention)?void 0:l.title)||"무엇을 도와드릴까요?"),1)])]),o("div",{class:"flex items-center space-x-1"},[o("button",{onClick:k,class:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"새 채팅"},[...t[2]||(t[2]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),o("button",{onClick:j,class:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"닫기"},[...t[3]||(t[3]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])]),g.value?(s(),M(xi,{key:0,questions:b(a).suggestedQuestions,onSelect:f},null,8,["questions"])):c("",!0),o("div",{ref_key:"messagesContainer",ref:v,class:"flex-1 overflow-y-auto px-6 py-6 bg-white custom-scrollbar"},[b(a).messages.length>0?(s(),n("div",Mi,[(s(!0),n(d,null,u(b(a).messages,e=>(s(),M(ai,{key:e.id,message:e},null,8,["message"]))),128))])):(s(),n("div",ji,[...t[4]||(t[4]=[m('<div class="w-20 h-20 mb-6 bg-gradient-to-br from-emerald-400 to-cyan-500 rounded-full flex items-center justify-center shadow-lg" data-v-e531c2cc><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e531c2cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-e531c2cc></path></svg></div><h3 class="text-2xl font-semibold text-gray-900 mb-2" data-v-e531c2cc> 무엇을 도와드릴까요? </h3><p class="text-gray-500 max-w-md" data-v-e531c2cc> 행사 일정, 참석자 정보, 장소 등 궁금하신 내용을 자유롭게 물어보세요 </p>',3)])])),b(a).loading?(s(),n("div",$i,[...t[5]||(t[5]=[m('<div class="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-sm flex-shrink-0" data-v-e531c2cc><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e531c2cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" data-v-e531c2cc></path></svg></div><div class="flex-1 bg-gray-100 rounded-2xl px-4 py-3" data-v-e531c2cc><div class="flex space-x-1.5" data-v-e531c2cc><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0ms;" data-v-e531c2cc></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:150ms;" data-v-e531c2cc></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:300ms;" data-v-e531c2cc></div></div></div>',2)])])):c("",!0)],512),y(ci,{ref_key:"chatInputRef",ref:p,loading:b(a).loading,placeholder:h.value,onSend:x},null,8,["loading","placeholder"])])])):c("",!0)}}},[["__scopeId","data-v-e531c2cc"]]),Si=["title"],Ti={key:"close",class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vi={key:"chat",class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Di={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-md"},_i={key:1,class:"absolute inset-0 rounded-full bg-primary-400 opacity-75 animate-ping"},Ni=Yr({__name:"ChatFloatingButton",props:{showBadge:{type:Boolean,default:!1}},setup(e){const t=Or(),a=l(()=>0);function i(){t.toggleChat()}return(l,d)=>(s(),n("button",{onClick:i,class:p(["fixed bottom-20 right-4 z-40 w-14 h-14 rounded-full shadow-float transition-all duration-200 flex items-center justify-center","hover:scale-110 active:scale-95",b(t).isOpen?"bg-dark-900 hover:bg-dark-800":"bg-gradient-to-br from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700"]),title:b(t).isOpen?"채팅 닫기":"AI 챗봇"},[y(N,{name:"icon-fade",mode:"out-in"},{default:f(()=>[b(t).isOpen?(s(),n("svg",Ti,[...d[0]||(d[0]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(s(),n("svg",Vi,[...d[1]||(d[1]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},null,-1)])]))]),_:1}),e.showBadge&&a.value>0?(s(),n("span",Di,r(a.value>9?"9+":a.value),1)):c("",!0),b(t).isOpen?c("",!0):(s(),n("span",_i))],10,Si))}},[["__scopeId","data-v-8bac6c17"]]),Ai={class:"min-h-screen bg-gray-50"},Bi={class:"pb-20"},zi={key:0,class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40"},Pi={class:"flex items-center justify-around h-16 max-w-screen-xl mx-auto"},Ui=["onClick"],Oi=["d"],Hi={class:"text-xs font-medium"},Fi={key:0,class:"absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-1 bg-primary-600 rounded-b-full"},Li={key:1,class:"absolute top-2 right-1/4 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center"},qi=A(Yr({__name:"App",setup(e){const t=a(),i=S();Y();const m=l(()=>i.path),g=l(()=>"/login"!==i.path),h=[{path:"/",label:"홈",iconPath:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",badge:0},{path:"/my-schedule",label:"일정",iconPath:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",badge:0},{path:"/board",label:"게시판",iconPath:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",badge:3},{path:"/chat",label:"채팅",iconPath:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",badge:5},{path:"/location",label:"더보기",iconPath:"M4 6h16M4 12h16M4 18h16",badge:0}];return(e,l)=>{const a=v("router-view");return s(),n("div",Ai,[o("main",Bi,[y(a)]),g.value?(s(),n("nav",zi,[o("div",Pi,[(s(),n(d,null,u(h,e=>o("button",{key:e.path,onClick:l=>{return a=e.path,void t.push(a);var a},class:p(["flex flex-col items-center justify-center flex-1 h-full transition-all relative",m.value===e.path?"text-primary-600":"text-gray-500 active:scale-95"])},[(s(),n("svg",{class:p(["w-6 h-6 mb-1",m.value===e.path?"stroke-[2.5]":"stroke-2"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:e.iconPath},null,8,Oi)],2)),o("span",Hi,r(e.label),1),m.value===e.path?(s(),n("span",Fi)):c("",!0),e.badge>0?(s(),n("span",Li,r(e.badge>9?"9+":e.badge),1)):c("",!0)],10,Ui)),64))])])):c("",!0),y(Ii),y(Ni)])}}},[["__scopeId","data-v-a6e3d01f"]])),Yi=B();qi.use(Yi),qi.use(Pr);Y().initAuth(),qi.mount("#app");
