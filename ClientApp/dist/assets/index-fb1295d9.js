import{d as e,r as t,c as a,u as s,o as l,a as n,b as o,t as r,e as i,F as d,f as u,g as c,h as p,n as v,w as m,i as g,v as h,j as x,k as f,l as y,m as b,p as w,q as k,s as C,x as M,y as S,z as $,A as j,B as I,C as D,D as _,E as V,T,G as A,H as z}from"./vendor-a593b618.js";import{a as B}from"./utils-8e1cd5bd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O={}.VITE_API_URL||"https://localhost:5001/api",H=B.create({baseURL:O,headers:{"Content-Type":"application/json"}});H.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),H.interceptors.response.use(e=>e,async e=>{var t;const a=e.config;if(401===(null==(t=e.response)?void 0:t.status)&&!a._retry){a._retry=!0;try{const e=localStorage.getItem("refreshToken");if(e){const t=await B.post(`${O}/auth/refresh`,{refreshToken:e}),{accessToken:s,refreshToken:l}=t.data;return localStorage.setItem("accessToken",s),localStorage.setItem("refreshToken",l),a.headers.Authorization=`Bearer ${s}`,H(a)}}catch(s){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"}}return Promise.reject(e)});const U=e=>H.post("/auth/register",e),F=e=>H.post("/auth/login",e),N=()=>H.post("/auth/logout"),P=()=>H.get("/auth/me"),L=(e,t="Guest")=>H.post(`/auth/conventions/${e}/join`,{role:t}),q=e=>H.delete(`/auth/conventions/${e}/leave`),E=()=>H.get("/conventions"),Y=e=>H.get(`/conventions/${e}`),R=e("auth",()=>{const e=t(null),s=t(null),l=t(null),n=t([]),o=t(!1),r=t(null),i=a(()=>!!s.value),d=a(()=>{var t;return"Admin"===(null==(t=e.value)?void 0:t.role)});async function u(){try{await N()}catch(t){console.error("Logout error:",t)}finally{s.value=null,l.value=null,e.value=null,n.value=[],localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}}async function c(){var t;if(s.value){o.value=!0;try{const t=await P();e.value=t.data,n.value=t.data.conventions||[],localStorage.setItem("user",JSON.stringify(t.data))}catch(a){console.error("Fetch user error:",a),401===(null==(t=a.response)?void 0:t.status)&&await u()}finally{o.value=!1}}}return{user:e,accessToken:s,refreshToken:l,conventions:n,loading:o,error:r,isAuthenticated:i,isAdmin:d,initAuth:function(){const t=localStorage.getItem("accessToken"),a=localStorage.getItem("refreshToken"),n=localStorage.getItem("user");t&&n&&(s.value=t,l.value=a,e.value=JSON.parse(n))},register:async function(e){var t,a;o.value=!0,r.value=null;try{return{success:!0,data:(await U(e)).data}}catch(s){return r.value=(null==(a=null==(t=s.response)?void 0:t.data)?void 0:a.message)||"회원가입에 실패했습니다.",{success:!1,error:r.value}}finally{o.value=!1}},login:async function(t,a){var i,d;o.value=!0,r.value=null;try{const o=await F({loginId:t,password:a}),{accessToken:r,refreshToken:i,user:d,conventions:u}=o.data;return s.value=r,l.value=i,e.value=d,n.value=u||[],localStorage.setItem("accessToken",r),localStorage.setItem("refreshToken",i),localStorage.setItem("user",JSON.stringify(d)),{success:!0}}catch(u){return r.value=(null==(d=null==(i=u.response)?void 0:i.data)?void 0:d.message)||"로그인에 실패했습니다.",{success:!1,error:r.value}}finally{o.value=!1}},logout:u,fetchCurrentUser:c,joinConvention:async function(e,t="Guest"){var a,s;o.value=!0,r.value=null;try{return await L(e,t),await c(),{success:!0}}catch(l){return r.value=(null==(s=null==(a=l.response)?void 0:a.data)?void 0:s.message)||"행사 참여에 실패했습니다.",{success:!1,error:r.value}}finally{o.value=!1}},leaveConvention:async function(e){var t,a;o.value=!0,r.value=null;try{return await q(e),await c(),{success:!0}}catch(s){return r.value=(null==(a=null==(t=s.response)?void 0:t.data)?void 0:a.message)||"행사 참여 취소에 실패했습니다.",{success:!1,error:r.value}}finally{o.value=!1}}}}),W={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},G={class:"relative h-48 bg-gradient-to-br from-primary-600 to-primary-800 overflow-hidden"},Q={class:"relative h-full flex flex-col justify-center px-6 text-white"},J={class:"text-2xl font-bold mb-2"},K={class:"flex items-center space-x-2 text-sm text-white/90"},Z={class:"flex items-center space-x-2 text-sm text-white/90 mt-1"},X={class:"mt-4 inline-flex items-center px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-full text-sm font-bold"},ee={class:"px-4 py-6 space-y-6 -mt-8"},te={class:"bg-white rounded-2xl shadow-lg p-5"},ae={class:"grid grid-cols-4 gap-4"},se=["onClick"],le={class:"w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center shadow-md"},ne={class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe=["d"],re={class:"text-xs font-medium text-gray-700 text-center leading-tight"},ie={key:0,class:"bg-white rounded-2xl shadow-lg p-5"},de={class:"flex items-center justify-between mb-4"},ue={class:"space-y-3"},ce={class:"flex-1 min-w-0"},pe={class:"flex items-center space-x-2 mb-1"},ve={class:"px-2 py-0.5 bg-primary-600 text-white text-xs font-bold rounded"},me={class:"text-xs text-gray-500"},ge={class:"font-semibold text-gray-900 text-sm"},he={key:1,class:"bg-white rounded-2xl shadow-lg p-5"},xe={class:"flex items-center justify-between mb-4"},fe={class:"space-y-2"},ye=["onClick"],be={class:"flex items-start space-x-2"},we={class:"flex-1 min-w-0"},ke={class:"font-medium text-gray-900 text-sm truncate"},Ce={class:"text-xs text-gray-500 mt-1"},Me={class:"grid grid-cols-3 gap-3"},Se={class:"bg-white rounded-xl shadow-md p-4 text-center"},$e={class:"text-2xl font-bold text-gray-900"},je={class:"bg-white rounded-xl shadow-md p-4 text-center"},Ie={class:"text-2xl font-bold text-gray-900"},De={class:"bg-white rounded-xl shadow-md p-4 text-center"},_e={class:"text-2xl font-bold text-gray-900"},Ve={__name:"ConventionHome",setup(e){const p=s(),v=R(),m=async()=>{confirm("로그아웃하시겠습니까?")&&(await v.logout(),p.push("/login"))},g=t({title:"iFA STAR TOUR @ ROMA",startDate:"2025-03-12",endDate:"2025-03-05",location:"Roma, Italy"}),h=t([{id:1,label:"나의일정",route:"/my-schedule",iconPath:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:2,label:"장소정보",route:"/location",iconPath:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"},{id:3,label:"맛집",route:"/tastespot",iconPath:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:4,label:"사진첩",route:"/event-place",iconPath:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}]),x=t([{id:1,time:"09:00",title:"STAFF 선발대 미팅",location:"인천공항"},{id:2,time:"14:00",title:"로마 도착",location:"로마공항"}]),f=t([{id:1,title:"일정 변경 안내",date:"2025-05-10"},{id:2,title:"호텔 체크인 정보",date:"2025-05-09"}]),y=t({total:156,confirmed:142,pending:14}),b=a(()=>{const e=new Date,t=new Date(g.value.startDate),a=Math.ceil((t-e)/864e5);return a>0?a:0});function w(e){p.push(e)}return(e,t)=>(l(),n("div",W,[o("div",G,[t[6]||(t[6]=o("div",{class:"absolute inset-0 opacity-10"},[o("div",{class:"absolute top-0 left-0 w-64 h-64 bg-white rounded-full -translate-x-32 -translate-y-32"}),o("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full translate-x-48 translate-y-48"})],-1)),o("div",{class:"absolute top-4 right-4 z-10"},[o("button",{onClick:m,class:"flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 rounded-full text-white text-sm font-medium transition-all"},[...t[2]||(t[2]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"로그아웃",-1)])])]),o("div",Q,[o("h1",J,r(g.value.title),1),o("div",K,[t[3]||(t[3]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),o("span",null,r(g.value.startDate)+" ~ "+r(g.value.endDate),1)]),o("div",Z,[t[4]||(t[4]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),o("span",null,r(g.value.location),1)]),o("div",X,[t[5]||(t[5]=o("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),i(" D-"+r(b.value),1)])])]),o("div",ee,[o("div",te,[t[7]||(t[7]=o("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"빠른 메뉴",-1)),o("div",ae,[(l(!0),n(d,null,u(h.value,e=>(l(),n("button",{key:e.id,onClick:t=>w(e.route),class:"flex flex-col items-center justify-center space-y-2 p-3 rounded-xl hover:bg-gray-50 active:scale-95 transition-all"},[o("div",le,[(l(),n("svg",ne,[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:e.iconPath},null,8,oe)]))]),o("span",re,r(e.label),1)],8,se))),128))])]),x.value.length>0?(l(),n("div",ie,[o("div",de,[t[9]||(t[9]=o("h2",{class:"text-lg font-bold text-gray-900"},"오늘의 일정",-1)),o("button",{onClick:t[0]||(t[0]=e=>w("/my-schedule")),class:"text-sm text-primary-600 font-medium flex items-center"},[...t[8]||(t[8]=[i(" 전체보기 ",-1),o("svg",{class:"w-4 h-4 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),o("div",ue,[(l(!0),n(d,null,u(x.value,e=>(l(),n("div",{key:e.id,class:"flex items-start space-x-3 p-3 bg-gray-50 rounded-xl"},[t[10]||(t[10]=o("div",{class:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0"},[o("svg",{class:"w-6 h-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",ce,[o("div",pe,[o("span",ve,r(e.time),1),o("span",me,r(e.location),1)]),o("h3",ge,r(e.title),1)])]))),128))])])):c("",!0),f.value.length>0?(l(),n("div",he,[o("div",xe,[t[12]||(t[12]=o("h2",{class:"text-lg font-bold text-gray-900"},"공지사항",-1)),o("button",{onClick:t[1]||(t[1]=e=>w("/board")),class:"text-sm text-primary-600 font-medium flex items-center"},[...t[11]||(t[11]=[i(" 더보기 ",-1),o("svg",{class:"w-4 h-4 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),o("div",fe,[(l(!0),n(d,null,u(f.value,e=>(l(),n("button",{key:e.id,onClick:t=>function(e){p.push(`/board/${e.id}`)}(e),class:"w-full text-left p-3 hover:bg-gray-50 rounded-xl transition-all"},[o("div",be,[t[13]||(t[13]=o("span",{class:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-bold rounded flex-shrink-0 mt-0.5"},"공지",-1)),o("div",we,[o("h3",ke,r(e.title),1),o("p",Ce,r(e.date),1)])])],8,ye))),128))])])):c("",!0),o("div",Me,[o("div",Se,[t[14]||(t[14]=o("div",{class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-2"},[o("svg",{class:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),o("div",$e,r(y.value.total),1),t[15]||(t[15]=o("div",{class:"text-xs text-gray-600 mt-1"},"전체 참가자",-1))]),o("div",je,[t[16]||(t[16]=o("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2"},[o("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",Ie,r(y.value.confirmed),1),t[17]||(t[17]=o("div",{class:"text-xs text-gray-600 mt-1"},"참석 확정",-1))]),o("div",De,[t[18]||(t[18]=o("div",{class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2"},[o("svg",{class:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),o("div",_e,r(y.value.pending),1),t[19]||(t[19]=o("div",{class:"text-xs text-gray-600 mt-1"},"대기중",-1))])])])]))}},Te={class:"min-h-screen bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center p-4"},Ae={class:"relative w-full max-w-md"},ze={class:"bg-white rounded-2xl shadow-2xl p-8"},Be={class:"flex space-x-2 mb-6 bg-gray-100 p-1 rounded-xl"},Oe={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"},He={class:"text-sm text-red-600"},Ue=["disabled"],Fe=["disabled"],Ne={__name:"LoginView",setup(e){const a=s(),i=R(),d=t("login"),u=t(""),f=t({loginId:"",password:""}),y=t({loginId:"",password:"",passwordConfirm:"",name:"",email:"",phone:""});async function b(){u.value="";const e=await i.login(f.value.loginId,f.value.password);e.success?a.push("/"):u.value=e.error}async function w(){if(u.value="",y.value.password!==y.value.passwordConfirm)return void(u.value="비밀번호가 일치하지 않습니다.");const{passwordConfirm:e,...t}=y.value,a=await i.register(t);a.success?(alert("회원가입이 완료되었습니다. 로그인해주세요."),d.value="login",y.value={loginId:"",password:"",passwordConfirm:"",name:"",email:"",phone:""}):u.value=a.error}return(e,t)=>(l(),n("div",Te,[t[19]||(t[19]=o("div",{class:"absolute inset-0 opacity-10"},[o("div",{class:"absolute top-0 left-0 w-96 h-96 bg-white rounded-full -translate-x-48 -translate-y-48"}),o("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full translate-x-48 translate-y-48"})],-1)),o("div",Ae,[t[18]||(t[18]=p('<div class="text-center mb-8"><div class="w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-xl"><span class="text-3xl font-bold text-primary-600">iFA</span></div><h1 class="text-3xl font-bold text-white mb-2">Convention</h1><p class="text-white/80 text-sm">행사 관리 시스템</p></div>',1)),o("div",ze,[o("div",Be,[o("button",{onClick:t[0]||(t[0]=e=>d.value="login"),class:v(["flex-1 py-2 px-4 rounded-lg font-medium transition-all","login"===d.value?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 로그인 ",2),o("button",{onClick:t[1]||(t[1]=e=>d.value="register"),class:v(["flex-1 py-2 px-4 rounded-lg font-medium transition-all","register"===d.value?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 회원가입 ",2)]),u.value?(l(),n("div",Oe,[o("p",He,r(u.value),1)])):c("",!0),"login"===d.value?(l(),n("form",{key:1,onSubmit:m(b,["prevent"]),class:"space-y-4"},[o("div",null,[t[10]||(t[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"아이디",-1)),g(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>f.value.loginId=e),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"아이디를 입력하세요"},null,512),[[h,f.value.loginId]])]),o("div",null,[t[11]||(t[11]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호",-1)),g(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>f.value.password=e),type:"password",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"비밀번호를 입력하세요"},null,512),[[h,f.value.password]])]),o("button",{type:"submit",disabled:x(i).loading,class:"w-full py-3 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},r(x(i).loading?"로그인 중...":"로그인"),9,Ue)],32)):c("",!0),"register"===d.value?(l(),n("form",{key:2,onSubmit:m(w,["prevent"]),class:"space-y-4"},[o("div",null,[t[12]||(t[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"아이디 *",-1)),g(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>y.value.loginId=e),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"아이디"},null,512),[[h,y.value.loginId]])]),o("div",null,[t[13]||(t[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호 *",-1)),g(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>y.value.password=e),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"6자 이상"},null,512),[[h,y.value.password]])]),o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"비밀번호 확인 *",-1)),g(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>y.value.passwordConfirm=e),type:"password",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"비밀번호 재입력"},null,512),[[h,y.value.passwordConfirm]])]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"이름 *",-1)),g(o("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>y.value.name=e),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"이름"},null,512),[[h,y.value.name]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"이메일",-1)),g(o("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>y.value.email=e),type:"email",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"example@email.com"},null,512),[[h,y.value.email]])]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"전화번호",-1)),g(o("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>y.value.phone=e),type:"tel",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"010-1234-5678"},null,512),[[h,y.value.phone]])]),o("button",{type:"submit",disabled:x(i).loading,class:"w-full py-3 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},r(x(i).loading?"처리 중...":"회원가입"),9,Fe)],32)):c("",!0)])])]))}},Pe={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"},Le={class:"max-w-md w-full"},qe={class:"bg-white rounded-2xl shadow-xl p-8"},Ee={key:0,class:"space-y-6"},Ye=["disabled"],Re={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},We={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ge={class:"flex items-start"},Qe={class:"ml-3 text-sm text-red-700"},Je={key:1,class:"space-y-6"},Ke={class:"bg-green-50 border border-green-200 rounded-lg p-6"},Ze={class:"bg-white rounded-lg p-4 mb-4"},Xe={class:"space-y-1 font-mono text-sm"},et={class:"text-center text-sm text-gray-600 mt-6"},tt={__name:"SetupView",setup(e){const a=t(!1),s=t(!1),d=t(""),u=t({loginId:"",password:""}),v=async()=>{var e,t;a.value=!0,d.value="";try{const e=await B.post("/api/setup/create-admin");u.value={loginId:e.data.loginId,password:e.data.password},s.value=!0}catch(l){d.value=(null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.message)||"계정 생성 중 오류가 발생했습니다."}finally{a.value=!1}};return(e,t)=>{const m=f("router-link");return l(),n("div",Pe,[o("div",Le,[o("div",qe,[t[11]||(t[11]=p('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4"><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg></div><h1 class="text-3xl font-bold text-gray-900 mb-2">초기 설정</h1><p class="text-gray-600">관리자 계정을 생성합니다</p></div>',1)),s.value?(l(),n("div",Je,[o("div",Ke,[t[8]||(t[8]=p('<div class="flex items-center justify-center mb-4"><div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div></div><h3 class="text-center text-lg font-semibold text-green-900 mb-2">계정 생성 완료!</h3>',2)),o("div",Ze,[t[7]||(t[7]=o("p",{class:"text-sm text-gray-600 mb-2"},"로그인 정보:",-1)),o("div",Xe,[o("p",null,[t[3]||(t[3]=o("span",{class:"text-gray-500"},"아이디:",-1)),t[4]||(t[4]=i()),o("strong",null,r(u.value.loginId),1)]),o("p",null,[t[5]||(t[5]=o("span",{class:"text-gray-500"},"비밀번호:",-1)),t[6]||(t[6]=i()),o("strong",null,r(u.value.password),1)])])]),t[9]||(t[9]=o("p",{class:"text-xs text-center text-gray-600"},"이 정보를 안전한 곳에 보관하세요",-1))]),y(m,{to:"/login",class:"block w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 text-center"},{default:b(()=>[...t[10]||(t[10]=[i(" 로그인 페이지로 이동 ",-1)])]),_:1})])):(l(),n("div",Ee,[t[2]||(t[2]=p('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div class="ml-3"><h3 class="text-sm font-medium text-blue-800">생성될 계정 정보</h3><div class="mt-2 text-sm text-blue-700"><p><strong>아이디:</strong> admin</p><p><strong>비밀번호:</strong> admin123</p></div></div></div></div>',1)),o("button",{onClick:v,disabled:a.value,class:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 flex items-center justify-center"},[a.value?(l(),n("svg",Re,[...t[0]||(t[0]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),i(" "+r(a.value?"생성 중...":"관리자 계정 생성"),1)],8,Ye),d.value?(l(),n("div",We,[o("div",Ge,[t[1]||(t[1]=o("svg",{class:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),o("p",Qe,r(d.value),1)])])):c("",!0)]))]),o("p",et,[t[13]||(t[13]=i(" 이미 계정이 있으신가요? ",-1)),y(m,{to:"/login",class:"text-indigo-600 hover:text-indigo-700 font-medium"},{default:b(()=>[...t[12]||(t[12]=[i("로그인",-1)])]),_:1})])])])}}},at={class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},st={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},lt={class:"sticky top-0 bg-white border-b px-6 py-4"},nt={class:"flex justify-between items-center"},ot={class:"text-xl font-bold"},rt={class:"grid grid-cols-2 gap-4"},it={class:"grid grid-cols-2 gap-4"},dt={class:"flex items-center space-x-4"},ut={class:"flex justify-end space-x-3 pt-4 border-t"},ct=["disabled"],pt={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},vt={__name:"ConventionFormModal",props:{convention:Object},emits:["close","save"],setup(e,{emit:a}){const s=e,d=a,u=t(!1),p=t({title:"",conventionType:"DOMESTIC",startDate:"",endDate:"",brandColor:"#6366f1",renderType:"STANDARD",themePreset:"default"});w(()=>s.convention,e=>{e&&(p.value={title:e.title,conventionType:e.conventionType,startDate:e.startDate?e.startDate.split("T")[0]:"",endDate:e.endDate?e.endDate.split("T")[0]:"",brandColor:e.brandColor||"#6366f1",renderType:e.renderType||"STANDARD",themePreset:e.themePreset||"default"})},{immediate:!0});const x=async()=>{u.value=!0;try{await d("save",p.value)}finally{u.value=!1}};return(t,a)=>(l(),n("div",at,[o("div",st,[o("div",lt,[o("div",nt,[o("h2",ot,r(e.convention?"행사 수정":"새 행사 만들기"),1),o("button",{onClick:a[0]||(a[0]=e=>t.$emit("close")),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},[...a[9]||(a[9]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),o("form",{onSubmit:m(x,["prevent"]),class:"p-6 space-y-6"},[o("div",null,[a[10]||(a[10]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 행사명 "),o("span",{class:"text-red-500"},"*")],-1)),g(o("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>p.value.title=e),type:"text",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"예: iFA STAR TOUR @ ROMA"},null,512),[[h,p.value.title]])]),o("div",null,[a[13]||(a[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 행사 유형 "),o("span",{class:"text-red-500"},"*")],-1)),o("div",rt,[o("label",{class:v(["relative flex items-center p-4 border-2 rounded-lg cursor-pointer hover:border-primary-500 transition-colors",{"border-primary-500 bg-primary-50":"DOMESTIC"===p.value.conventionType}])},[g(o("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>p.value.conventionType=e),type:"radio",value:"DOMESTIC",class:"sr-only"},null,512),[[k,p.value.conventionType]]),a[11]||(a[11]=o("div",{class:"flex-1"},[o("div",{class:"font-medium"},"국내 행사"),o("div",{class:"text-sm text-gray-500"},"국내에서 진행되는 행사")],-1))],2),o("label",{class:v(["relative flex items-center p-4 border-2 rounded-lg cursor-pointer hover:border-primary-500 transition-colors",{"border-primary-500 bg-primary-50":"OVERSEAS"===p.value.conventionType}])},[g(o("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>p.value.conventionType=e),type:"radio",value:"OVERSEAS",class:"sr-only"},null,512),[[k,p.value.conventionType]]),a[12]||(a[12]=o("div",{class:"flex-1"},[o("div",{class:"font-medium"},"해외 행사"),o("div",{class:"text-sm text-gray-500"},"해외에서 진행되는 행사")],-1))],2)])]),o("div",it,[o("div",null,[a[14]||(a[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 시작일 "),o("span",{class:"text-red-500"},"*")],-1)),g(o("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>p.value.startDate=e),type:"date",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[h,p.value.startDate]])]),o("div",null,[a[15]||(a[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[i(" 종료일 "),o("span",{class:"text-red-500"},"*")],-1)),g(o("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>p.value.endDate=e),type:"date",required:"",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[h,p.value.endDate]])])]),o("div",null,[a[16]||(a[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 브랜드 컬러 ",-1)),o("div",dt,[g(o("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>p.value.brandColor=e),type:"color",class:"w-16 h-10 rounded cursor-pointer"},null,512),[[h,p.value.brandColor]]),g(o("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>p.value.brandColor=e),type:"text",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"#6366f1"},null,512),[[h,p.value.brandColor]])]),a[17]||(a[17]=o("p",{class:"text-sm text-gray-500 mt-1"},"행사의 메인 컬러를 설정합니다",-1))]),o("div",ut,[o("button",{type:"button",onClick:a[8]||(a[8]=e=>t.$emit("close")),class:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," 취소 "),o("button",{type:"submit",disabled:u.value,class:"px-4 py-2 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center space-x-2"},[u.value?(l(),n("svg",pt,[...a[18]||(a[18]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),o("span",null,r(u.value?"저장 중...":e.convention?"수정":"생성"),1)],8,ct)])],32)])]))}},mt={class:"min-h-screen bg-gray-50"},gt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ht={class:"flex justify-between items-center mb-6"},xt={class:"text-sm text-gray-600"},ft={key:0,class:"text-center py-12"},yt={key:1,class:"text-center py-12 bg-white rounded-lg border-2 border-dashed"},bt={key:2,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},wt=["onClick"],kt={class:"absolute top-3 right-3 flex space-x-2"},Ct={key:0,class:"px-2 py-1 bg-gray-800/50 text-white text-xs rounded-full backdrop-blur-sm"},Mt={key:1,class:"px-2 py-1 bg-green-500/80 text-white text-xs rounded-full backdrop-blur-sm"},St={class:"absolute bottom-4 left-4 right-4"},$t={class:"text-white font-bold text-lg truncate"},jt={class:"text-white/90 text-sm mt-1"},It={class:"p-4"},Dt={class:"space-y-2 text-sm"},_t={class:"flex items-center text-gray-600"},Vt={class:"flex items-center text-gray-600"},Tt={class:"flex items-center text-gray-600"},At={class:"mt-4 pt-4 border-t flex space-x-2"},zt=["onClick"],Bt=["onClick"],Ot=["onClick"],Ht={__name:"ConventionListView",setup(e){const a=s(),p=R(),g=t([]),h=t(!1),x=t(!1),f=t(null),y=async()=>{confirm("로그아웃하시겠습니까?")&&(await p.logout(),a.push("/login"))},b=async()=>{h.value=!0;try{const e=await B.get("/api/conventions");g.value=e.data}catch(e){console.error("Failed to load conventions:",e),alert("행사 목록을 불러오는데 실패했습니다.")}finally{h.value=!1}},w=()=>{x.value=!1,f.value=null},k=async e=>{try{f.value?(await B.put(`/api/conventions/${f.value.id}`,e),alert("행사가 수정되었습니다.")):(await B.post("/api/conventions",e),alert("행사가 생성되었습니다.")),w(),b()}catch(t){console.error("Failed to save convention:",t),alert("저장에 실패했습니다.")}},$=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})},j=(e,t)=>{const a=parseInt(e.replace("#",""),16);return"#"+(Math.max(0,Math.min(255,(a>>16)+t))<<16|Math.max(0,Math.min(255,(a>>8&255)+t))<<8|Math.max(0,Math.min(255,(255&a)+t))).toString(16).padStart(6,"0")};return C(()=>{b()}),(e,t)=>(l(),n("div",mt,[o("header",{class:"bg-white shadow-sm sticky top-0 z-40"},[o("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[o("div",{class:"flex justify-between items-center h-16"},[t[2]||(t[2]=o("h1",{class:"text-2xl font-bold text-gray-900"},"행사 관리",-1)),o("div",{class:"flex items-center space-x-4"},[o("button",{onClick:y,class:"flex items-center space-x-2 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},[...t[1]||(t[1]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",null,"로그아웃",-1)])])])])])]),o("div",gt,[o("div",ht,[o("div",null,[o("p",xt,"전체 "+r(g.value.length)+"개 행사",1)]),o("button",{onClick:t[0]||(t[0]=e=>x.value=!0),class:"flex items-center space-x-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors shadow-sm"},[...t[3]||(t[3]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),o("span",null,"새 행사 만들기",-1)])])]),h.value?(l(),n("div",ft,[...t[4]||(t[4]=[o("div",{class:"inline-block w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"},null,-1),o("p",{class:"text-gray-600 mt-4"},"로딩 중...",-1)])])):0===g.value.length?(l(),n("div",yt,[...t[5]||(t[5]=[o("svg",{class:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),o("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"행사가 없습니다",-1),o("p",{class:"mt-2 text-gray-600"},"첫 번째 행사를 만들어보세요",-1)])])):(l(),n("div",bt,[(l(!0),n(d,null,u(g.value,e=>(l(),n("div",{key:e.id,class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden cursor-pointer",onClick:t=>{return s=e.id,void a.push(`/admin/conventions/${s}`);var s}},[o("div",{class:"h-32 relative",style:S({background:`linear-gradient(135deg, ${e.brandColor||"#6366f1"} 0%, ${j(e.brandColor||"#6366f1",-20)} 100%)`})},[o("div",kt,["Y"===e.completeYn?(l(),n("span",Ct," 종료 ")):(l(),n("span",Mt," 진행중 "))]),o("div",St,[o("h3",$t,r(e.title),1),o("p",jt,r("OVERSEAS"===e.conventionType?"해외":"국내")+" 행사",1)])],4),o("div",It,[o("div",Dt,[o("div",_t,[t[6]||(t[6]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),i(" "+r($(e.startDate))+" ~ "+r($(e.endDate)),1)]),o("div",Vt,[t[7]||(t[7]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),i(" 참석자 "+r(e.guestCount)+"명 ",1)]),o("div",Tt,[t[8]||(t[8]=o("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),i(" 일정 "+r(e.scheduleCount)+"개 ",1)])]),o("div",At,[o("button",{onClick:m(t=>(e=>{f.value=e})(e),["stop"]),class:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," 수정 ",8,zt),o("button",{onClick:m(t=>(async e=>{try{await B.post(`/api/conventions/${e.id}/complete`),b()}catch(t){console.error("Failed to toggle complete:",t),alert("상태 변경에 실패했습니다.")}})(e),["stop"]),class:v(["flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors","Y"===e.completeYn?"text-green-700 bg-green-100 hover:bg-green-200":"text-gray-700 bg-gray-100 hover:bg-gray-200"])},r("Y"===e.completeYn?"재개":"종료"),11,Bt),o("button",{onClick:m(t=>(async e=>{if(confirm(`"${e.title}" 행사를 삭제하시겠습니까?`))try{await B.delete(`/api/conventions/${e.id}`),alert("행사가 삭제되었습니다."),b()}catch(t){console.error("Failed to delete convention:",t),alert("행사 삭제에 실패했습니다.")}})(e),["stop"]),class:"px-3 py-2 text-sm font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-lg transition-colors"}," 삭제 ",8,Ot)])])],8,wt))),128))]))]),x.value||f.value?(l(),M(vt,{key:0,convention:f.value,onClose:w,onSave:k},null,8,["convention"])):c("",!0)]))}},Ut={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},Ft={class:"bg-white rounded-lg shadow p-6"},Nt={class:"flex items-center justify-between"},Pt={class:"text-2xl font-bold mt-1"},Lt={class:"bg-white rounded-lg shadow p-6"},qt={class:"flex items-center justify-between"},Et={class:"text-2xl font-bold mt-1"},Yt={class:"bg-white rounded-lg shadow p-6"},Rt={class:"flex items-center justify-between"},Wt={class:"text-2xl font-bold mt-1"},Gt={class:"bg-white rounded-lg shadow p-6"},Qt={class:"flex items-center justify-between"},Jt={class:"text-2xl font-bold mt-1"},Kt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Zt={class:"bg-white rounded-lg shadow"},Xt={class:"p-4 sm:p-6"},ea={key:0,class:"text-center text-gray-500 py-8"},ta={key:1,class:"space-y-3"},aa={class:"flex-1 min-w-0"},sa={class:"font-medium truncate"},la={class:"text-sm text-gray-500 truncate"},na={class:"bg-white rounded-lg shadow"},oa={class:"p-4 sm:p-6"},ra={key:0,class:"text-center text-gray-500 py-8"},ia={key:1,class:"space-y-3"},da={class:"flex-1 min-w-0"},ua={class:"font-medium truncate"},ca={class:"text-sm text-gray-500"},pa={class:"text-sm font-medium text-primary-600"},va={__name:"DashboardOverview",props:{conventionId:{type:Number,required:!0}},setup(e){const a=t({totalGuests:0,totalSchedules:0,totalCompanions:0,scheduleAssignments:0}),s=t([]),i=t([]);return C(()=>{(async()=>{try{a.value={totalGuests:0,totalSchedules:0,totalCompanions:0,scheduleAssignments:0}}catch(e){console.error("Failed to load stats:",e)}})()}),(e,t)=>(l(),n(d,null,[o("div",Ut,[o("div",Ft,[o("div",Nt,[o("div",null,[t[0]||(t[0]=o("p",{class:"text-sm text-gray-600"},"총 참석자",-1)),o("p",Pt,r(a.value.totalGuests),1)]),t[1]||(t[1]=o("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),o("div",Lt,[o("div",qt,[o("div",null,[t[2]||(t[2]=o("p",{class:"text-sm text-gray-600"},"총 일정",-1)),o("p",Et,r(a.value.totalSchedules),1)]),t[3]||(t[3]=o("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))])]),o("div",Yt,[o("div",Rt,[o("div",null,[t[4]||(t[4]=o("p",{class:"text-sm text-gray-600"},"동반자",-1)),o("p",Wt,r(a.value.totalCompanions),1)]),t[5]||(t[5]=o("div",{class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1))])]),o("div",Gt,[o("div",Qt,[o("div",null,[t[6]||(t[6]=o("p",{class:"text-sm text-gray-600"},"일정 배정",-1)),o("p",Jt,r(a.value.scheduleAssignments),1)]),t[7]||(t[7]=o("div",{class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})])],-1))])])]),o("div",Kt,[o("div",Zt,[t[9]||(t[9]=o("div",{class:"p-4 sm:p-6 border-b"},[o("h3",{class:"text-lg font-semibold"},"최근 등록된 참석자")],-1)),o("div",Xt,[0===s.value.length?(l(),n("div",ea," 등록된 참석자가 없습니다 ")):(l(),n("div",ta,[(l(!0),n(d,null,u(s.value,e=>(l(),n("div",{key:e.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[o("div",aa,[o("p",sa,r(e.guestName),1),o("p",la,r(e.corpPart||"부서 미지정"),1)]),t[8]||(t[8]=o("span",{class:"text-xs text-gray-400 ml-2"},"방금",-1))]))),128))]))])]),o("div",na,[t[10]||(t[10]=o("div",{class:"p-4 sm:p-6 border-b"},[o("h3",{class:"text-lg font-semibold"},"일정 현황")],-1)),o("div",oa,[0===i.value.length?(l(),n("div",ra," 등록된 일정이 없습니다 ")):(l(),n("div",ia,[(l(!0),n(d,null,u(i.value,e=>(l(),n("div",{key:e.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[o("div",da,[o("p",ua,r(e.courseName),1),o("p",ca,r(e.itemCount)+"개 항목",1)]),o("span",pa,r(e.guestCount)+"명",1)]))),128))]))])])])],64))}},ma={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},ga={class:"flex-1"},ha={class:"sm:hidden space-y-3"},xa={class:"flex items-start justify-between mb-2"},fa={class:"flex-1"},ya={class:"font-semibold text-lg"},ba={class:"text-sm text-gray-600"},wa={key:0,class:"text-sm text-gray-500"},ka={class:"mt-1"},Ca={key:0,class:"inline-block px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"},Ma={key:1,class:"inline-block px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600"},Sa={class:"text-sm text-gray-600 space-y-1"},$a={class:"mt-3 flex flex-wrap gap-2"},ja=["onClick"],Ia=["onClick"],Da=["onClick"],_a=["onClick"],Va=["onClick"],Ta=["onClick"],Aa={class:"hidden sm:block bg-white rounded-lg shadow overflow-hidden"},za={class:"min-w-full divide-y divide-gray-200"},Ba={class:"bg-white divide-y divide-gray-200"},Oa={class:"px-6 py-4 whitespace-nowrap font-medium"},Ha={class:"px-6 py-4 whitespace-nowrap text-gray-600"},Ua={class:"px-6 py-4 whitespace-nowrap text-gray-600"},Fa={class:"px-6 py-4 whitespace-nowrap text-gray-600"},Na={class:"px-6 py-4 whitespace-nowrap"},Pa={key:0,class:"inline-block px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"},La={key:1,class:"inline-block px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600"},qa={class:"px-6 py-4 whitespace-nowrap text-right space-x-2"},Ea=["onClick"],Ya=["onClick"],Ra=["onClick"],Wa=["onClick"],Ga=["onClick"],Qa=["onClick"],Ja={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ka={class:"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto"},Za={class:"p-6"},Xa={class:"text-xl font-semibold mb-4"},es={class:"space-y-4"},ts={key:0,class:"mt-1 text-sm text-red-600"},as={key:0,class:"mt-1 text-sm text-red-600"},ss={class:"flex justify-end space-x-3 mt-6"},ls=["disabled"],ns={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},os={class:"bg-white rounded-lg w-full max-w-md"},rs={class:"p-6"},is={class:"text-xl font-semibold mb-4"},ds={class:"mb-4 p-3 bg-blue-50 rounded-lg"},us={class:"text-sm text-blue-800"},cs={class:"space-y-4"},ps=["disabled","placeholder"],vs={key:0,class:"mt-1 text-sm text-red-600"},ms={key:0},gs={key:0,class:"mt-1 text-sm text-red-600"},hs={key:1,class:"pt-4 border-t"},xs={class:"flex justify-end space-x-3 mt-6"},fs=["disabled"],ys={__name:"GuestManagement",props:{conventionId:{type:Number,required:!0}},setup(e){const s=e,p=t([]),m=t(""),x=t(!1),f=t(!1),y=t(null),b=t(null),w=t(!1),k=t({guestName:"",telephone:"",corpPart:"",affiliation:""}),M=t({}),S=t({isEdit:!1,loginId:"",password:"",role:"Guest"}),j=t({}),I=a(()=>{if(!m.value)return p.value;const e=m.value.toLowerCase();return p.value.filter(t=>t.guestName.toLowerCase().includes(e)||t.telephone.includes(e)||t.corpPart&&t.corpPart.toLowerCase().includes(e))}),D=async()=>{try{const e=await H.get(`/admin/conventions/${s.conventionId}/guests`);p.value=e.data}catch(e){console.error("Failed to load guests:",e)}},_=e=>{M.value[e]=null},V=e=>{j.value[e]=null},T=e=>{y.value=e,k.value={...e},M.value={}},A=()=>{x.value=!1,y.value=null,k.value={guestName:"",telephone:"",corpPart:"",affiliation:""},M.value={}},z=async()=>{var e,t,a,l;M.value={},w.value=!0;try{y.value?await H.put(`/admin/guests/${y.value.id}`,k.value):await H.post(`/admin/conventions/${s.conventionId}/guests`,k.value),await D(),A()}catch(n){(null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.field)?M.value[n.response.data.field]=n.response.data.message:alert((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.message)||"저장 실패")}finally{w.value=!1}},B=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{await H.delete(`/admin/guests/${e}`),await D()}catch(t){console.error("Failed to delete guest:",t),alert("삭제 실패")}},O=async e=>{try{const t=await H.get(`/admin/guests/${e.id}/access-link`);await navigator.clipboard.writeText(t.data.link),alert("링크가 복사되었습니다!")}catch(t){console.error("Failed to copy link:",t),alert("링크 복사 실패")}},U=async e=>{try{const t=await H.post(`/admin/guests/${e.id}/send-sms`);alert(t.data.message)}catch(t){console.error("Failed to send SMS:",t),alert("SMS 전송 실패")}},F=e=>{b.value=e,S.value={isEdit:!1,loginId:e.telephone,password:"",role:"Guest"},j.value={},f.value=!0},N=e=>{b.value=e,S.value={isEdit:!0,loginId:e.user.loginId,password:"",role:e.user.role},j.value={},f.value=!0},P=()=>{f.value=!1,b.value=null,S.value={isEdit:!1,loginId:"",password:"",role:"Guest"},j.value={}},L=async()=>{var e,t,a,s;j.value={},w.value=!0;try{S.value.isEdit?await H.put(`/admin/guests/${b.value.id}/user`,{role:S.value.role}):await H.post(`/admin/guests/${b.value.id}/convert-to-user`,{loginId:S.value.loginId,password:S.value.password,role:S.value.role}),await D(),P(),alert("저장되었습니다.")}catch(l){(null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.field)?j.value[l.response.data.field]=l.response.data.message:alert((null==(s=null==(a=l.response)?void 0:a.data)?void 0:s.message)||"저장 실패")}finally{w.value=!1}},q=async()=>{var e,t;const a=prompt("새 비밀번호를 입력하세요 (최소 6자):");if(a)try{await H.post(`/admin/users/${b.value.user.id}/reset-password`,{newPassword:a}),alert("비밀번호가 재설정되었습니다.")}catch(s){alert((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||"비밀번호 재설정 실패")}};return C(()=>{D()}),(e,t)=>{var a,s;return l(),n("div",null,[o("div",ma,[o("div",ga,[g(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),type:"text",placeholder:"이름, 전화번호, 부서 검색...",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"},null,512),[[h,m.value]])]),o("button",{onClick:t[1]||(t[1]=e=>x.value=!0),class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 whitespace-nowrap"}," + 참석자 추가 ")]),o("div",ha,[(l(!0),n(d,null,u(I.value,e=>(l(),n("div",{key:e.id,class:"bg-white rounded-lg shadow p-4"},[o("div",xa,[o("div",fa,[o("h3",ya,r(e.guestName),1),o("p",ba,r(e.corpPart||"부서 미지정"),1),e.affiliation?(l(),n("p",wa,r(e.affiliation),1)):c("",!0),o("div",ka,[e.isRegisteredUser?(l(),n("span",Ca," 회원: "+r(e.user.loginId)+" ("+r(e.user.role)+") ",1)):(l(),n("span",Ma," 비회원 "))])])]),o("div",Sa,[o("p",null,"📞 "+r(e.telephone),1)]),o("div",$a,[o("button",{onClick:t=>O(e),class:"px-3 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100"}," 링크복사 ",8,ja),o("button",{onClick:t=>U(e),class:"px-3 py-1.5 text-sm bg-purple-50 text-purple-600 rounded hover:bg-purple-100"}," SMS전송 ",8,Ia),e.isRegisteredUser?(l(),n("button",{key:1,onClick:t=>N(e),class:"px-3 py-1.5 text-sm bg-green-50 text-green-600 rounded hover:bg-green-100"}," 계정관리 ",8,_a)):(l(),n("button",{key:0,onClick:t=>F(e),class:"px-3 py-1.5 text-sm bg-green-50 text-green-600 rounded hover:bg-green-100"}," 회원전환 ",8,Da)),o("button",{onClick:t=>T(e),class:"px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200"}," 수정 ",8,Va),o("button",{onClick:t=>B(e.id),class:"px-3 py-1.5 text-sm bg-red-50 text-red-600 rounded hover:bg-red-100"}," 삭제 ",8,Ta)])]))),128))]),o("div",Aa,[o("table",za,[t[13]||(t[13]=o("thead",{class:"bg-gray-50"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"이름"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"부서"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"소속"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"전화번호"),o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"구분"),o("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"액션")])],-1)),o("tbody",Ba,[(l(!0),n(d,null,u(I.value,e=>(l(),n("tr",{key:e.id,class:"hover:bg-gray-50"},[o("td",Oa,r(e.guestName),1),o("td",Ha,r(e.corpPart||"-"),1),o("td",Ua,r(e.affiliation||"-"),1),o("td",Fa,r(e.telephone),1),o("td",Na,[e.isRegisteredUser?(l(),n("span",Pa," 회원 ("+r(e.user.role)+") ",1)):(l(),n("span",La," 비회원 "))]),o("td",qa,[o("button",{onClick:t=>O(e),class:"text-blue-600 hover:text-blue-900",title:"링크 복사"}," 🔗 ",8,Ea),o("button",{onClick:t=>U(e),class:"text-purple-600 hover:text-purple-900",title:"SMS 전송"}," 📱 ",8,Ya),e.isRegisteredUser?(l(),n("button",{key:1,onClick:t=>N(e),class:"text-green-600 hover:text-green-900"}," 계정관리 ",8,Wa)):(l(),n("button",{key:0,onClick:t=>F(e),class:"text-green-600 hover:text-green-900"}," 회원전환 ",8,Ra)),o("button",{onClick:t=>T(e),class:"text-primary-600 hover:text-primary-900"}," 수정 ",8,Ga),o("button",{onClick:t=>B(e.id),class:"text-red-600 hover:text-red-900"}," 삭제 ",8,Qa)])]))),128))])])]),x.value||y.value?(l(),n("div",Ja,[o("div",Ka,[o("div",Za,[o("h2",Xa,r(y.value?"참석자 수정":"참석자 추가 (비회원)"),1),o("div",es,[o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium mb-1"},"이름 *",-1)),g(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>k.value.guestName=e),type:"text",class:v(["w-full px-3 py-2 border rounded-lg",{"border-red-500":M.value.guestName}]),onInput:t[3]||(t[3]=e=>_("guestName"))},null,34),[[h,k.value.guestName]]),M.value.guestName?(l(),n("p",ts,r(M.value.guestName),1)):c("",!0)]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium mb-1"},"전화번호 *",-1)),g(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>k.value.telephone=e),type:"tel",class:v(["w-full px-3 py-2 border rounded-lg",{"border-red-500":M.value.telephone}]),onInput:t[5]||(t[5]=e=>_("telephone"))},null,34),[[h,k.value.telephone]]),M.value.telephone?(l(),n("p",as,r(M.value.telephone),1)):c("",!0)]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium mb-1"},"부서",-1)),g(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>k.value.corpPart=e),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[h,k.value.corpPart]])]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium mb-1"},"소속",-1)),g(o("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>k.value.affiliation=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 서울지점, 영업팀 등"},null,512),[[h,k.value.affiliation]])])]),o("div",ss,[o("button",{onClick:A,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:z,disabled:w.value,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-300"},r(w.value?"저장 중...":"저장"),9,ls)])])])])):c("",!0),f.value?(l(),n("div",ns,[o("div",os,[o("div",rs,[o("h2",is,r(S.value.isEdit?"계정 관리":"회원 전환"),1),o("div",ds,[o("p",us,[o("strong",null,r(null==(a=b.value)?void 0:a.guestName),1),t[18]||(t[18]=i("님의 로그인 계정 ",-1))])]),o("div",cs,[o("div",null,[t[19]||(t[19]=o("label",{class:"block text-sm font-medium mb-1"},"로그인 ID *",-1)),g(o("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>S.value.loginId=e),type:"text",class:v(["w-full px-3 py-2 border rounded-lg",{"border-red-500":j.value.loginId}]),disabled:S.value.isEdit,placeholder:S.value.isEdit?"":"예: "+(null==(s=b.value)?void 0:s.telephone),onInput:t[9]||(t[9]=e=>V("loginId"))},null,42,ps),[[h,S.value.loginId]]),j.value.loginId?(l(),n("p",vs,r(j.value.loginId),1)):c("",!0)]),S.value.isEdit?c("",!0):(l(),n("div",ms,[t[20]||(t[20]=o("label",{class:"block text-sm font-medium mb-1"},"비밀번호 *",-1)),g(o("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>S.value.password=e),type:"password",class:v(["w-full px-3 py-2 border rounded-lg",{"border-red-500":j.value.password}]),placeholder:"최소 6자 이상",onInput:t[11]||(t[11]=e=>V("password"))},null,34),[[h,S.value.password]]),j.value.password?(l(),n("p",gs,r(j.value.password),1)):c("",!0)])),o("div",null,[t[22]||(t[22]=o("label",{class:"block text-sm font-medium mb-1"},"권한 *",-1)),g(o("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>S.value.role=e),class:"w-full px-3 py-2 border rounded-lg"},[...t[21]||(t[21]=[o("option",{value:"Guest"},"Guest (일반 참석자)",-1),o("option",{value:"Admin"},"Admin (관리자)",-1)])],512),[[$,S.value.role]])]),S.value.isEdit?(l(),n("div",hs,[o("button",{onClick:q,class:"w-full px-4 py-2 bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100"}," 비밀번호 재설정 ")])):c("",!0)]),o("div",xs,[o("button",{onClick:P,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:L,disabled:w.value,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-300"},r(w.value?"저장 중...":"저장"),9,fs)])])])])):c("",!0)])}}},bs={class:"flex justify-between items-center mb-6"},ws={class:"space-y-4"},ks={class:"p-4 sm:p-6 border-b bg-gray-50 flex items-center justify-between"},Cs={class:"flex-1"},Ms={class:"font-semibold text-lg"},Ss={class:"text-sm text-gray-600"},$s={class:"flex gap-2"},js=["onClick"],Is=["onClick"],Ds={class:"p-4 sm:p-6"},_s={class:"space-y-3"},Vs={class:"flex-shrink-0 w-16 text-sm font-medium text-gray-600"},Ts={class:"flex-1 min-w-0"},As={class:"font-medium"},zs={key:0,class:"text-sm text-gray-500"},Bs={key:1,class:"text-sm text-gray-600 mt-1 whitespace-pre-wrap"},Os={class:"flex gap-1"},Hs=["onClick"],Us=["onClick"],Fs=["onClick"],Ns={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ps={class:"bg-white rounded-lg w-full max-w-md"},Ls={class:"p-6"},qs={class:"text-xl font-semibold mb-4"},Es={class:"space-y-4"},Ys={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Rs={class:"bg-white rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto"},Ws={class:"p-6"},Gs={class:"text-xl font-semibold mb-4"},Qs={class:"space-y-4"},Js={class:"grid grid-cols-2 gap-3"},Ks={__name:"ScheduleManagement",props:{conventionId:{type:Number,required:!0}},setup(e){const a=e,s=t([]),i=t(!1),p=t(!1),v=t(null),m=t(null),x=t(null),f=t({courseName:"",description:""}),y=t({scheduleDate:"",startTime:"",title:"",location:"",content:""}),b=async()=>{try{const e=await H.get(`/admin/conventions/${a.conventionId}/schedule-templates`);s.value=e.data}catch(e){console.error("Failed to load templates:",e)}},w=()=>{i.value=!1,v.value=null,f.value={courseName:"",description:""}},k=async()=>{try{v.value?await H.put(`/admin/schedule-templates/${v.value.id}`,f.value):await H.post(`/admin/conventions/${a.conventionId}/schedule-templates`,f.value),await b(),w()}catch(e){console.error("Failed to save template:",e)}},M=()=>{p.value=!1,m.value=null,x.value=null},S=async()=>{try{const e={...y.value,scheduleTemplateId:x.value.id};m.value?await H.put(`/admin/schedule-items/${m.value.id}`,e):await H.post("/admin/schedule-items",e),await b(),M()}catch(e){console.error("Failed to save schedule item:",e)}};return C(()=>{b()}),(e,t)=>(l(),n("div",null,[o("div",bs,[t[8]||(t[8]=o("h2",{class:"text-xl font-semibold"},"일정 템플릿",-1)),o("button",{onClick:t[0]||(t[0]=e=>i.value=!0),class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," + 템플릿 추가 ")]),o("div",ws,[(l(!0),n(d,null,u(s.value,e=>(l(),n("div",{key:e.id,class:"bg-white rounded-lg shadow overflow-hidden"},[o("div",ks,[o("div",Cs,[o("h3",Ms,r(e.courseName),1),o("p",Ss,r(e.description),1)]),o("div",$s,[o("button",{onClick:t=>(e=>{v.value=e,f.value={courseName:e.courseName,description:e.description}})(e),class:"px-3 py-1.5 text-sm bg-white border rounded hover:bg-gray-50"}," 수정 ",8,js),o("button",{onClick:t=>(async e=>{if(confirm("템플릿을 삭제하면 모든 일정 항목도 함께 삭제됩니다. 계속하시겠습니까?"))try{await H.delete(`/admin/schedule-templates/${e}`),await b()}catch(t){console.error("Failed to delete template:",t)}})(e.id),class:"px-3 py-1.5 text-sm bg-red-50 text-red-600 rounded hover:bg-red-100"}," 삭제 ",8,Is)])]),o("div",Ds,[o("div",_s,[(l(!0),n(d,null,u(e.scheduleItems,a=>(l(),n("div",{key:a.id,class:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg"},[o("div",Vs,r(a.startTime),1),o("div",Ts,[o("p",As,r(a.title),1),a.location?(l(),n("p",zs,"📍 "+r(a.location),1)):c("",!0),a.content?(l(),n("p",Bs,r(a.content),1)):c("",!0)]),o("div",Os,[o("button",{onClick:t=>((e,t)=>{var a;x.value=e,m.value=t,y.value={scheduleDate:(null==(a=t.scheduleDate)?void 0:a.split("T")[0])||"",startTime:t.startTime,title:t.title,location:t.location||"",content:t.content||""},p.value=!0})(e,a),class:"p-1.5 hover:bg-gray-200 rounded"},[...t[9]||(t[9]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2-5a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Hs),o("button",{onClick:e=>(async e=>{if(confirm("이 일정을 삭제하시겠습니까?"))try{await H.delete(`/admin/schedule-items/${e}`),await b()}catch(t){console.error("Failed to delete schedule item:",t)}})(a.id),class:"p-1.5 hover:bg-red-100 text-red-600 rounded"},[...t[10]||(t[10]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Us)])]))),128)),o("button",{onClick:t=>(e=>{x.value=e,m.value=null,y.value={scheduleDate:"",startTime:"",title:"",location:"",content:""},p.value=!0})(e),class:"w-full py-2 text-sm text-primary-600 border-2 border-dashed border-primary-300 rounded-lg hover:bg-primary-50"}," + 일정 항목 추가 ",8,Fs)])])]))),128))]),i.value||v.value?(l(),n("div",Ns,[o("div",Ps,[o("div",Ls,[o("h2",qs,r(v.value?"템플릿 수정":"템플릿 추가"),1),o("div",Es,[o("div",null,[t[11]||(t[11]=o("label",{class:"block text-sm font-medium mb-1"},"코스명 *",-1)),g(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>f.value.courseName=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 11월 3일"},null,512),[[h,f.value.courseName]])]),o("div",null,[t[12]||(t[12]=o("label",{class:"block text-sm font-medium mb-1"},"설명",-1)),g(o("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>f.value.description=e),class:"w-full px-3 py-2 border rounded-lg",rows:"2"},null,512),[[h,f.value.description]])])]),o("div",{class:"flex justify-end space-x-3 mt-6"},[o("button",{onClick:w,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:k,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 저장 ")])])])])):c("",!0),p.value?(l(),n("div",Ys,[o("div",Rs,[o("div",Ws,[o("h2",Gs,r(m.value?"일정 수정":"일정 추가"),1),o("div",Qs,[o("div",Js,[o("div",null,[t[13]||(t[13]=o("label",{class:"block text-sm font-medium mb-1"},"날짜 *",-1)),g(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>y.value.scheduleDate=e),type:"date",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[h,y.value.scheduleDate]])]),o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium mb-1"},"시작 시간 *",-1)),g(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>y.value.startTime=e),type:"time",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[h,y.value.startTime]])])]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium mb-1"},"제목 *",-1)),g(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>y.value.title=e),type:"text",class:"w-full px-3 py-2 border rounded-lg",placeholder:"예: 객실에 집결"},null,512),[[h,y.value.title]])]),o("div",null,[t[16]||(t[16]=o("label",{class:"block text-sm font-medium mb-1"},"장소",-1)),g(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>y.value.location=e),type:"text",class:"w-full px-3 py-2 border rounded-lg"},null,512),[[h,y.value.location]])]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium mb-1"},"상세 내용",-1)),g(o("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>y.value.content=e),class:"w-full px-3 py-2 border rounded-lg",rows:"5",placeholder:"일정에 대한 상세 설명을 입력하세요"},null,512),[[h,y.value.content]])])]),o("div",{class:"flex justify-end space-x-3 mt-6"},[o("button",{onClick:M,class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," 취소 "),o("button",{onClick:S,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700"}," 저장 ")])])])])):c("",!0)]))}},Zs={class:"bg-white rounded-lg shadow p-6"},Xs={class:"mb-4"},el=["disabled"],tl={key:0,class:"mt-4"},al={key:0,class:"mt-2 text-sm text-green-700 space-y-1"},sl={key:1,class:"mt-2 text-sm text-red-700"},ll={__name:"BulkUpload",props:{conventionId:{type:Number,required:!0}},setup(e){const a=e,s=t(null),i=t(!1),m=t(null),g=e=>{s.value=e.target.files[0],m.value=null},h=async()=>{var e,t;if(!s.value)return;i.value=!0,m.value=null;const l=new FormData;l.append("file",s.value);try{const e=await H.post(`/scheduleupload/conventions/${a.conventionId}/upload`,l,{headers:{"Content-Type":"multipart/form-data"}});m.value={success:!0,message:e.data.message,totalSchedules:e.data.totalSchedules,guestsCreated:e.data.guestsCreated,scheduleAssignments:e.data.scheduleAssignments,errors:e.data.errors}}catch(n){m.value={success:!1,message:"업로드 실패",errors:[(null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||n.message]}}finally{i.value=!1}};return(e,t)=>(l(),n("div",Zs,[t[1]||(t[1]=o("h2",{class:"text-xl font-semibold mb-4"},"엑셀 일괄 업로드",-1)),o("div",Xs,[t[0]||(t[0]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 엑셀 파일 선택 ",-1)),o("input",{type:"file",onChange:g,accept:".xlsx",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"},null,32)]),t[2]||(t[2]=p('<div class="mb-4 p-4 bg-blue-50 rounded-md"><h3 class="font-medium text-blue-900 mb-2">📋 엑셀 형식</h3><div class="text-sm text-blue-700 space-y-1"><p><strong>Sheet1:</strong> 참석자 정보 및 일정표</p><p class="ml-4">A열: 구분 (STAFF 등)</p><p class="ml-4">B열: 부서</p><p class="ml-4">C열: 성명</p><p class="ml-4">D열: HR ID</p><p class="ml-4">E열: 전화번호</p><p class="ml-4">F열~: 일정 헤더 (11/03(월) [1호차] 객실에 집결 ~ 07:30)</p><p class="ml-4 mt-1">데이터: &quot;O&quot; 표시 또는 추가 메모</p><p class="mt-2"><strong>Sheet2:</strong> 일정 상세 설명</p><p class="ml-4">A열: 일정명</p><p class="ml-4">B열: 상세 내용</p></div></div>',1)),o("button",{onClick:h,disabled:!s.value||i.value,class:"w-full px-6 py-3 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed mb-4"},r(i.value?"업로드 중...":"업로드"),9,el),m.value?(l(),n("div",tl,[o("div",{class:v(["p-4 rounded-md",m.value.success?"bg-green-50":"bg-red-50"])},[o("p",{class:v(["font-medium",m.value.success?"text-green-800":"text-red-800"])},r(m.value.message),3),m.value.success?(l(),n("div",al,[o("p",null,"✓ 일정 템플릿: "+r(m.value.totalSchedules)+"개",1),o("p",null,"✓ 참석자 생성: "+r(m.value.guestsCreated)+"명",1),o("p",null,"✓ 일정 배정: "+r(m.value.scheduleAssignments)+"건",1)])):c("",!0),m.value.errors&&m.value.errors.length?(l(),n("ul",sl,[(l(!0),n(d,null,u(m.value.errors,(e,t)=>(l(),n("li",{key:t},"• "+r(e),1))),128))])):c("",!0)],2)])):c("",!0),t[3]||(t[3]=o("div",{class:"mt-6 pt-6 border-t"},[o("h3",{class:"font-semibold mb-3"},"샘플 파일"),o("p",{class:"text-sm text-gray-600 mb-3"}," 샘플 엑셀 파일을 다운로드하여 형식을 확인하세요. "),o("a",{href:"/Sample/업로드_샘플.xlsx",download:"",class:"inline-block px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"}," 📥 샘플 다운로드 ")],-1))]))}},nl={class:"min-h-screen bg-gray-50"},ol={class:"bg-white shadow-sm sticky top-0 z-40"},rl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},il={class:"flex justify-between items-center h-16"},dl={class:"flex items-center"},ul={key:0,class:"ml-4 text-sm text-gray-500"},cl={class:"flex items-center space-x-4"},pl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},vl={class:"mb-6 overflow-x-auto"},ml={class:"flex space-x-1 sm:space-x-4 border-b min-w-max"},gl=["onClick"],hl={class:"hidden sm:inline"},xl={class:"sm:hidden"},fl={key:0},yl={key:1},bl={key:2},wl={key:3},kl={class:"min-h-screen bg-gray-50"},Cl={class:"px-4 py-6"},Ml={class:"px-4 py-6"},Sl={class:"px-4 py-6"},$l={class:"px-4 py-6"},jl={class:"px-4 py-6"},Il={class:"px-4 py-6"},Dl={class:"px-4 py-6"},_l={class:"min-h-screen bg-gray-50"},Vl={class:"min-h-screen bg-gray-50"},Tl=[{path:"/setup",name:"Setup",component:tt,meta:{title:"초기 설정",requiresAuth:!1}},{path:"/login",name:"Login",component:Ne,meta:{title:"로그인",requiresAuth:!1}},{path:"/",name:"Home",component:Ve,meta:{title:"행사 홈",requiresAuth:!0}},{path:"/admin",name:"Admin",component:Ht,meta:{title:"행사 관리",requiresAuth:!1,requiresAdmin:!1}},{path:"/admin/conventions/:id",name:"AdminDashboard",component:{__name:"AdminDashboard",setup(e){const a=s(),i=j(),p=R(),m=t(parseInt(i.params.id)),g=t(null),h=t("dashboard"),x=t(!1),f=async()=>{confirm("로그아웃하시겠습니까?")&&(await p.logout(),a.push("/login"))},b=[{id:"dashboard",name:"대시보드",shortName:"대시보드"},{id:"guests",name:"참석자 관리",shortName:"참석자"},{id:"schedules",name:"일정 관리",shortName:"일정"},{id:"upload",name:"엑셀 업로드",shortName:"업로드"}];return C(async()=>{try{const e=await B.get(`/api/conventions/${m.value}`);g.value=e.data}catch(e){console.error("Failed to load convention:",e),alert("행사 정보를 불러오는데 실패했습니다."),a.push("/admin")}}),(e,t)=>(l(),n("div",nl,[o("header",ol,[o("div",rl,[o("div",il,[o("div",dl,[t[1]||(t[1]=o("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"행사 관리",-1)),g.value?(l(),n("span",ul,r(g.value.title),1)):c("",!0)]),o("div",cl,[o("button",{onClick:f,class:"flex items-center space-x-2 px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},[...t[2]||(t[2]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o("span",{class:"hidden sm:inline"},"로그아웃",-1)])]),o("button",{onClick:t[0]||(t[0]=e=>x.value=!x.value),class:"sm:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100"},[...t[3]||(t[3]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])])])])]),o("div",pl,[o("div",vl,[o("nav",ml,[(l(),n(d,null,u(b,e=>o("button",{key:e.id,onClick:t=>h.value=e.id,class:v(["pb-3 px-3 sm:px-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors",h.value===e.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[o("span",hl,r(e.name),1),o("span",xl,r(e.shortName||e.name),1)],10,gl)),64))])]),"dashboard"===h.value?(l(),n("div",fl,[y(va,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0),"guests"===h.value?(l(),n("div",yl,[y(ys,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0),"schedules"===h.value?(l(),n("div",bl,[y(Ks,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0),"upload"===h.value?(l(),n("div",wl,[y(ll,{"convention-id":m.value},null,8,["convention-id"])])):c("",!0)])]))}},meta:{title:"행사 대시보드",requiresAuth:!1,requiresAdmin:!1}},{path:"/my-schedule",name:"MySchedule",component:{__name:"MySchedule",setup:e=>(e,t)=>(l(),n("div",kl,[...t[0]||(t[0]=[o("div",{class:"px-4 py-6"},[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"나의 일정"),o("p",{class:"text-gray-600"},"일정 페이지 구현 예정")],-1)])]))},meta:{title:"나의일정"}},{path:"/location",name:"LocationInfo",component:{__name:"LocationInfo",setup:e=>(e,t)=>(l(),n("div",Cl,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"로마 정보",-1),o("p",{class:"text-gray-600"},"로마 여행 정보 페이지 (구현 예정)",-1)])]))},meta:{title:"로마 정보"}},{path:"/schedule",name:"Schedule",component:{__name:"Schedule",setup:e=>(e,t)=>(l(),n("div",Ml,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"전체 일정",-1),o("p",{class:"text-gray-600"},"전체 일정 페이지 (구현 예정)",-1)])]))},meta:{title:"일정"}},{path:"/participants",name:"Participants",component:{__name:"Participants",setup:e=>(e,t)=>(l(),n("div",Sl,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"참가자",-1),o("p",{class:"text-gray-600"},"참가자 목록 페이지 (구현 예정)",-1)])]))},meta:{title:"주체국"}},{path:"/hotspot",name:"HotSpot",component:{__name:"HotSpot",setup:e=>(e,t)=>(l(),n("div",$l,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"핫스팟",-1),o("p",{class:"text-gray-600"},"추천 관광지 페이지 (구현 예정)",-1)])]))},meta:{title:"핫스팟"}},{path:"/tastespot",name:"TasteSpot",component:{__name:"TasteSpot",setup:e=>(e,t)=>(l(),n("div",jl,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"맛스팟",-1),o("p",{class:"text-gray-600"},"추천 맛집 페이지 (구현 예정)",-1)])]))},meta:{title:"맛스팟"}},{path:"/group-schedule",name:"GroupSchedule",component:{__name:"GroupSchedule",setup:e=>(e,t)=>(l(),n("div",Il,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"그룹 일정",-1),o("p",{class:"text-gray-600"},"그룹별 일정 페이지 (구현 예정)",-1)])]))},meta:{title:"합창국"}},{path:"/event-place",name:"EventPlace",component:{__name:"EventPlace",setup:e=>(e,t)=>(l(),n("div",Dl,[...t[0]||(t[0]=[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"사진첩",-1),o("p",{class:"text-gray-600"},"행사 사진 갤러리 페이지 (구현 예정)",-1)])]))},meta:{title:"사진첩"}},{path:"/board",name:"Board",component:{__name:"Board",setup:e=>(e,t)=>(l(),n("div",_l,[...t[0]||(t[0]=[o("div",{class:"px-4 py-6"},[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"게시판"),o("p",{class:"text-gray-600"},"게시판 페이지 구현 예정")],-1)])]))},meta:{title:"게시판"}},{path:"/chat",name:"Chat",component:{__name:"Chat",setup:e=>(e,t)=>(l(),n("div",Vl,[...t[0]||(t[0]=[o("div",{class:"px-4 py-6"},[o("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"채팅"),o("p",{class:"text-gray-600"},"채팅 페이지 구현 예정")],-1)])]))},meta:{title:"채팅"}}],Al=I({history:D(),routes:Tl,scrollBehavior:(e,t,a)=>a||{top:0}});Al.beforeEach((e,t,a)=>{document.title=e.meta.title||"iFA Convention";const s=R(),l=!1!==e.meta.requiresAuth,n=e.meta.requiresAdmin||!1;l&&!s.isAuthenticated?a("/login"):n&&!s.isAdmin||"/login"===e.path&&s.isAuthenticated?a("/"):a()});const zl={async ask(e,t=null,a=null){try{return await H.post("/conventionchat/ask",{question:e,conventionId:t,...a})}catch(s){throw console.error("Failed to ask question:",s),s}},async askAboutConvention(e,t,a=null){try{return await H.post(`/conventionchat/conventions/${e}/ask`,{question:t,...a})}catch(s){throw console.error(`Failed to ask about convention ${e}:`,s),s}},async askWithHistory(e,t=[],a=null,s=null){try{return await H.post("/conventionchat/ask/with-history",{question:e,history:t,conventionId:a,...s})}catch(l){throw console.error("Failed to ask with history:",l),l}},async getSuggestedQuestions(e,t=null){try{const a=new URLSearchParams;(null==t?void 0:t.role)&&a.append("role",t.role),(null==t?void 0:t.guestId)&&a.append("guestId",t.guestId),(null==t?void 0:t.companionId)&&a.append("companionId",t.companionId);const s=a.toString(),l=`/conventionchat/conventions/${e}/suggestions${s?"?"+s:""}`;return await H.get(l)}catch(a){return console.error(`Failed to get suggestions for convention ${e}:`,a),[]}},async reindexAll(){try{return await H.post("/conventionchat/reindex")}catch(e){throw console.error("Failed to reindex all:",e),e}},async indexConvention(e){try{return await H.post(`/conventionchat/conventions/${e}/index`)}catch(t){throw console.error(`Failed to index convention ${e}:`,t),t}}},Bl={async login({role:e,conventionId:t,identifier:a,password:s}){let l="",n={};"admin"===e?(l="/auth/login/admin",n={memberId:a,password:s}):"guest"===e?(l="/auth/login/guest",n={telephone:a,conventionId:parseInt(t),password:s}):"companion"===e&&(l="/auth/login/companion",n={telephone:a,guestId:parseInt(t),password:s});return(await H.post(l,n)).user},getConventions:async()=>await H.get("/auth/conventions"),getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},logout(){localStorage.removeItem("user")}},Ol=e("chat",()=>{const e=t([]),s=t(!1),l=t(null),n=t([]),o=t(!1),r=t(null),i=a(()=>e.value.length>0?e.value[e.value.length-1]:null),d=a(()=>e.value.filter(e=>"user"===e.role)),u=a(()=>e.value.filter(e=>"assistant"===e.role));function c(){const e=Bl.getCurrentUser();return e?{role:e.role,guestId:e.guestId,companionId:e.companionId,memberId:e.memberId}:null}async function p(t){if(!t.trim())return;const a={id:Date.now(),role:"user",content:t,timestamp:(new Date).toISOString()};e.value.push(a),s.value=!0,l.value=null;try{const a=c(),s=await zl.ask(t,r.value,a),l={id:Date.now()+1,role:"assistant",content:s.answer,sources:s.sources||[],llmProvider:s.llmProvider,timestamp:s.timestamp||(new Date).toISOString()};e.value.push(l)}catch(n){l.value="답변을 생성하는 중 오류가 발생했습니다.",console.error("Failed to send message:",n);const t={id:Date.now()+1,role:"assistant",content:"죄송합니다. 답변을 생성하는 중 문제가 발생했습니다. 다시 시도해주세요.",isError:!0,timestamp:(new Date).toISOString()};e.value.push(t)}finally{s.value=!1}}async function v(e){try{const t=c(),a=await zl.getSuggestedQuestions(e,t);n.value=a}catch(t){console.error("Failed to load suggested questions:",t),n.value=["이번 행사는 언제 진행되나요?","참석자는 몇 명인가요?","행사 일정을 알려주세요","담당자 연락처를 알려주세요"]}}return{messages:e,loading:s,error:l,suggestedQuestions:n,isOpen:o,currentConventionId:r,lastMessage:i,userMessages:d,assistantMessages:u,sendMessage:p,sendMessageAboutConvention:async function(t,a){if(!a.trim())return;const n={id:Date.now(),role:"user",content:a,timestamp:(new Date).toISOString()};e.value.push(n),s.value=!0,l.value=null;try{const s=c(),l=await zl.askAboutConvention(t,a,s),n={id:Date.now()+1,role:"assistant",content:l.answer,sources:l.sources||[],llmProvider:l.llmProvider,timestamp:l.timestamp||(new Date).toISOString()};e.value.push(n)}catch(o){l.value="답변을 생성하는 중 오류가 발생했습니다.",console.error("Failed to send message about convention:",o);const t={id:Date.now()+1,role:"assistant",content:"죄송합니다. 해당 행사 정보를 찾을 수 없습니다.",isError:!0,timestamp:(new Date).toISOString()};e.value.push(t)}finally{s.value=!1}},sendMessageWithHistory:async function(t){if(!t.trim())return;const a={id:Date.now(),role:"user",content:t,timestamp:(new Date).toISOString()};e.value.push(a),s.value=!0,l.value=null;try{const a=10,s=e.value.slice(-a).map(e=>({role:e.role,content:e.content})),l=c(),n=await zl.askWithHistory(t,s,r.value,l),o={id:Date.now()+1,role:"assistant",content:n.answer,sources:n.sources||[],llmProvider:n.llmProvider,timestamp:n.timestamp||(new Date).toISOString()};e.value.push(o)}catch(n){l.value="답변을 생성하는 중 오류가 발생했습니다.",console.error("Failed to send message with history:",n);const t={id:Date.now()+1,role:"assistant",content:"죄송합니다. 답변을 생성하는 중 문제가 발생했습니다.",isError:!0,timestamp:(new Date).toISOString()};e.value.push(t)}finally{s.value=!1}},loadSuggestedQuestions:v,selectSuggestedQuestion:async function(e){await p(e)},toggleChat:function(){o.value=!o.value},openChat:function(){o.value=!0},closeChat:function(){o.value=!1},clearMessages:function(){e.value=[],l.value=null},setConventionContext:function(e){r.value=e,e&&v(e)},addWelcomeMessage:function(t=null){const a=t?`안녕하세요! "${t}" 행사에 대해 궁금하신 점을 물어보세요.`:"안녕하세요! 행사에 대해 궁금하신 점을 물어보세요.",s={id:Date.now(),role:"assistant",content:a,timestamp:(new Date).toISOString(),isWelcome:!0};0===e.value.length&&e.value.push(s)}}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Hl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ul={exports:{}};const Fl=Hl(Ul.exports=function(){var e=1e3,t=6e4,a=36e5,s="millisecond",l="second",n="minute",o="hour",r="day",i="week",d="month",u="quarter",c="year",p="date",v="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},x=function(e,t,a){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(a)+e},f={s:x,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),s=Math.floor(a/60),l=a%60;return(t<=0?"+":"-")+x(s,2,"0")+":"+x(l,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var s=12*(a.year()-t.year())+(a.month()-t.month()),l=t.clone().add(s,d),n=a-l<0,o=t.clone().add(s+(n?-1:1),d);return+(-(s+(a-l)/(n?l-o:o-l))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:c,w:i,d:r,D:p,h:o,m:n,s:l,ms:s,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=h;var w="$isDayjsObject",k=function(e){return e instanceof $||!(!e||!e[w])},C=function e(t,a,s){var l;if(!t)return y;if("string"==typeof t){var n=t.toLowerCase();b[n]&&(l=n),a&&(b[n]=a,l=n);var o=t.split("-");if(!l&&o.length>1)return e(o[0])}else{var r=t.name;b[r]=t,l=r}return!s&&l&&(y=l),l||!s&&y},M=function(e,t){if(k(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new $(a)},S=f;S.l=C,S.i=k,S.w=function(e,t){return M(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var $=function(){function h(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var x=h.prototype;return x.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(m);if(s){var l=s[2]-1||0,n=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],l,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)):new Date(s[1],l,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)}}return new Date(t)}(e),this.init()},x.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},x.$utils=function(){return S},x.isValid=function(){return!(this.$d.toString()===v)},x.isSame=function(e,t){var a=M(e);return this.startOf(t)<=a&&a<=this.endOf(t)},x.isAfter=function(e,t){return M(e)<this.startOf(t)},x.isBefore=function(e,t){return this.endOf(t)<M(e)},x.$g=function(e,t,a){return S.u(e)?this[t]:this.set(a,e)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(e,t){var a=this,s=!!S.u(t)||t,u=S.p(e),v=function(e,t){var l=S.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return s?l:l.endOf(r)},m=function(e,t){return S.w(a.toDate()[e].apply(a.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},g=this.$W,h=this.$M,x=this.$D,f="set"+(this.$u?"UTC":"");switch(u){case c:return s?v(1,0):v(31,11);case d:return s?v(1,h):v(0,h+1);case i:var y=this.$locale().weekStart||0,b=(g<y?g+7:g)-y;return v(s?x-b:x+(6-b),h);case r:case p:return m(f+"Hours",0);case o:return m(f+"Minutes",1);case n:return m(f+"Seconds",2);case l:return m(f+"Milliseconds",3);default:return this.clone()}},x.endOf=function(e){return this.startOf(e,!1)},x.$set=function(e,t){var a,i=S.p(e),u="set"+(this.$u?"UTC":""),v=(a={},a[r]=u+"Date",a[p]=u+"Date",a[d]=u+"Month",a[c]=u+"FullYear",a[o]=u+"Hours",a[n]=u+"Minutes",a[l]=u+"Seconds",a[s]=u+"Milliseconds",a)[i],m=i===r?this.$D+(t-this.$W):t;if(i===d||i===c){var g=this.clone().set(p,1);g.$d[v](m),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else v&&this.$d[v](m);return this.init(),this},x.set=function(e,t){return this.clone().$set(e,t)},x.get=function(e){return this[S.p(e)]()},x.add=function(s,u){var p,v=this;s=Number(s);var m=S.p(u),g=function(e){var t=M(v);return S.w(t.date(t.date()+Math.round(e*s)),v)};if(m===d)return this.set(d,this.$M+s);if(m===c)return this.set(c,this.$y+s);if(m===r)return g(1);if(m===i)return g(7);var h=(p={},p[n]=t,p[o]=a,p[l]=e,p)[m]||1,x=this.$d.getTime()+s*h;return S.w(x,this)},x.subtract=function(e,t){return this.add(-1*e,t)},x.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||v;var s=e||"YYYY-MM-DDTHH:mm:ssZ",l=S.z(this),n=this.$H,o=this.$m,r=this.$M,i=a.weekdays,d=a.months,u=a.meridiem,c=function(e,a,l,n){return e&&(e[a]||e(t,s))||l[a].slice(0,n)},p=function(e){return S.s(n%12||12,e,"0")},m=u||function(e,t,a){var s=e<12?"AM":"PM";return a?s.toLowerCase():s};return s.replace(g,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return r+1;case"MM":return S.s(r+1,2,"0");case"MMM":return c(a.monthsShort,r,d,3);case"MMMM":return c(d,r);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return c(a.weekdaysMin,t.$W,i,2);case"ddd":return c(a.weekdaysShort,t.$W,i,3);case"dddd":return i[t.$W];case"H":return String(n);case"HH":return S.s(n,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(n,o,!0);case"A":return m(n,o,!1);case"m":return String(o);case"mm":return S.s(o,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return l}return null}(e)||l.replace(":","")})},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(s,p,v){var m,g=this,h=S.p(p),x=M(s),f=(x.utcOffset()-this.utcOffset())*t,y=this-x,b=function(){return S.m(g,x)};switch(h){case c:m=b()/12;break;case d:m=b();break;case u:m=b()/3;break;case i:m=(y-f)/6048e5;break;case r:m=(y-f)/864e5;break;case o:m=y/a;break;case n:m=y/t;break;case l:m=y/e;break;default:m=y}return v?m:S.a(m)},x.daysInMonth=function(){return this.endOf(d).$D},x.$locale=function(){return b[this.$L]},x.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),s=C(e,t,!0);return s&&(a.$L=s),a},x.clone=function(){return S.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},h}(),j=$.prototype;return M.prototype=j,[["$ms",s],["$s",l],["$m",n],["$H",o],["$W",r],["$M",d],["$y",c],["$D",p]].forEach(function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),M.extend=function(e,t){return e.$i||(e(t,$,M),e.$i=!0),M},M.locale=C,M.isDayjs=k,M.unix=function(e){return M(1e3*e)},M.en=b[y],M.Ls=b,M.p={},M}()),Nl=e("convention",()=>{const e=t([]),s=t(null),l=t([]),n=t([]),o=t([]),r=t([]),i=t(!1),d=t(null),u=t(Fl().format("YYYY-MM-DD")),c=t("나의일정"),p=a(()=>s.value),v=a(()=>l.value.length?l.value.filter(e=>Fl(e.scheduleDate).format("YYYY-MM-DD")===u.value).sort((e,t)=>{const a=e.startTime||"00:00:00",s=t.startTime||"00:00:00";return a.localeCompare(s)}):[]),m=a(()=>{if(!l.value.length)return[];return[...new Set(l.value.map(e=>Fl(e.scheduleDate).format("YYYY-MM-DD")))].sort().map(e=>({date:e,label:Fl(e).format("M/D"),dayName:Fl(e).format("(ddd)"),isToday:Fl(e).isSame(Fl(),"day")}))});async function g(e){var t,a;i.value=!0,d.value=null;try{const n=await Y(e);s.value=null==(t=n.data)?void 0:t.convention,l.value=(null==(a=n.data)?void 0:a.schedules)||[];const o=m.value;o.length>0&&(u.value=o[0].date)}catch(n){d.value="컨벤션 상세 정보를 불러오는데 실패했습니다.",console.error("Failed to fetch convention details:",n)}finally{i.value=!1}}return{conventions:e,currentConvention:s,schedules:l,notices:n,tourInfo:o,photos:r,loading:i,error:d,selectedDate:u,activeTab:c,getCurrentConvention:p,getSchedulesByDate:v,getAvailableDates:m,fetchConventions:async function(){var t;i.value=!0,d.value=null;try{const a=await E();e.value=(null==(t=a.data)?void 0:t.conventions)||[],e.value.length>0&&await g(e.value[0].id)}catch(a){d.value="컨벤션 데이터를 불러오는데 실패했습니다.",console.error("Failed to fetch conventions:",a)}finally{i.value=!1}},setCurrentConvention:g,fetchNotices:async function(e){var t;i.value=!0;try{const a=await Y(e);n.value=(null==(t=a.data)?void 0:t.notices)||[]}catch(a){console.error("Failed to fetch notices:",a),n.value=[]}finally{i.value=!1}},fetchTourInfo:async function(e){var t;i.value=!0;try{const a=await Y(e);o.value=(null==(t=a.data)?void 0:t.tours)||[]}catch(a){console.error("Failed to fetch tour info:",a),o.value=[]}finally{i.value=!1}},fetchPhotos:async function(e){var t;i.value=!0;try{const a=await Y(e);r.value=(null==(t=a.data)?void 0:t.photos)||[]}catch(a){console.error("Failed to fetch photos:",a),r.value=[]}finally{i.value=!1}},setSelectedDate:function(e){u.value=e},setActiveTab:function(e){c.value=e}}}),Pl=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a},Ll={key:0,class:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-sm"},ql={key:1,class:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-sm"},El={class:"flex-1 max-w-3xl"},Yl={class:"prose prose-sm max-w-none"},Rl={class:"whitespace-pre-wrap break-words leading-7"},Wl={key:0,class:"mt-3 pt-3 border-t border-gray-200 flex items-center text-xs text-gray-500"},Gl={key:1,class:"mt-3 pt-3 border-t border-gray-200"},Ql={key:0,class:"mt-2.5 space-y-2"},Jl={class:"flex items-center justify-between mb-1.5"},Kl={class:"text-xs font-medium text-gray-700"},Zl={class:"text-xs text-gray-500"},Xl={class:"text-xs text-gray-600 leading-relaxed"},en=Pl({__name:"ChatMessage",props:{message:{type:Object,required:!0}},setup(e){const a=e,s=t(!1);function p(e){if(!e)return"";const t=Fl(e),a=Fl();return t.isSame(a,"day")?t.format("A h:mm"):t.isSame(a.subtract(1,"day"),"day")?`어제 ${t.format("A h:mm")}`:t.format("M월 D일 A h:mm")}function m(){navigator.clipboard.writeText(a.message.content)}return(t,a)=>(l(),n("div",{class:v(["flex items-start space-x-3 group","user"===e.message.role?"flex-row-reverse space-x-reverse":"flex-row"])},["assistant"===e.message.role?(l(),n("div",Ll,[...a[1]||(a[1]=[o("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)])])):(l(),n("div",ql,[...a[2]||(a[2]=[o("svg",{class:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)])])),o("div",El,[o("div",{class:v(["rounded-2xl px-5 py-3.5","user"===e.message.role?"bg-gray-100 text-gray-900":e.message.isError?"bg-red-50 text-red-700 border border-red-200":"bg-white text-gray-900"])},[o("div",Yl,[o("div",Rl,r(e.message.content),1)]),"assistant"===e.message.role&&e.message.llmProvider&&!e.message.isError?(l(),n("div",Wl,[a[3]||(a[3]=o("svg",{class:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),i(" "+r(e.message.llmProvider),1)])):c("",!0),e.message.sources&&e.message.sources.length>0?(l(),n("div",Gl,[o("button",{onClick:a[0]||(a[0]=e=>s.value=!s.value),class:"flex items-center text-xs font-medium text-gray-600 hover:text-gray-900 transition-colors"},[a[5]||(a[5]=o("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),i(" 출처 "+r(e.message.sources.length)+"개 ",1),(l(),n("svg",{class:v(["w-3.5 h-3.5 ml-1 transition-transform",s.value?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...a[4]||(a[4]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),s.value?(l(),n("div",Ql,[(l(!0),n(d,null,u(e.message.sources,(e,t)=>(l(),n("div",{key:t,class:"p-3 bg-gray-50 rounded-xl border border-gray-200"},[o("div",Jl,[o("span",Kl,r(e.conventionTitle||"행사 정보"),1),o("span",Zl,r(Math.round(100*e.similarity))+"% ",1)]),o("div",Xl,r(e.content),1)]))),128))])):c("",!0)])):c("",!0)],2),o("div",{class:v(["mt-1.5 px-1 text-xs text-gray-400 flex items-center space-x-3","user"===e.message.role?"justify-end":"justify-start"])},[o("span",null,r(p(e.message.timestamp)),1),"assistant"===e.message.role?(l(),n("button",{key:0,class:"opacity-0 group-hover:opacity-100 transition-opacity hover:text-gray-600",title:"복사",onClick:m},[...a[6]||(a[6]=[o("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])):c("",!0)],2)])],2))}},[["__scopeId","data-v-c2a870bc"]]),tn={class:"border-t border-gray-200 bg-white px-6 py-4"},an={class:"flex items-end space-x-3 max-w-4xl mx-auto"},sn={class:"flex-1 relative"},ln=["disabled","placeholder"],nn=["disabled"],on={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rn={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},dn=Pl({__name:"ChatInput",props:{loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"메시지를 입력하세요..."},maxLength:{type:Number,default:2e3}},emits:["send"],setup(e,{expose:s,emit:r}){const i=e,d=r,u=t(""),c=t(null),p=a(()=>u.value.trim().length>0&&!i.loading&&!i.disabled&&u.value.length<=i.maxLength);function m(){if(!p.value)return;const e=u.value.trim();e&&(d("send",e),u.value="",_(()=>{var e;f(),null==(e=c.value)||e.focus()}))}function x(e){e.shiftKey||(e.preventDefault(),m())}function f(){const e=c.value;if(!e)return;e.style.height="auto";const t=Math.min(e.scrollHeight,200);e.style.height=`${t}px`}return w(()=>i.loading,e=>{e||_(()=>{var e;null==(e=c.value)||e.focus()})}),s({focus:function(){var e;null==(e=c.value)||e.focus()},clear:function(){u.value="",f()}}),(t,a)=>(l(),n("div",tn,[o("div",an,[o("div",sn,[g(o("textarea",{ref_key:"inputRef",ref:c,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),onKeydown:V(x,["enter"]),onInput:f,disabled:e.disabled,placeholder:e.placeholder,rows:"1",class:"w-full resize-none rounded-3xl border border-gray-300 px-6 py-4 text-base focus:outline-none focus:border-gray-400 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors shadow-sm",style:{"max-height":"200px","min-height":"52px"}},null,40,ln),[[h,u.value]])]),o("button",{onClick:m,disabled:!p.value,class:v(["flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center transition-all",p.value?"bg-black text-white hover:bg-gray-800 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"])},[e.loading?(l(),n("svg",rn,[...a[2]||(a[2]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(l(),n("svg",on,[...a[1]||(a[1]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"},null,-1)])]))],10,nn)])]))}},[["__scopeId","data-v-ddeb17d8"]]),un={key:0,class:"px-6 py-6 bg-white border-b border-gray-200"},cn={class:"max-w-3xl mx-auto space-y-3"},pn=["onClick"],vn={class:"flex items-center justify-between"},mn={class:"text-sm text-gray-700 flex-1"},gn={__name:"SuggestedQuestions",props:{questions:{type:Array,default:()=>[]},maxVisible:{type:Number,default:4}},emits:["select"],setup(e,{emit:s}){const i=e,p=s,v=t(!1),m=a(()=>v.value||i.questions.length<=i.maxVisible?i.questions:i.questions.slice(0,i.maxVisible));return(t,a)=>e.questions.length>0?(l(),n("div",un,[o("div",cn,[(l(!0),n(d,null,u(m.value,(e,t)=>(l(),n("button",{key:t,onClick:t=>function(e){p("select",e)}(e),class:"w-full text-left px-5 py-3.5 bg-white rounded-2xl border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all group"},[o("div",vn,[o("span",mn,r(e),1),a[1]||(a[1]=o("svg",{class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 flex-shrink-0 ml-3 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,pn))),128))]),e.questions.length>e.maxVisible&&!v.value?(l(),n("button",{key:0,onClick:a[0]||(a[0]=e=>v.value=!0),class:"w-full mt-3 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors"}," 더 보기 ("+r(e.questions.length-e.maxVisible)+"개) ",1)):c("",!0)])):c("",!0)}},hn={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},xn={class:"relative w-full max-w-3xl h-[90vh] bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in"},fn={class:"flex-shrink-0 bg-white border-b border-gray-200 px-6 py-4"},yn={class:"flex items-center justify-between"},bn={class:"flex items-center space-x-3"},wn={class:"text-xs text-gray-500"},kn={key:0,class:"space-y-6"},Cn={key:1,class:"h-full flex flex-col items-center justify-center text-center"},Mn={key:2,class:"flex items-start space-x-3 mb-6"},Sn=Pl({__name:"ChatWindow",setup(e){const s=Ol(),i=Nl(),v=t(null),m=t(null),g=a(()=>s.messages.length<=1&&s.suggestedQuestions.length>0),h=a(()=>{const e=i.currentConvention;return e?`${e.title}에 대해 질문하세요...`:"메시지를 입력하세요..."});async function f(e){var t;const a=null==(t=i.currentConvention)?void 0:t.id;s.messages.length>1?await s.sendMessageWithHistory(e):a?await s.sendMessageAboutConvention(a,e):await s.sendMessage(e),$()}async function b(e){await f(e)}function k(){var e;if(confirm("대화 내용을 모두 삭제하시겠습니까?")){s.clearMessages();const t=null==(e=i.currentConvention)?void 0:e.title;s.addWelcomeMessage(t)}}function S(){s.closeChat()}function $(){_(()=>{const e=v.value;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})}return C(()=>{var e,t;const a=null==(e=i.currentConvention)?void 0:e.id;if(a){s.setConventionContext(a),s.loadSuggestedQuestions(a);const e=null==(t=i.currentConvention)?void 0:t.title;s.addWelcomeMessage(e)}}),w(()=>s.messages.length,()=>{$()}),w(()=>{var e;return null==(e=i.currentConvention)?void 0:e.id},e=>{e&&(s.setConventionContext(e),s.loadSuggestedQuestions(e))}),(e,t)=>{var a;return x(s).isOpen?(l(),n("div",hn,[o("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:S}),o("div",xn,[o("div",fn,[o("div",yn,[o("div",bn,[t[1]||(t[1]=o("div",{class:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-sm"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])],-1)),o("div",null,[t[0]||(t[0]=o("h2",{class:"text-lg font-semibold text-gray-900"},"ChatGPT",-1)),o("p",wn,r((null==(a=x(i).currentConvention)?void 0:a.title)||"무엇을 도와드릴까요?"),1)])]),o("div",{class:"flex items-center space-x-1"},[o("button",{onClick:k,class:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"새 채팅"},[...t[2]||(t[2]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),o("button",{onClick:S,class:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"닫기"},[...t[3]||(t[3]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])]),g.value?(l(),M(gn,{key:0,questions:x(s).suggestedQuestions,onSelect:b},null,8,["questions"])):c("",!0),o("div",{ref_key:"messagesContainer",ref:v,class:"flex-1 overflow-y-auto px-6 py-6 bg-white custom-scrollbar"},[x(s).messages.length>0?(l(),n("div",kn,[(l(!0),n(d,null,u(x(s).messages,e=>(l(),M(en,{key:e.id,message:e},null,8,["message"]))),128))])):(l(),n("div",Cn,[...t[4]||(t[4]=[p('<div class="w-20 h-20 mb-6 bg-gradient-to-br from-emerald-400 to-cyan-500 rounded-full flex items-center justify-center shadow-lg" data-v-e531c2cc><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e531c2cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-e531c2cc></path></svg></div><h3 class="text-2xl font-semibold text-gray-900 mb-2" data-v-e531c2cc> 무엇을 도와드릴까요? </h3><p class="text-gray-500 max-w-md" data-v-e531c2cc> 행사 일정, 참석자 정보, 장소 등 궁금하신 내용을 자유롭게 물어보세요 </p>',3)])])),x(s).loading?(l(),n("div",Mn,[...t[5]||(t[5]=[p('<div class="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-sm flex-shrink-0" data-v-e531c2cc><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-e531c2cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" data-v-e531c2cc></path></svg></div><div class="flex-1 bg-gray-100 rounded-2xl px-4 py-3" data-v-e531c2cc><div class="flex space-x-1.5" data-v-e531c2cc><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0ms;" data-v-e531c2cc></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:150ms;" data-v-e531c2cc></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:300ms;" data-v-e531c2cc></div></div></div>',2)])])):c("",!0)],512),y(dn,{ref_key:"chatInputRef",ref:m,loading:x(s).loading,placeholder:h.value,onSend:f},null,8,["loading","placeholder"])])])):c("",!0)}}},[["__scopeId","data-v-e531c2cc"]]),$n=["title"],jn={key:"close",class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},In={key:"chat",class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Dn={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-md"},_n={key:1,class:"absolute inset-0 rounded-full bg-primary-400 opacity-75 animate-ping"},Vn=Pl({__name:"ChatFloatingButton",props:{showBadge:{type:Boolean,default:!1}},setup(e){const t=Ol(),s=a(()=>0);function i(){t.toggleChat()}return(a,d)=>(l(),n("button",{onClick:i,class:v(["fixed bottom-20 right-4 z-40 w-14 h-14 rounded-full shadow-float transition-all duration-200 flex items-center justify-center","hover:scale-110 active:scale-95",x(t).isOpen?"bg-dark-900 hover:bg-dark-800":"bg-gradient-to-br from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700"]),title:x(t).isOpen?"채팅 닫기":"AI 챗봇"},[y(T,{name:"icon-fade",mode:"out-in"},{default:b(()=>[x(t).isOpen?(l(),n("svg",jn,[...d[0]||(d[0]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(l(),n("svg",In,[...d[1]||(d[1]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},null,-1)])]))]),_:1}),e.showBadge&&s.value>0?(l(),n("span",Dn,r(s.value>9?"9+":s.value),1)):c("",!0),x(t).isOpen?c("",!0):(l(),n("span",_n))],10,$n))}},[["__scopeId","data-v-8bac6c17"]]),Tn={class:"min-h-screen bg-gray-50"},An={class:"pb-20"},zn={key:0,class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40"},Bn={class:"flex items-center justify-around h-16 max-w-screen-xl mx-auto"},On=["onClick"],Hn=["d"],Un={class:"text-xs font-medium"},Fn={key:0,class:"absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-1 bg-primary-600 rounded-b-full"},Nn={key:1,class:"absolute top-2 right-1/4 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center"},Pn=A(Pl({__name:"App",setup(e){const t=s(),i=j();R();const p=a(()=>i.path),m=a(()=>"/login"!==i.path),g=[{path:"/",label:"홈",iconPath:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",badge:0},{path:"/my-schedule",label:"일정",iconPath:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",badge:0},{path:"/board",label:"게시판",iconPath:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",badge:3},{path:"/chat",label:"채팅",iconPath:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",badge:5},{path:"/location",label:"더보기",iconPath:"M4 6h16M4 12h16M4 18h16",badge:0}];return(e,a)=>{const s=f("router-view");return l(),n("div",Tn,[o("main",An,[y(s)]),m.value?(l(),n("nav",zn,[o("div",Bn,[(l(),n(d,null,u(g,e=>o("button",{key:e.path,onClick:a=>{return s=e.path,void t.push(s);var s},class:v(["flex flex-col items-center justify-center flex-1 h-full transition-all relative",p.value===e.path?"text-primary-600":"text-gray-500 active:scale-95"])},[(l(),n("svg",{class:v(["w-6 h-6 mb-1",p.value===e.path?"stroke-[2.5]":"stroke-2"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:e.iconPath},null,8,Hn)],2)),o("span",Un,r(e.label),1),p.value===e.path?(l(),n("span",Fn)):c("",!0),e.badge>0?(l(),n("span",Nn,r(e.badge>9?"9+":e.badge),1)):c("",!0)],10,On)),64))])])):c("",!0),y(Sn),y(Vn)])}}},[["__scopeId","data-v-a6e3d01f"]])),Ln=z();Pn.use(Ln),Pn.use(Al);R().initAuth(),Pn.mount("#app");
